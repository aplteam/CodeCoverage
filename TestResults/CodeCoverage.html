<!DOCTYPE html>
<html lang="en">
<head>
<title>Coverage</title>
<meta charset="utf-8"/>
<style>
@media screen{
    html {background-color: #FFFFF0;}
body {
    font-size: 16px;
    font-family : Verdana, "Bitstream Vera Sans", "DejaVu Sans", Tahoma, Geneva, Arial, Sans-serif;
    margin: 1em;
}
th, td {padding: 5px 10px;}
th {text-align: left;}
h1, h2, h3, h4, h5, h6 {color: #424242;}
h1 {font-size: 22px;}
h2 {font-size: 18px; margin-top: 2em; margin-bottom:0.3em;}
tbody tr:nth-child(even) {background-color: #F0F0F0;}
tbody tr:nth-child(odd) {background-color: #FAFAFA;}
th {background-color: #E6E6E6;color: #424242;}
table {border: silver 1px solid; font-size: 14px;font-family: APLFont, monospace;}
code , code a {font-size: 14px; font-family: APLFont, monospace;}
code.header {
    font-size: 16px; 
    font-family: APLFont, monospace; 
    margin: 1.5em 0.5em 0 0.5em; 
    padding:0;
    display: block;
}
div.code-block {
    border: 1px silver dashed;
    background-color: #F2F2F2;
    display: block;
    margin: 0.5em 0.5em 0.5em 0.5em;
    padding: 0.5em;
}
div.code-block.missing {
    background-color: #fa605254;
}
div.code-block code {display: block; white-space: pre-wrap; margin:0; padding:0; word-wrap: break-word;}
.emphasize { font-weight: 800;}
ul li, ol li {margin: 0.7em 0.2em;}
.float-right {float:right;}
.no-underline {    text-decoration :none;}
.top-links {font-size:20px; padding-left: 0.6em;}
.align-right {text-align: right;}
#footer hr {margin-top:1.5em;}
#footer p {margin-top:5px; padding-top:0; font-size: 9px;}
@font-face {
        font-family: "APLFont";
    src:
        local("APL385 Unicode"),
        url("https://misc.aplteam.com/apl385.ttf") format("truetype");
}
.info {border: 1px silver dashed; background-color: #F2F2F2;margin: 0.5em; padding: 0.5em;}
}
@media print{@page {size: portrait}
@page {
    margin: 1cm 1cm 1cm 1.75cm;
    @bottom-right {
        content: counter(page) " / " counter(pages);
  }
}
body {
    font: 12pt "Times New Roman", Times, serif;
    line-height: 1.2;
     /* CSS3 filter, at the moment Webkit only. Prefix it for future implementations */
    -webkit-filter: grayscale(100%);
    filter: grayscale(100%); /* future-proof */
}
h1 {font-size: 18pt;}
h2 {font-size: 16pt; margin-top: 10pt; margin-bottom: 3pt;}
th, td {padding: 2pt 3pt;}
th {text-align: left;background-color: #DBDBDB;}
tbody tr:nth-child(odd) {background-color: #EDEDED;}
table {
    color-adjust: exact !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    font-size: 8pt;
    font-family: APLFont, monospace;
}
div.keep-together {break-inside: avoid; break-before:auto;}
table {border: silver 1pt solid;}
code , code a {font-size: 8pt; font-family: APLFont, monospace;}
code.header {
    font-size: 8pt;
    font-family: APLFont, monospace;
    margin: 7pt 3pt 0 10pt;
    padding:0;
    display: block;
}
div.code-block {
    border: 1pt silver dashed;
    background-color: #F2F2F2;
    display: block;
    margin: 4pt 4pt 4pt 4pt;
    padding: 4pt;
}
div.code-block code {display: block; white-space: pre-wrap; margin:0; padding:0; word-wrap: break-word;}
.emphasize { font-weight: 800;}
a {text-decoration: none;color: black;}
ul li, ol li {margin: 8pt 3pt;}
.no-print {display:none;}
.align-right {text-align: right;}
#footer hr {margin-top:1.5em;}
#footer p {margin-top:5pt; padding-top:0; font-size: 6pt;}
@font-face {
        font-family: "APLFont";
    src:
        local("APL385 Unicode"),
        url("https://misc.aplteam.com/apl385.ttf") format("truetype");
}
.info {border: 1px silver dashed; background-color: #F2F2F2;margin: 8px; padding: 8px;}
}
</style>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.11.2/b-2.0.0/b-print-2.0.0/fh-3.1.9/r-2.2.9/datatables.min.css"/>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.11.2/b-2.0.0/b-print-2.0.0/fh-3.1.9/r-2.2.9/datatables.min.js"></script>
</head>
<body>
<h1 id="top">Coverage Report</h1>
<p>Watched: 350 fns/opr within <code>#</code></p>
<p>The test suite was executed once:</p>
<table>
<thead>
<tr><th>Executed at</th><th>APLVersion</th><th>Memory (MB)</th></tr>
</thead>
<tbody>
<tr><td>2024-06-05 11:19:20</td><td>Windows-64 ⋄ 19.0.49376.0 ⋄ W ⋄ Development ⋄ Unicode</td><td>113</td></tr>
</tbody>
</table>
<p>Overall 1% of the testable code is covered.</p>
<p>(Comment lines, empty lines, all <code>:End</code>* lines etc. are ignored)</p>
<p>37 of the fns/opr are 100% covered.</p>
<div id="partly-covered" class="keep-together">
<table id="percent">
<thead>
<tr><th style="text-align:left;">Function/Operator</th><th style="text-align:left;">Lines not executed</th><th style="text-align:left;">Coverage</th><th style="text-align:right;">≢</th></tr>
</thead>
<tbody>
<tr class="uncovered"><td><a href="#listing_1" title="Link to listing">#.CodeCoverage.r</a></td><td>8←≢1-7,9</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_2" title="Link to listing">#.CodeCoverage.CodeCoverage.get_data</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_3" title="Link to listing">#.CodeCoverage.CodeCoverage.set_ignore</a></td><td>6←≢1-2,4,6-8</td><td>0</td><td>6</td></tr>
<tr class="uncovered"><td><a href="#listing_4" title="Link to listing">#.CodeCoverage.CodeCoverage.get_ignore</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_5" title="Link to listing">#.CodeCoverage.CodeCoverage.set_watch</a></td><td>8←≢1-7,10</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_6" title="Link to listing">#.CodeCoverage.CodeCoverage.get_watch</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_7" title="Link to listing">#.CodeCoverage.CodeCoverage.set_filename</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_8" title="Link to listing">#.CodeCoverage.CodeCoverage.get_filename</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_9" title="Link to listing">#.CodeCoverage.CodeCoverage.Version</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_10" title="Link to listing">#.CodeCoverage.CodeCoverage.make1</a></td><td>10←≢4-8,10-14</td><td>0</td><td>10</td></tr>
<tr class="uncovered"><td><a href="#listing_11" title="Link to listing">#.CodeCoverage.CodeCoverage.Close</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_12" title="Link to listing">#.CodeCoverage.CodeCoverage.DeleteFiles</a></td><td>13←≢7-14,16-17,19-21</td><td>0</td><td>13</td></tr>
<tr class="uncovered"><td><a href="#listing_13" title="Link to listing">#.CodeCoverage.CodeCoverage.ProcessDataAndCreateReport</a></td><td>5←≢16-20</td><td>0</td><td>5</td></tr>
<tr class="uncovered"><td><a href="#listing_14" title="Link to listing">#.CodeCoverage.CodeCoverage.CreateReport</a></td><td>82←≢6-25,27-33,35-36,38-42,44,46-56,58-75,77,79,81-87,90-98</td><td>0</td><td>82</td></tr>
<tr class="uncovered"><td><a href="#listing_15" title="Link to listing">#.CodeCoverage.CodeCoverage.AddJavaScript</a></td><td>43←≢1-10,12-44</td><td>0</td><td>43</td></tr>
<tr class="uncovered"><td><a href="#listing_16" title="Link to listing">#.CodeCoverage.CodeCoverage.AddJavaScriptButton</a></td><td>15←≢1-15</td><td>0</td><td>15</td></tr>
<tr class="uncovered"><td><a href="#listing_17" title="Link to listing">#.CodeCoverage.CodeCoverage.ProcessData</a></td><td>19←≢5-21,23,25</td><td>0</td><td>19</td></tr>
<tr class="uncovered"><td><a href="#listing_18" title="Link to listing">#.CodeCoverage.CodeCoverage.Finalise</a></td><td>92←≢10-25,27-30,33-36,38,41-43,48-51,54,57-58,60-67,69-72,74-75,80-82,84-91,93-123,125</td><td>0</td><td>92</td></tr>
<tr class="uncovered"><td><a href="#listing_19" title="Link to listing">#.CodeCoverage.CodeCoverage.CreateListingForFnsAndOpr</a></td><td>37←≢1-9,11-12,14-17,19-20,22,25-31,33-39,41-43,46-47</td><td>0</td><td>37</td></tr>
<tr class="uncovered"><td><a href="#listing_20" title="Link to listing">#.CodeCoverage.CodeCoverage.GetScreenCss</a></td><td>52←≢1-52</td><td>0</td><td>52</td></tr>
<tr class="uncovered"><td><a href="#listing_21" title="Link to listing">#.CodeCoverage.CodeCoverage.GetPrintCss</a></td><td>60←≢1-60</td><td>0</td><td>60</td></tr>
<tr class="uncovered"><td><a href="#listing_22" title="Link to listing">#.CodeCoverage.CodeCoverage.CollectDataForCoverageReport</a></td><td>16←≢2-6,8-15,18-20</td><td>0</td><td>16</td></tr>
<tr class="uncovered"><td><a href="#listing_23" title="Link to listing">#.CodeCoverage.CodeCoverage.NamesInScript</a></td><td>31←≢7-29,31-33,35-37,39-40</td><td>0</td><td>31</td></tr>
<tr class="uncovered"><td><a href="#listing_24" title="Link to listing">#.CodeCoverage.CodeCoverage.GeterAndSetterNames</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_25" title="Link to listing">#.CodeCoverage.CodeCoverage.RemoveToBeIgnored</a></td><td>4←≢5-8</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_26" title="Link to listing">#.CodeCoverage.CodeCoverage.FormatDateTime</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_27" title="Link to listing">#.CodeCoverage.CodeCoverage.CollectInformation</a></td><td>4←≢2-5</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_28" title="Link to listing">#.CodeCoverage.CodeCoverage.ExchangeHtmlSpecialChars</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_29" title="Link to listing">#.CodeCoverage.CodeCoverage.CompareCR</a></td><td>12←≢5-8,10-16,20</td><td>0</td><td>12</td></tr>
<tr class="uncovered"><td><a href="#listing_30" title="Link to listing">#.CodeCoverage.CodeCoverage.IsFile</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_31" title="Link to listing">#.CodeCoverage.Admin.Make</a></td><td>12←≢1-12</td><td>0</td><td>12</td></tr>
<tr class="uncovered"><td><a href="#listing_32" title="Link to listing">#.CodeCoverage.TatinVars.ASSETS</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_33" title="Link to listing">#.CodeCoverage.TatinVars.CONFIG</a></td><td>22←≢1-22</td><td>0</td><td>22</td></tr>
<tr class="uncovered"><td><a href="#listing_34" title="Link to listing">#.CodeCoverage.TatinVars.DEPENDENCIES</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_35" title="Link to listing">#.CodeCoverage.TatinVars.GetFullPath2AssetsFolder</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_36" title="Link to listing">#.CodeCoverage.TatinVars.HOME</a></td><td>9←≢2-10</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_37" title="Link to listing">#.CodeCoverage.TatinVars.ID</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_38" title="Link to listing">#.CodeCoverage.TatinVars.URI</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_39" title="Link to listing">#.CodeCoverage.TestCases.Initial</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_40" title="Link to listing">#.CodeCoverage.TestCases.Prepare</a></td><td>18←≢6-17,20,23,25-26,28-29</td><td>0</td><td>18</td></tr>
<tr class="uncovered"><td><a href="#listing_41" title="Link to listing">#.CodeCoverage.TestCases.RunTests</a></td><td>9←≢5-13</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_42" title="Link to listing">#.CodeCoverage.TestCases.RunTestsInBatchMode</a></td><td>5, 6, 7</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_43" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_001</a></td><td>26←≢2-3,5-11,13-19,22-23,26-28,30,32-35</td><td>0</td><td>26</td></tr>
<tr class="uncovered"><td><a href="#listing_44" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_002</a></td><td>23←≢2-3,5-11,13-19,22-23,27,29-32</td><td>0</td><td>23</td></tr>
<tr class="uncovered"><td><a href="#listing_45" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_003</a></td><td>24←≢2-3,5-12,14-20,23-24,28,30-33</td><td>0</td><td>24</td></tr>
<tr class="uncovered"><td><a href="#listing_46" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_004</a></td><td>13←≢2-3,5-11,13,15-17</td><td>0</td><td>13</td></tr>
<tr class="uncovered"><td><a href="#listing_47" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_005</a></td><td>17←≢2,4,6-9,11-17,19,21-23</td><td>0</td><td>17</td></tr>
<tr class="uncovered"><td><a href="#listing_48" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_006</a></td><td>20←≢2,4,6-9,11-20,22,24-26</td><td>0</td><td>20</td></tr>
<tr class="uncovered"><td><a href="#listing_49" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_007</a></td><td>19←≢2,4,6-11,13-19,21,23-25</td><td>0</td><td>19</td></tr>
<tr class="uncovered"><td><a href="#listing_50" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_008</a></td><td>19←≢2,4,6-9,11-19,21,23-25</td><td>0</td><td>19</td></tr>
<tr class="uncovered"><td><a href="#listing_51" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_009</a></td><td>13←≢2-3,5-10,12,14-17</td><td>0</td><td>13</td></tr>
<tr class="uncovered"><td><a href="#listing_52" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_010</a></td><td>23←≢2,4,6,8-9,11-12,14-21,23-26,28,30-32</td><td>0</td><td>23</td></tr>
<tr class="uncovered"><td><a href="#listing_53" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_011</a></td><td>20←≢2,4,6,8-10,12-15,17-19,21-23,25,27-29</td><td>0</td><td>20</td></tr>
<tr class="uncovered"><td><a href="#listing_54" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_021</a></td><td>23←≢2,4,6-7,9-10,12-13,15,17-19,21-27,29,31-33</td><td>0</td><td>23</td></tr>
<tr class="uncovered"><td><a href="#listing_55" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_031</a></td><td>19←≢2,4,6-7,9-10,12-13,15-21,23,25-27</td><td>0</td><td>19</td></tr>
<tr class="uncovered"><td><a href="#listing_56" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_032</a></td><td>17←≢2,4,6-8,10-17,19,21-23</td><td>0</td><td>17</td></tr>
<tr class="uncovered"><td><a href="#listing_57" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_033</a></td><td>17←≢2,4,6-8,10-18,20,22-23</td><td>0</td><td>17</td></tr>
<tr class="uncovered"><td><a href="#listing_58" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_040</a></td><td>18←≢2,4,6-7,9-11,13,15-21,23,25-26</td><td>0</td><td>18</td></tr>
<tr class="uncovered"><td><a href="#listing_59" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_041</a></td><td>20←≢2-3,5-14,16-19,21,23-25</td><td>0</td><td>20</td></tr>
<tr class="uncovered"><td><a href="#listing_60" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_051</a></td><td>19←≢2-3,5-14,16-17,19,21-24</td><td>0</td><td>19</td></tr>
<tr class="uncovered"><td><a href="#listing_61" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_061</a></td><td>15←≢2-3,5-13,15,17-19</td><td>0</td><td>15</td></tr>
<tr class="uncovered"><td><a href="#listing_62" title="Link to listing">#.CodeCoverage.TestCases.∆GetLinesFromFnsOpr</a></td><td>7←≢4-10</td><td>0</td><td>7</td></tr>
<tr class="uncovered"><td><a href="#listing_63" title="Link to listing">#.CodeCoverage.TestCases.∆GetLinesFromScrips</a></td><td>10←≢1-10</td><td>0</td><td>10</td></tr>
<tr class="uncovered"><td><a href="#listing_64" title="Link to listing">#.CodeCoverage.TestCases.ClassWithField.Hello</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_65" title="Link to listing">#.CodeCoverage.TestCases.Data.Prepare</a></td><td>1, 2</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_66" title="Link to listing">#.CodeCoverage.TestCases.Data.Test_001</a></td><td>7←≢2-3,5-6,8-9,11</td><td>0</td><td>7</td></tr>
<tr class="uncovered"><td><a href="#listing_67" title="Link to listing">#.CodeCoverage.TestCases.Data.Test_002</a></td><td>10←≢2-3,5-11,13</td><td>0</td><td>10</td></tr>
<tr class="uncovered"><td><a href="#listing_68" title="Link to listing">#.CodeCoverage.TestCases.Data.Test_003</a></td><td>4←≢2-3,5,7</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_69" title="Link to listing">#.CodeCoverage.TestCases.Data.∆FnsOpr_001</a></td><td>7←≢2-5,7-9</td><td>0</td><td>7</td></tr>
<tr class="uncovered"><td><a href="#listing_70" title="Link to listing">#.CodeCoverage.TestCases.Data.∆FnsOpr_002</a></td><td>4←≢2-5</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_71" title="Link to listing">#.CodeCoverage.TestCases.Data.∆FnsOpr_003</a></td><td>6←≢2-6,8</td><td>0</td><td>6</td></tr>
<tr class="uncovered"><td><a href="#listing_72" title="Link to listing">#.CodeCoverage.TestCases.Data.∆FnsOpr_004</a></td><td>7←≢2-5,7-9</td><td>0</td><td>7</td></tr>
<tr class="uncovered"><td><a href="#listing_73" title="Link to listing">#.CodeCoverage.TestCases.Data.∆FnsOpr_005</a></td><td>4←≢2-5</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_74" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script1.Run</a></td><td>5←≢3-7</td><td>0</td><td>5</td></tr>
<tr class="uncovered"><td><a href="#listing_75" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script1.Hello</a></td><td>2, 3, 5</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_76" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script2.Run</a></td><td>5←≢2-6</td><td>0</td><td>5</td></tr>
<tr class="uncovered"><td><a href="#listing_77" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script2.Hello</a></td><td>2, 3, 5</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_78" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script2.Hello2</a></td><td>2, 3, 5</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_79" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script3.Run</a></td><td>2, 3</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_80" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script4.Run</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_81" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script5.make</a></td><td>3</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_82" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script5.Hello1</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_83" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script5.Hello2</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_84" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Version</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_85" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Lowercase</a></td><td>4, 5</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_86" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Uppercase</a></td><td>4</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_87" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IsChar</a></td><td>3</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_88" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.ToNum</a></td><td>4←≢4-6,8</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_89" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IsScripted</a></td><td>3</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_90" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.LazyMatch</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_91" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Assert</a></td><td>5←≢8-12</td><td>0</td><td>5</td></tr>
<tr class="uncovered"><td><a href="#listing_92" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IsDevelopment</a></td><td>3, 4</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_93" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.SplitPath</a></td><td>5←≢6-8,10-11</td><td>0</td><td>5</td></tr>
<tr class="uncovered"><td><a href="#listing_94" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Split</a></td><td>7, 8, 9</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_95" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Last</a></td><td>5←≢9-13</td><td>0</td><td>5</td></tr>
<tr class="uncovered"><td><a href="#listing_96" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.DMB</a></td><td>7←≢3-9</td><td>0</td><td>7</td></tr>
<tr class="uncovered"><td><a href="#listing_97" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.DLB</a></td><td>8←≢3-10</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_98" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.DTB</a></td><td>8←≢3-10</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_99" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.GoToWebPage</a></td><td>50←≢19-25,27-28,30-32,34-37,39,42,45-49,51-54,56,58-61,64-69,71,74,76-79,81,84,86-88,90</td><td>0</td><td>50</td></tr>
<tr class="uncovered"><td><a href="#listing_100" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IsRunningAsAdmin</a></td><td>4←≢3-5,8</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_101" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.GetOperatingSystem</a></td><td>4</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_102" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Create_UUID</a></td><td>3, 4</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_103" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Base64</a></td><td>9←≢9-13,15,17-18,20</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_104" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.AtLeastVersion</a></td><td>7, 8, 9</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_105" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.FormatDateTime</a></td><td>31←≢14-17,20,23-24,26-31,33-35,38-39,41,43-47,49,51-54,56-57</td><td>0</td><td>31</td></tr>
<tr class="uncovered"><td><a href="#listing_106" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.BitsToInt</a></td><td>3</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_107" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IntToBits</a></td><td>3</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_108" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.ASSETS</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_109" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.CONFIG</a></td><td>24←≢1-24</td><td>0</td><td>24</td></tr>
<tr class="uncovered"><td><a href="#listing_110" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.DEPENDENCIES</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_111" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.GetFullPath2AssetsFolder</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_112" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.HOME</a></td><td>9←≢2-10</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_113" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.ID</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_114" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.URI</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_115" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.get_data</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_116" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.set_ignore</a></td><td>6←≢1-2,4,6-8</td><td>0</td><td>6</td></tr>
<tr class="uncovered"><td><a href="#listing_117" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.get_ignore</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_118" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.set_watch</a></td><td>8←≢1-7,10</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_119" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.get_watch</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_120" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.set_filename</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_121" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.get_filename</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_122" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Version</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_123" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.make1</a></td><td>10←≢4-8,10-14</td><td>0</td><td>10</td></tr>
<tr class="uncovered"><td><a href="#listing_124" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Close</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_125" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.DeleteFiles</a></td><td>13←≢7-14,16-17,19-21</td><td>0</td><td>13</td></tr>
<tr class="uncovered"><td><a href="#listing_126" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.ProcessDataAndCreateReport</a></td><td>5←≢16-20</td><td>0</td><td>5</td></tr>
<tr class="uncovered"><td><a href="#listing_127" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CreateReport</a></td><td>82←≢6-25,27-33,35-36,38-42,44,46-56,58-75,77,79,81-87,90-98</td><td>0</td><td>82</td></tr>
<tr class="uncovered"><td><a href="#listing_128" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.AddJavaScript</a></td><td>43←≢1-10,12-44</td><td>0</td><td>43</td></tr>
<tr class="uncovered"><td><a href="#listing_129" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.AddJavaScriptButton</a></td><td>15←≢1-15</td><td>0</td><td>15</td></tr>
<tr class="uncovered"><td><a href="#listing_130" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.ProcessData</a></td><td>19←≢5-21,23,25</td><td>0</td><td>19</td></tr>
<tr class="uncovered"><td><a href="#listing_131" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Finalise</a></td><td>92←≢10-25,27-30,33-36,38,41-43,48-51,54,57-58,60-67,69-72,74-75,80-82,84-91,93-123,125</td><td>0</td><td>92</td></tr>
<tr class="uncovered"><td><a href="#listing_132" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Start</a></td><td>4←≢3-6</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_133" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Stop</a></td><td>6←≢3-8</td><td>0</td><td>6</td></tr>
<tr class="uncovered"><td><a href="#listing_134" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CreateListingForFnsAndOpr</a></td><td>37←≢1-9,11-12,14-17,19-20,22,25-31,33-39,41-43,46-47</td><td>0</td><td>37</td></tr>
<tr class="uncovered"><td><a href="#listing_135" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.GetScreenCss</a></td><td>52←≢1-52</td><td>0</td><td>52</td></tr>
<tr class="uncovered"><td><a href="#listing_136" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.GetPrintCss</a></td><td>60←≢1-60</td><td>0</td><td>60</td></tr>
<tr class="uncovered"><td><a href="#listing_137" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CollectDataForCoverageReport</a></td><td>16←≢2-6,8-15,18-20</td><td>0</td><td>16</td></tr>
<tr class="uncovered"><td><a href="#listing_138" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.NamesInScript</a></td><td>31←≢7-29,31-33,35-37,39-40</td><td>0</td><td>31</td></tr>
<tr class="uncovered"><td><a href="#listing_139" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.GeterAndSetterNames</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_140" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.RemoveToBeIgnored</a></td><td>4←≢5-8</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_141" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.FormatDateTime</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_142" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CollectInformation</a></td><td>4←≢2-5</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_143" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.ExchangeHtmlSpecialChars</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_144" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CompareCR</a></td><td>12←≢5-8,10-16,20</td><td>0</td><td>12</td></tr>
<tr class="uncovered"><td><a href="#listing_145" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.IsFile</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_146" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.ASSETS</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_147" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.CONFIG</a></td><td>24←≢1-24</td><td>0</td><td>24</td></tr>
<tr class="uncovered"><td><a href="#listing_148" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.DEPENDENCIES</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_149" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.GetFullPath2AssetsFolder</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_150" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.HOME</a></td><td>9←≢2-10</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_151" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.ID</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_152" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.URI</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_153" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.AskForNumber</a></td><td>43←≢9-13,15-29,31-33,36-37,40-44,46,48-51,53-58,60,63</td><td>0</td><td>43</td></tr>
<tr class="uncovered"><td><a href="#listing_154" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.AskForText</a></td><td>45←≢12-15,17-18,20-23,25-37,39-41,44-45,48-49,51-55,57-60,63-65,67,70,72</td><td>0</td><td>45</td></tr>
<tr class="uncovered"><td><a href="#listing_155" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.Cleanup</a></td><td>5←≢1-5</td><td>0</td><td>5</td></tr>
<tr class="uncovered"><td><a href="#listing_156" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.Copyright</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_157" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.ErrNo</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_158" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.Help</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_159" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.LF</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_160" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.Pause</a></td><td>24←≢8-15,18-22,26-28,30-33,35-38</td><td>0</td><td>24</td></tr>
<tr class="uncovered"><td><a href="#listing_161" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.Public</a></td><td>8←≢1-8</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_162" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.Select</a></td><td>74←≢13-28,30-31,33,35-53,55,58,62-68,71-80,82-87,90-91,94-100,104-105</td><td>0</td><td>74</td></tr>
<tr class="uncovered"><td><a href="#listing_163" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.Version</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_164" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.YesOrNo</a></td><td>67←≢11-15,17-22,24-37,39-43,45-46,50,52-54,56-57,59,62-63,65-66,68,70-84,87-89,91-94,97</td><td>0</td><td>67</td></tr>
<tr class="uncovered"><td><a href="#listing_165" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.TatinVars.ASSETS</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_166" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.TatinVars.CONFIG</a></td><td>24←≢1-24</td><td>0</td><td>24</td></tr>
<tr class="uncovered"><td><a href="#listing_167" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.TatinVars.DEPENDENCIES</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_168" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.TatinVars.GetFullPath2AssetsFolder</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_169" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.TatinVars.HOME</a></td><td>9←≢2-10</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_170" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.TatinVars.ID</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_171" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.TatinVars.URI</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_172" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_IniFilename</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_173" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_Default</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_174" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_Default</a></td><td>1, 2</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_175" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_OldStyleFlag</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_176" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_EstablishedAt</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_177" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_Changed</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_178" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Version</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_179" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.GetSections</a></td><td>3</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_180" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.GetIniFiles</a></td><td>7←≢11-17</td><td>0</td><td>7</td></tr>
<tr class="uncovered"><td><a href="#listing_181" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Import</a></td><td>23←≢1-15,17,19-24,26</td><td>0</td><td>23</td></tr>
<tr class="uncovered"><td><a href="#listing_182" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.make0</a></td><td>4, 5</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_183" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.make1</a></td><td>4, 5</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_184" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.make2</a></td><td>4←≢13-16</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_185" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Init</a></td><td>6←≢1-6</td><td>0</td><td>6</td></tr>
<tr class="uncovered"><td><a href="#listing_186" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Create</a></td><td>27←≢2-11,13,16-17,19,21-23,25-29,31-34,37</td><td>0</td><td>27</td></tr>
<tr class="uncovered"><td><a href="#listing_187" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.ProcessSections</a></td><td>17←≢1-8,10-11,13-18,20</td><td>0</td><td>17</td></tr>
<tr class="uncovered"><td><a href="#listing_188" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.EstablishValuesInSection</a></td><td>35←≢1-6,8-14,16,19-22,24,28-29,31,34-35,38-44,46-48,50</td><td>0</td><td>35</td></tr>
<tr class="uncovered"><td><a href="#listing_189" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Convert</a></td><td>38←≢11-17,19,21-30,32,35-53</td><td>0</td><td>38</td></tr>
<tr class="uncovered"><td><a href="#listing_190" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Get_</a></td><td>43←≢2-3,5,7-10,12-17,19-21,23,26-27,29-31,34-37,39-44,46-47,49,53,56,60-65</td><td>0</td><td>43</td></tr>
<tr class="uncovered"><td><a href="#listing_191" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Get</a></td><td>19, 20, 22</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_192" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Put</a></td><td>13, 14</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_193" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Put_</a></td><td>23←≢1-3,5,7-11,13,15-17,19-20,22,25-28,30,32-33</td><td>0</td><td>23</td></tr>
<tr class="uncovered"><td><a href="#listing_194" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Delete</a></td><td>28←≢28-37,41-47,51-54,56,59-61,63-65</td><td>0</td><td>28</td></tr>
<tr class="uncovered"><td><a href="#listing_195" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Exist</a></td><td>17←≢31-35,37-39,41-43,48-49,51-53,55</td><td>0</td><td>17</td></tr>
<tr class="uncovered"><td><a href="#listing_196" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.AddSection</a></td><td>8←≢5-12</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_197" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.HasInifileChanged</a></td><td>4, 5</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_198" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Save</a></td><td>51←≢7-9,11-13,15-18,20-26,28,31,34-39,41-42,44-48,50-51,54-55,57,59-61,63,67-75,78</td><td>0</td><td>51</td></tr>
<tr class="uncovered"><td><a href="#listing_199" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.DeleteDefault</a></td><td>4, 5</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_200" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Help</a></td><td>11←≢2-12</td><td>0</td><td>11</td></tr>
<tr class="uncovered"><td><a href="#listing_201" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.CheckExtension</a></td><td>2, 3</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_202" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles._SECTIONS</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_203" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.ReplaceCurlies</a></td><td>20←≢2-15,17,20,22-23,25,27</td><td>0</td><td>20</td></tr>
<tr class="uncovered"><td><a href="#listing_204" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.GetLocals</a></td><td>31←≢3-18,20-21,23-25,27,30-34,36,40-42</td><td>0</td><td>31</td></tr>
<tr class="uncovered"><td><a href="#listing_205" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.CheckValues</a></td><td>41←≢9-18,20-24,26-31,33-42,44,47-48,50-52,55-58</td><td>0</td><td>41</td></tr>
<tr class="uncovered"><td><a href="#listing_206" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.MergeImport</a></td><td>15←≢1-8,10-13,15,18-19</td><td>0</td><td>15</td></tr>
<tr class="uncovered"><td><a href="#listing_207" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.ExchangeDoubleCourlies</a></td><td>5, 6, 7</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_208" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.EvaluateINIs</a></td><td>20←≢1-4,6-9,11-21,23</td><td>0</td><td>20</td></tr>
<tr class="uncovered"><td><a href="#listing_209" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.CallCreate</a></td><td>6←≢1-3,5-6,8</td><td>0</td><td>6</td></tr>
<tr class="uncovered"><td><a href="#listing_210" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.GetComputerName</a></td><td>1, 2, 4</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_211" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Timestamp2Float</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_212" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.ASSETS</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_213" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.CONFIG</a></td><td>24←≢1-24</td><td>0</td><td>24</td></tr>
<tr class="uncovered"><td><a href="#listing_214" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.DEPENDENCIES</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_215" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.GetFullPath2AssetsFolder</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_216" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.HOME</a></td><td>9←≢2-10</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_217" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.ID</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_218" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.URI</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_219" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_1</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_220" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_2</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_221" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_2</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_222" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_3</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_223" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_3</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_224" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_4</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_225" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_4</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_226" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_5</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_227" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_5</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_228" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_6</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_229" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_6</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_230" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_7</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_231" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_7</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_232" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_8</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_233" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_8</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_234" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_9</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_235" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_9</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_236" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_codeCoverage</a></td><td>4←≢1-3,5</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_237" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_codeCoverage</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_238" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_IniFolder</a></td><td>7←≢1-6,8</td><td>0</td><td>7</td></tr>
<tr class="uncovered"><td><a href="#listing_239" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_IniFolder</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_240" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_exec_before_each_test</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_241" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_exec_before_each_test</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_242" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_exec_after_each_test</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_243" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_exec_after_each_test</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_244" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_INI</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_245" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.Version</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_246" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.History</a></td><td>17</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_247" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.make1</a></td><td>15←≢5-18,20</td><td>0</td><td>15</td></tr>
<tr class="uncovered"><td><a href="#listing_248" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.Cleanup</a></td><td>3</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_249" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.Run</a></td><td>10←≢10-19</td><td>0</td><td>10</td></tr>
<tr class="uncovered"><td><a href="#listing_250" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunGUI</a></td><td>8←≢8-14,16</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_251" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunThese</a></td><td>8←≢19-26</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_252" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunBatchTests</a></td><td>10←≢13-22</td><td>0</td><td>10</td></tr>
<tr class="uncovered"><td><a href="#listing_253" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.Help</a></td><td>2</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_254" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.CreateParms</a></td><td>8←≢18-25</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_255" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.Run__</a></td><td>73←≢9-15,17-22,24-26,28-33,35-38,40,42-45,47-50,52,55-65,67-71,73-78,80-81,83-84,86-88,90,93-98,100</td><td>0</td><td>73</td></tr>
<tr class="uncovered"><td><a href="#listing_256" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.CloseGUI</a></td><td>6←≢5-10</td><td>0</td><td>6</td></tr>
<tr class="uncovered"><td><a href="#listing_257" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.Getref2Gui</a></td><td>4←≢3-6</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_258" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessIniFiles</a></td><td>23←≢1-6,8,10-11,13,15-19,21,23-28,30</td><td>0</td><td>23</td></tr>
<tr class="uncovered"><td><a href="#listing_259" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ExecuteInitial</a></td><td>34←≢1-6,8,10-13,15-19,22,25-27,29-33,36,40,42-43,45-47,51,53</td><td>0</td><td>34</td></tr>
<tr class="uncovered"><td><a href="#listing_260" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessGroupAndTestCaseNumbers</a></td><td>32←≢1-6,8-11,14-16,18,20,23-25,27-28,30-34,37-40,44-46</td><td>0</td><td>32</td></tr>
<tr class="uncovered"><td><a href="#listing_261" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessGroup</a></td><td>26←≢3-10,12-14,16-22,24,28-32,34,37</td><td>0</td><td>26</td></tr>
<tr class="uncovered"><td><a href="#listing_262" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessTestCases</a></td><td>84←≢1-8,10-11,13-17,19-30,32-37,39-42,44-46,49-52,54-58,60,62-68,70-72,75-77,79-87,90-98,100-102</td><td>0</td><td>84</td></tr>
<tr class="uncovered"><td><a href="#listing_263" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ReportTestResults</a></td><td>18←≢1-15,19,21-22</td><td>0</td><td>18</td></tr>
<tr class="uncovered"><td><a href="#listing_264" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ExecuteCleanup</a></td><td>12←≢1-5,7,9-11,13,16,18</td><td>0</td><td>12</td></tr>
<tr class="uncovered"><td><a href="#listing_265" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.QuitTests</a></td><td>4, 5</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_266" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ShowLog</a></td><td>30←≢7-13,15-16,18,22-25,27-29,31,33,35-36,38,40-46,48</td><td>0</td><td>30</td></tr>
<tr class="uncovered"><td><a href="#listing_267" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.CreateGui</a></td><td>107←≢1-13,15-16,18,20-21,23-29,31-37,39-47,49-57,59-66,68,70-74,76-81,83-87,89-99,101-107,109-122</td><td>0</td><td>107</td></tr>
<tr class="uncovered"><td><a href="#listing_268" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.OnContextMenuInGrid</a></td><td>20←≢2-20,22</td><td>0</td><td>20</td></tr>
<tr class="uncovered"><td><a href="#listing_269" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.OnClose</a></td><td>4←≢4-7</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_270" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.OnKeyPress</a></td><td>8←≢2-3,5-6,8-11</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_271" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.AddToGui</a></td><td>20←≢1-15,17-21</td><td>0</td><td>20</td></tr>
<tr class="uncovered"><td><a href="#listing_272" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessGuiEvents</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_273" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.FailsIf</a></td><td>3</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_274" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.PassesIf</a></td><td>9←≢3-10,13</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_275" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.GoToTidyUp</a></td><td>9←≢4-8,10-13</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_276" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.EditTestFunctions</a></td><td>14←≢8-12,14,16-17,19-21,23,26-27</td><td>0</td><td>14</td></tr>
<tr class="uncovered"><td><a href="#listing_277" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListTestFunctions</a></td><td>38←≢8-12,14-15,18-20,22-28,30-31,33-35,37-48,50-53</td><td>0</td><td>38</td></tr>
<tr class="uncovered"><td><a href="#listing_278" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListGroups</a></td><td>4←≢5-8</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_279" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListSymbolicNames</a></td><td>9←≢4-11,13</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_280" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.GetSymbolicName</a></td><td>6←≢6-10,12</td><td>0</td><td>6</td></tr>
<tr class="uncovered"><td><a href="#listing_281" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.AtLeastVersion</a></td><td>5, 6, 8</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_282" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.RenameTestFnsTo</a></td><td>65←≢17-23,25-26,28-29,31-34,36-39,41,43,45,47-49,51-58,60,63-72,74,77-86,88,91-92,94-95,97,99-102</td><td>0</td><td>65</td></tr>
<tr class="uncovered"><td><a href="#listing_283" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.GetTestTemplate</a></td><td>21←≢5-12,14-15,17-20,23,26-29,31,34</td><td>0</td><td>21</td></tr>
<tr class="uncovered"><td><a href="#listing_284" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.EstablishHelpers</a></td><td>16←≢6-9,11-22</td><td>0</td><td>16</td></tr>
<tr class="uncovered"><td><a href="#listing_285" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.Test_000</a></td><td>7←≢3-4,8-10,12,14</td><td>0</td><td>7</td></tr>
<tr class="uncovered"><td><a href="#listing_286" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.CheckCustomDef</a></td><td>8←≢1-3,5-9</td><td>0</td><td>8</td></tr>
<tr class="uncovered"><td><a href="#listing_287" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListCustomMessages</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_288" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListCustomNumbers</a></td><td>1, 2</td><td>0</td><td>2</td></tr>
<tr class="uncovered"><td><a href="#listing_289" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ReportInactiveToGUI</a></td><td>11←≢5-15</td><td>0</td><td>11</td></tr>
<tr class="uncovered"><td><a href="#listing_290" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.NotifyAcreAndLinkAndDeleteOldVersion</a></td><td>16←≢1-4,6,8-10,13-19,23</td><td>0</td><td>16</td></tr>
<tr class="uncovered"><td><a href="#listing_291" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.HandleInitialize</a></td><td>35←≢1-10,12,14-17,19-20,22-27,29,31-34,36-38,40-43</td><td>0</td><td>35</td></tr>
<tr class="uncovered"><td><a href="#listing_292" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.HandleCleanup</a></td><td>12←≢1-7,9,11-13,15</td><td>0</td><td>12</td></tr>
<tr class="uncovered"><td><a href="#listing_293" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.YesOrNo</a></td><td>1, 2, 4</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_294" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ReportLineNumber</a></td><td>1, 2, 3</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_295" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.CR</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_296" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.CRLF</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_297" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.Prepare</a></td><td>18←≢6-17,20,23,25-28</td><td>0</td><td>18</td></tr>
<tr class="uncovered"><td><a href="#listing_298" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunTests</a></td><td>9←≢5-13</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_299" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunTestsInBatchMode</a></td><td>5, 6, 7</td><td>0</td><td>3</td></tr>
<tr class="uncovered"><td><a href="#listing_300" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.TatinVars.ASSETS</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_301" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.TatinVars.CONFIG</a></td><td>24←≢1-24</td><td>0</td><td>24</td></tr>
<tr class="uncovered"><td><a href="#listing_302" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.TatinVars.DEPENDENCIES</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_303" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.TatinVars.GetFullPath2AssetsFolder</a></td><td>4←≢1-4</td><td>0</td><td>4</td></tr>
<tr class="uncovered"><td><a href="#listing_304" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.TatinVars.HOME</a></td><td>9←≢2-10</td><td>0</td><td>9</td></tr>
<tr class="uncovered"><td><a href="#listing_305" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.TatinVars.ID</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr class="uncovered"><td><a href="#listing_306" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.TatinVars.URI</a></td><td>1</td><td>0</td><td>1</td></tr>
<tr><td><a href="#listing_307" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_020</a></td><td>21←≢7,9-10,12-14,16,18-27,29,31-33</td><td>13</td><td>24</td></tr>
<tr><td><a href="#listing_308" title="Link to listing">#.CodeCoverage.TestCases.Test_Misc_030</a></td><td>16←≢7,9-10,12-14,16,18-23,25,27-28</td><td>16</td><td>19</td></tr>
<tr><td><a href="#listing_309" title="Link to listing">#.CodeCoverage.CodeCoverage.Start</a></td><td>3, 4, 5</td><td>25</td><td>4</td></tr>
<tr><td><a href="#listing_310" title="Link to listing">#.CodeCoverage.CodeCoverage.Stop</a></td><td>4←≢5-8</td><td>33</td><td>6</td></tr>
<tr><td><a href="#listing_311" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.ExecuteTestFunction</a></td><td>14←≢1-3,5-6,10,13-14,16-17,23-24,26-27</td><td>33</td><td>21</td></tr>
<tr><td><a href="#listing_312" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.HandleStops</a></td><td>2, 3, 4</td><td>40</td><td>5</td></tr>
<tr><td><a href="#listing_313" title="Link to listing">#.CodeCoverage.TestCases.Test_ZZZ_998</a></td><td>12</td><td>95</td><td>21</td></tr>
<tr class="fullyCovered"><td><a href="#listing_314" title="Link to listing">#.CodeCoverage.CodeCoverage.set_data</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_315" title="Link to listing">#.CodeCoverage.CodeCoverage.History</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_316" title="Link to listing">#.CodeCoverage.CodeCoverage.htmlFile</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_317" title="Link to listing">#.CodeCoverage.CodeCoverage.verbose</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_318" title="Link to listing">#.CodeCoverage.TestCases.Assert</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_319" title="Link to listing">#.CodeCoverage.TestCases.Data.∆Script2.myDfns2</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_320" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.History</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_321" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.x</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_322" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.msg</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_323" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.sep</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_324" title="Link to listing">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.type</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_325" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.set_data</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_326" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.History</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_327" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.htmlFile</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_328" title="Link to listing">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.verbose</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_329" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.Assert</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_330" title="Link to listing">#._tatin.aplteam_CommTools_1_7_1.ReplaceCRbyLF</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_331" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_IniFilename</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_332" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_OldStyleFlag</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_333" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_EstablishedAt</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_334" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_Changed</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_335" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_keyed default data</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_336" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_keyed default data</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_337" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.History</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_338" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.type</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_339" title="Link to listing">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.extension</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_340" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_1</a></td><td></td><td>100</td><td>1</td></tr>
<tr class="fullyCovered"><td><a href="#listing_341" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_INI</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_342" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.FindSpecialString</a></td><td></td><td>100</td><td>4</td></tr>
<tr class="fullyCovered"><td><a href="#listing_343" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.stopFlag</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_344" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2._parms</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_345" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.type</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_346" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.label</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_347" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.x</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_348" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.target</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_349" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.groupName</a></td><td></td><td>100</td><td>0</td></tr>
<tr class="fullyCovered"><td><a href="#listing_350" title="Link to listing">#._tatin.aplteam_Tester2_3_7_0.Tester2.force</a></td><td></td><td>100</td><td>0</td></tr>
</tbody>
</table>
</div>
<script>
$(document).ready(function() {
    var oTable;
    oTable = $("#percent").DataTable( {
        paging:   false,
        ordering: true,
        info:     true,
        fixedHeader: true,
        order: [2,"asc"],
        dom: "Bft",
        drawCallback: function( settings ) {
             var api = this.api();
             $('.header[id^="listing_"]').next().addBack().css("display","none");
             api.rows( {page:"current"} ).data().each(function(data){
              id = data[0];
              id = id.match(/"(\#.*?)"/);
              if (id){$(id[1]).next().addBack().css("display","block");}
             })
        },      
        buttons: [
        {
            text: "Partly covered (7)",
            titleAttr: "50%",
            className: "active",
            action: function ( e, dt, node, config ) {
                var text = this.text();
                var search = "^(?!(0%|100%)).*";
                oTable.column(2)
                    .search(search,true,false,false)
                    .draw();
                $(".dt-buttons button").removeClass("active");
                this.active( true );
            }
        },
        {
            text: "Uncovered (306)",
            titleAttr: "0%",
            className: "active",
            action: function ( e, dt, node, config ) {
                var text = this.text();
                var search = "^0%";
                oTable.column(2)
                    .search(search,true,false,false)
                    .draw();
                $(".dt-buttons button").removeClass("active");
                this.active( true );
            }
        },
        {
            text: "Fully covered (37)",
            titleAttr: "100%",
            className: "active",
            action: function ( e, dt, node, config ) {
                var text = this.text();
                var search = "100%";
                oTable.column(2)
                    .search(search,true,false,false)
                    .draw();
                $(".dt-buttons button").removeClass("active");
                this.active( true );
            }
        },
        {
            text: "All (350)",
            titleAttr: "all",
            className: "active",
            action: function ( e, dt, node, config ) {
                var text = this.text();
                var search = ".";
                oTable.column(2)
                    .search(search,true,false,false)
                    .draw();
                $(".dt-buttons button").removeClass("active");
                this.active( true );
            }
        },
    ],
 
        columnDefs: [
            {className: "align-right", targets: [2,3]
            },
            {
                render: function ( data, type, row, meta ) {
                            return data+"%" ;        
                        },
                targets: 2
            }
        ]             
    } );
    oTable.button(0).trigger();

} );    
</script>
<h2>Listings</h2>
<code class="header" id="listing_1">#.CodeCoverage.r &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r</code>
<code class="emphasize">→[1]   T←⎕NEW Tester2 TestCases</code>
<code class="emphasize">→[2]   T.custom_1←'Not ready yet'</code>
<code class="emphasize">→[3]   T.CloseGUI</code>
<code class="emphasize">→[4]   ps←T.CreateParms ⍬</code>
<code class="emphasize">→[5]   ps.debugFlag←1</code>
<code class="emphasize">→[6]   ps.trapFlag←0</code>
<code class="emphasize">→[7]   ps.guiFlag←1</code>
<code> [8]  ⍝ps.testCaseNos←'Helpers'</code>
<code class="emphasize">→[9]   T.Run__ ps</code>
<code> [10] ⍝Done</code>
</div>
<code class="header" id="listing_2">#.CodeCoverage.CodeCoverage.get_data &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_data</code>
<code class="emphasize">→[1]  r←_data</code>
</div>
<code class="header" id="listing_3">#.CodeCoverage.CodeCoverage.set_ignore &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_ignore value</code>
<code class="emphasize">→[1]  :If 0=noOf←+/∧\1=≡¨value.NewValue</code>
<code class="emphasize">→[2]      v←∊value.NewValue</code>
<code> [3]  :Else</code>
<code class="emphasize">→[4]      v←(⊃{⍺,',',⍵}/noOf↑value.NewValue),noOf↓value.NewValue</code>
<code> [5]  :EndIf</code>
<code class="emphasize">→[6]  'Must be character vector'⎕SIGNAL 11/⍨' '≠1↑0⍴v</code>
<code class="emphasize">→[7]  ('Has invalid characters',b/v)⎕SIGNAL 11/⍨∨/b←~v∊APL_Chars,',⎕#.'</code>
<code class="emphasize">→[8]  _ignore←v</code>
</div>
<code class="header" id="listing_4">#.CodeCoverage.CodeCoverage.get_ignore &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_ignore</code>
<code class="emphasize">→[1]  r←','(≠⊆⊢),_ignore</code>
</div>
<code class="header" id="listing_5">#.CodeCoverage.CodeCoverage.set_watch &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  set_watch value</code>
<code class="emphasize">→[1]   v←∊value.NewValue</code>
<code class="emphasize">→[2]   'Must be character vector'⎕SIGNAL 11/⍨' '≠1↑0⍴v</code>
<code class="emphasize">→[3]   ('Has invalid characters',b/v)⎕SIGNAL 11/⍨∨/b←~v∊APL_Chars,',⎕#.'</code>
<code class="emphasize">→[4]   v2←','(≠⊆⊢),v</code>
<code class="emphasize">→[5]   :If ~∧/v2∊,¨'#' '⎕SE'</code>
<code class="emphasize">→[6]       :If ∨/~b←0&lt;⎕NC↑v2</code>
<code class="emphasize">→[7]           11 ⎕SIGNAL⍨'Unknown names: ',⊃{⍺,',',⍵}/(~b)/v2</code>
<code> [8]       :EndIf</code>
<code> [9]   :EndIf</code>
<code class="emphasize">→[10]  _watch←v2</code>
</div>
<code class="header" id="listing_6">#.CodeCoverage.CodeCoverage.get_watch &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_watch</code>
<code class="emphasize">→[1]  r←_watch</code>
</div>
<code class="header" id="listing_7">#.CodeCoverage.CodeCoverage.set_filename &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_filename value</code>
<code class="emphasize">→[1]  v←value.NewValue</code>
<code class="emphasize">→[2]  'Invalid depth'⎕SIGNAL 11/⍨~(≡v)∊0 1</code>
<code class="emphasize">→[3]  'Must be a character vector'⎕SIGNAL 11/⍨' '≠1↑0⍴∊v</code>
<code class="emphasize">→[4]  _filename←⊃,/2↑⎕NPARTS v</code>
</div>
<code class="header" id="listing_8">#.CodeCoverage.CodeCoverage.get_filename &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_filename</code>
<code class="emphasize">→[1]  r←_filename</code>
</div>
<code class="header" id="listing_9">#.CodeCoverage.CodeCoverage.Version &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Version</code>
<code> [1]  :Access Public Shared</code>
<code class="emphasize">→[2]  r←'CodeCoverage' '0.10.7+52' '2024-06-05'</code>
</div>
<code class="header" id="listing_10">#.CodeCoverage.CodeCoverage.make1 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  make1(watch_)</code>
<code> [1]   :Access Public Instance</code>
<code> [2]   :Implements Constructor</code>
<code> [3]   :Access Public</code>
<code class="emphasize">→[4]   _ignore←''</code>
<code class="emphasize">→[5]   :If ~(⊃watch_)∊'#⎕'</code>
<code class="emphasize">→[6]   :AndIf 0&lt;≢1↓⎕RSI</code>
<code class="emphasize">→[7]   :AndIf 0&lt;(⊃1↓⎕RSI).⎕NC watch_</code>
<code class="emphasize">→[8]       watch_←(⊃1↓⎕NSI),'.',watch_</code>
<code> [9]   :EndIf</code>
<code class="emphasize">→[10]  ⎕SIGNAL/{0∧.≠⍵:''⍬ ⋄ ('Not found: ',watch_)6}⎕NC watch_</code>
<code class="emphasize">→[11]  watch←'⎕se'⎕R'⎕SE'⍠('IC' 1)⊣watch_</code>
<code class="emphasize">→[12]  _filename←(739⌶0),'/CodeCoverage-',' '~⍨⍕⎕TS</code>
<code class="emphasize">→[13]  _data←0 2⍴''</code>
<code class="emphasize">→[14]  ∆STOPPED←0</code>
</div>
<code class="header" id="listing_11">#.CodeCoverage.CodeCoverage.Close &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Close</code>
<code> [1]  :Implements destructor</code>
<code class="emphasize">→[2]  ⎕PROFILE'clear'</code>
</div>
<code class="header" id="listing_12">#.CodeCoverage.CodeCoverage.DeleteFiles &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←{htmlFile}DeleteFiles filename</code>
<code> [1]      ⍝ Delete both files created by `CodeCoverage` with the extensions `.profile` and `.cr`.\\</code>
<code> [2]      ⍝ `filename` must be a single filename with path but without extension.\\</code>
<code> [3]      ⍝ `htmlFile` defaults to 0, meaning that `filename` with an extension `.html` will not be deleted.</code>
<code> [4]      ⍝ By specifying a 1 as left argument you can enforce it to be deleted.\\</code>
<code> [5]      ⍝ `R` is an integer with the number of files deleted.</code>
<code> [6]   :Access Public Shared</code>
<code class="emphasize">→[7]   'Right argument must be a simple character vector'Assert(≡filename)∊0 1</code>
<code class="emphasize">→[8]   'Right argument must be a simple character vector'Assert' '=1↑0⍴filename</code>
<code class="emphasize">→[9]   'You MUST not specify a file extension'Assert~'.'∊3⊃⎕NPARTS filename</code>
<code class="emphasize">→[10]  r←0</code>
<code class="emphasize">→[11]  htmlFile←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'htmlFile'</code>
<code class="emphasize">→[12]  'The optional left argument must be 0 (default) or 1'Assert(⊂htmlFile)∊0 1</code>
<code class="emphasize">→[13]  :If IsFile filename,'.profile'</code>
<code class="emphasize">→[14]      r+←⎕NDELETE filename,'.profile'</code>
<code> [15]  :EndIf</code>
<code class="emphasize">→[16]  :If IsFile filename,'.cr'</code>
<code class="emphasize">→[17]      r+←⎕NDELETE filename,'.cr'</code>
<code> [18]  :EndIf</code>
<code class="emphasize">→[19]  :If htmlFile</code>
<code class="emphasize">→[20]  :AndIf IsFile filename,'.html'</code>
<code class="emphasize">→[21]      r+←⎕NDELETE filename,'.html'</code>
<code> [22]  :EndIf</code>
</div>
<code class="header" id="listing_13">#.CodeCoverage.CodeCoverage.ProcessDataAndCreateReport &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  htmlFilename←{verbose}ProcessDataAndCreateReport filename</code>
<code> [1]       ⍝ Takes the name of a component file created by first instantiating `CodeCoverage` and then calling</code>
<code> [2]       ⍝ the instance methods `Start`, `Stop` and `Finalise`.\\</code>
<code> [3]       ⍝ The components containing the `⎕PROFILE` data (11 and running) are then read, aggregated, massaged and</code>
<code> [4]       ⍝ finally stored in the tenth component.\\</code>
<code> [5]       ⍝ A report is then generated from the aggregated data and saved on disk.</code>
<code> [6]       ⍝ `filename` is used for both, identifying the DCF file and the HTML, only the extensions are different.\\</code>
<code> [7]       ⍝ The optional left argument `verbose` defaults to 0, which means that the code of the functions and operators</code>
<code> [8]       ⍝ that are only partially covered will to be listed.\\</code>
<code> [9]       ⍝ However, by specifying a 1 as left argument you can force the canonical representations of these functions</code>
<code> [10]      ⍝ and operators to become part of the report with any lines that were not executed highlighted.\\</code>
<code> [11]      ⍝ Note that this function can be called more than once on the same component file. It just wastes some resources</code>
<code> [12]      ⍝ calculating the result again, which is not necessary. However, as long as the number of functions and operators</code>
<code> [13]      ⍝ is not very large that does not matter much. If it does matter then call `ProcessData` and `CreateReport` instead:</code>
<code> [14]      ⍝ that is all this function does anyway.</code>
<code> [15]  :Access Public Shared</code>
<code class="emphasize">→[16]  dcfFilename←(⊃,/2↑⎕NPARTS filename),'.profile'</code>
<code class="emphasize">→[17]  'File not found'⎕SIGNAL 11/⍨0=⎕NEXISTS dcfFilename</code>
<code class="emphasize">→[18]  verbose←{0=⎕NC ⍵:0 ⋄ ⍎⍵}'verbose'</code>
<code class="emphasize">→[19]  {}ProcessData dcfFilename</code>
<code class="emphasize">→[20]  htmlFilename←verbose CreateReport filename</code>
</div>
<code class="header" id="listing_14">#.CodeCoverage.CodeCoverage.CreateReport &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  filename←{verbose}CreateReport filename</code>
<code> [1]      ⍝ This function creates an HTML file containing a coverage report from the data collected during the execution of an application.\\</code>
<code> [2]      ⍝ You must call `ProcessData` first: this function relies on the data being aggregated.\\</code>
<code> [3]      ⍝ If the file extension of `filename` is not ".html" this will be enforced.\\</code>
<code> [4]      ⍝ The optional ⍺ (`verbose`) defaults to 0, meaning that no code listings are part of the report.</code>
<code> [5]   :Access Public Shared</code>
<code class="emphasize">→[6]   dcfFilename←(⊃,/2↑⎕NPARTS filename),'.profile'</code>
<code class="emphasize">→[7]   'File not found'⎕SIGNAL 11/⍨0=⎕NEXISTS dcfFilename</code>
<code class="emphasize">→[8]   tno←dcfFilename ⎕FSTIE 0</code>
<code class="emphasize">→[9]   watched←⎕FREAD tno,2</code>
<code class="emphasize">→[10]  data←⎕FREAD tno 10</code>
<code class="emphasize">→[11]  watch←⎕FREAD tno 2</code>
<code class="emphasize">→[12]  ignore←⎕FREAD tno 3</code>
<code class="emphasize">→[13]  runs←⎕FREAD tno 4</code>
<code class="emphasize">→[14]  ⎕FUNTIE tno</code>
<code class="emphasize">→[15]  verbose←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'verbose'</code>
<code class="emphasize">→[16]  html←''</code>
<code class="emphasize">→[17]  html,←⊂'&lt;!DOCTYPE html&gt;'</code>
<code class="emphasize">→[18]  html,←⊂'&lt;html lang="en"&gt;'</code>
<code class="emphasize">→[19]  html,←⊂'&lt;head&gt;'</code>
<code class="emphasize">→[20]  html,←⊂'&lt;title&gt;Coverage&lt;/title&gt;'</code>
<code class="emphasize">→[21]  html,←⊂'&lt;meta charset="utf-8"/&gt;'</code>
<code class="emphasize">→[22]  html,←⊂'&lt;style&gt;'</code>
<code class="emphasize">→[23]  html,←GetScreenCss</code>
<code class="emphasize">→[24]  html,←GetPrintCss</code>
<code class="emphasize">→[25]  html,←⊂'&lt;/style&gt;'</code>
<code> [26]       ⍝ Download package with all needed components from DataTables CDN</code>
<code class="emphasize">→[27]  html,←⊂'&lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.11.2/b-2.0.0/b-print-2.0.0/fh-3.1.9/r-2.2.9/datatables.min.css"/&gt;'</code>
<code class="emphasize">→[28]  html,←⊂'&lt;script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.11.2/b-2.0.0/b-print-2.0.0/fh-3.1.9/r-2.2.9/datatables.min.js"&gt;&lt;/script&gt;'</code>
<code class="emphasize">→[29]  html,←⊂'&lt;/head&gt;'</code>
<code class="emphasize">→[30]  html,←⊂'&lt;body&gt;'</code>
<code class="emphasize">→[31]  html,←⊂'&lt;h1 id="top"&gt;Coverage Report&lt;/h1&gt;'</code>
<code class="emphasize">→[32]  :If 0&lt;≢Info</code>
<code class="emphasize">→[33]      html,←⊂'&lt;p class="info"&gt;',(ExchangeHtmlSpecialChars Info),'&lt;/p&gt;'</code>
<code> [34]  :EndIf</code>
<code class="emphasize">→[35]  :If 0=≢data</code>
<code class="emphasize">→[36]      html,←⊂'&lt;p&gt;Nothing to report at all&lt;/p&gt;'</code>
<code> [37]  :Else</code>
<code class="emphasize">→[38]      tally←≢data[;4]</code>
<code class="emphasize">→[39]      caption←⊃,/{⍺,', ',⍵}/watched</code>
<code class="emphasize">→[40]      html,←⊂'&lt;p&gt;Watched: ',(⍕tally),' fns/opr within &lt;code&gt;',caption,'&lt;/code&gt;&lt;/p&gt;'</code>
<code class="emphasize">→[41]      :If 1=≢runs</code>
<code class="emphasize">→[42]          html,←⊂'&lt;p&gt;The test suite was executed once:&lt;/p&gt;'</code>
<code> [43]      :Else</code>
<code class="emphasize">→[44]          html,←⊂'&lt;p&gt;The test suite was executed ',(⍕≢runs),' times:&lt;/p&gt;'</code>
<code> [45]      :EndIf</code>
<code class="emphasize">→[46]      html,←⊂'&lt;table&gt;'</code>
<code class="emphasize">→[47]      html,←⊂'&lt;thead&gt;'</code>
<code class="emphasize">→[48]      html,←⊂{'&lt;tr&gt;',(⊃,/{'&lt;th&gt;',⍵,'&lt;/th&gt;'}¨⍵),'&lt;/tr&gt;'}'Executed at' 'APLVersion' 'Memory (MB)'</code>
<code class="emphasize">→[49]      html,←⊂'&lt;/thead&gt;'</code>
<code class="emphasize">→[50]      html,←⊂'&lt;tbody&gt;'</code>
<code class="emphasize">→[51]      html,←{'&lt;tr&gt;',(⊃,/{'&lt;td&gt;',⍵,'&lt;/td&gt;'}¨⍵),'&lt;/tr&gt;'}¨↓runs</code>
<code class="emphasize">→[52]      html,←⊂'&lt;/tbody&gt;'</code>
<code class="emphasize">→[53]      html,←⊂'&lt;/table&gt;'</code>
<code class="emphasize">→[54]      :If 0&lt;≢∊data[;2 4]</code>
<code class="emphasize">→[55]          html,←⊂'&lt;p&gt;Overall ',(⍕⌊0.5+100×÷/+⌿≢¨data[;2 4]),'% of the testable code is covered.&lt;/p&gt;'</code>
<code class="emphasize">→[56]          html,←⊂'&lt;p&gt;(Comment lines, empty lines, all &lt;code&gt;:End&lt;/code&gt;* lines etc. are ignored)&lt;/p&gt;'</code>
<code> [57]      :EndIf</code>
<code class="emphasize">→[58]      html,←⊂'&lt;p&gt;',(⍕data[;3]+.=100),' of the fns/opr are 100% covered.&lt;/p&gt;'</code>
<code class="emphasize">→[59]      b←~data[;3]∊0 100</code>
<code class="emphasize">→[60]      data←{⍵[⍋⍵[;3];]}data</code>
<code class="emphasize">→[61]      html,←⊂'&lt;div id="partly-covered" class="keep-together"&gt;'</code>
<code class="emphasize">→[62]      html,←⊂'&lt;table id="percent"&gt;'</code>
<code class="emphasize">→[63]      html,←⊂'&lt;thead&gt;'</code>
<code class="emphasize">→[64]      align←'left' 'left' 'left' 'right'</code>
<code class="emphasize">→[65]      html,←⊂{'&lt;tr&gt;',⍵,'&lt;/tr&gt;'}⊃,/align{'&lt;th style="text-align:',⍺,';"&gt;',⍵,'&lt;/th&gt;'}¨'Function/Operator' 'Lines not executed' 'Coverage' '≢'</code>
<code class="emphasize">→[66]      html,←⊂'&lt;/thead&gt;'</code>
<code class="emphasize">→[67]      html,←⊂'&lt;tbody&gt;'</code>
<code class="emphasize">→[68]      :If 0&lt;≢buff←((≢data),3)⍴0</code>
<code class="emphasize">→[69]          data[;2]←data[;4]~¨data[;2]   ⍝ From "executed" to "not executed"</code>
<code class="emphasize">→[70]          buff[;1]←{4&gt;≢⍵:{0=≢⍵:⍵ ⋄ ⊃{⍺,', ',⍵}/⍵}⍕¨⍵ ⋄ (⍕≢⍵),'←≢',Shorten ⍵}¨data[;2]</code>
<code class="emphasize">→[71]          buff[;2]←data[;3]</code>
<code class="emphasize">→[72]          buff[;3]←⍕∘≢¨data[;4]</code>
<code class="emphasize">→[73]          :If verbose</code>
<code class="emphasize">→[74]              linkAndName←data[;1]{'&lt;a href="#listing_',⍵,'" title="Link to listing"&gt;',⍺,'&lt;/a&gt;'}∘⍕¨⍳≢data</code>
<code class="emphasize">→[75]              buff3←linkAndName{'&lt;td&gt;',⍺,'&lt;/td&gt;&lt;td&gt;',(1⊃⍵),'&lt;/td&gt;&lt;td&gt;',(⍕2⊃⍵),'&lt;/td&gt;&lt;td&gt;',(3⊃⍵),'&lt;/td&gt;'}¨↓buff</code>
<code> [76]          :Else</code>
<code class="emphasize">→[77]              buff3←data[;1]{'&lt;td&gt;',⍺,'&lt;/td&gt;&lt;td&gt;',(1⊃⍵),'&lt;/td&gt;&lt;td&gt;',(⍕2⊃⍵),'&lt;/td&gt;&lt;td&gt;',(3⊃⍵),'&lt;/td&gt;'}¨↓buff</code>
<code> [78]          :EndIf</code>
<code class="emphasize">→[79]          html,←(↓buff){'&lt;tr',({⍵=3:'' ⋄ ' class="',(⍵⊃'unc' 'fullyC'),'overed"' ⋄ }0 100⍳2⊃⍺),'&gt;',⍵,'&lt;/tr&gt;'}¨buff3</code>
<code> [80]      :EndIf</code>
<code class="emphasize">→[81]      html,←⊂'&lt;/tbody&gt;'</code>
<code class="emphasize">→[82]      html,←⊂'&lt;/table&gt;'</code>
<code class="emphasize">→[83]      html,←⊂'&lt;/div&gt;'</code>
<code class="emphasize">→[84]      html,←AddJavaScript buff</code>
<code class="emphasize">→[85]      :If verbose</code>
<code class="emphasize">→[86]          html,←⊂'&lt;h2&gt;Listings&lt;/h2&gt;'</code>
<code class="emphasize">→[87]          html,←CreateListingForFnsAndOpr data</code>
<code> [88]      :EndIf</code>
<code> [89]  :EndIf</code>
<code class="emphasize">→[90]  html,←⊂'&lt;div id="footer"&gt;'</code>
<code class="emphasize">→[91]  html,←⊂'&lt;hr&gt;'</code>
<code class="emphasize">→[92]  html,←⊂'&lt;p&gt;Created by "CodeCoverage" version ',(2⊃Version),' from ',(3⊃Version),'&lt;/p&gt;'</code>
<code class="emphasize">→[93]  html,←⊂'&lt;/div&gt;'</code>
<code class="emphasize">→[94]  html,←⊂''</code>
<code class="emphasize">→[95]  html,←⊂'&lt;/body&gt;'</code>
<code class="emphasize">→[96]  html,←⊂'&lt;/html&gt;'</code>
<code class="emphasize">→[97]  filename←(⊃,/2↑⎕NPARTS filename),'.html'</code>
<code class="emphasize">→[98]  (⊂html)⎕NPUT filename 1</code>
</div>
<code class="header" id="listing_15">#.CodeCoverage.CodeCoverage.AddJavaScript &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  html←AddJavaScript data</code>
<code class="emphasize">→[1]   html←''</code>
<code class="emphasize">→[2]   →(0=≢data)/0</code>
<code class="emphasize">→[3]   html,←⊂'&lt;script&gt;'</code>
<code class="emphasize">→[4]   html,←⊂'$(document).ready(function() {'</code>
<code class="emphasize">→[5]   html,←⊂'    var oTable;'</code>
<code class="emphasize">→[6]   html,←⊂'    oTable = $("#percent").DataTable( {'</code>
<code class="emphasize">→[7]   html,←⊂'        paging:   false,'</code>
<code class="emphasize">→[8]   html,←⊂'        ordering: true,'</code>
<code class="emphasize">→[9]   html,←⊂'        info:     true,'</code>
<code class="emphasize">→[10]  html,←⊂'        fixedHeader: true,'</code>
<code> [11] ⍝     html,←⊂'        order: [2,"desc"],'</code>
<code class="emphasize">→[12]  html,←⊂'        order: [2,"asc"],'</code>
<code class="emphasize">→[13]  html,←⊂'        dom: "Bft",'</code>
<code class="emphasize">→[14]  html,←⊂'        drawCallback: function( settings ) {'</code>
<code class="emphasize">→[15]  html,←⊂'             var api = this.api();'</code>
<code class="emphasize">→[16]  html,←⊂'             $(''.header[id^="listing_"]'').next().addBack().css("display","none");'  ⍝ hide all lines</code>
<code class="emphasize">→[17]  html,←⊂'             api.rows( {page:"current"} ).data().each(function(data){'</code>
<code class="emphasize">→[18]  html,←⊂'              id = data[0];'</code>
<code class="emphasize">→[19]  html,←⊂'              id = id.match(/"(\#.*?)"/);'</code>
<code class="emphasize">→[20]  html,←⊂'              if (id){$(id[1]).next().addBack().css("display","block");}'  ⍝ show header and following code</code>
<code class="emphasize">→[21]  html,←⊂'             })'</code>
<code class="emphasize">→[22]  html,←⊂'        },      '</code>
<code class="emphasize">→[23]  html,←⊂'        buttons: ['</code>
<code class="emphasize">→[24]  html,←AddJavaScriptButton('Partly covered' '50%'(+/~data[;2]∊0 100)'^(?!(0%|100%)).*')</code>
<code class="emphasize">→[25]  html,←AddJavaScriptButton('Uncovered' '0%'(+/data[;2]=0)'^0%')</code>
<code class="emphasize">→[26]  html,←AddJavaScriptButton('Fully covered' '100%'(+/data[;2]=100)'100%')</code>
<code class="emphasize">→[27]  html,←AddJavaScriptButton('All' 'all'(≢data)'.')</code>
<code class="emphasize">→[28]  html,←⊂'    ],'</code>
<code class="emphasize">→[29]  html,←⊂' '</code>
<code class="emphasize">→[30]  html,←⊂'        columnDefs: ['</code>
<code class="emphasize">→[31]  html,←⊂'            {className: "align-right", targets: [2,3]'</code>
<code class="emphasize">→[32]  html,←⊂'            },'</code>
<code class="emphasize">→[33]  html,←⊂'            {'</code>
<code class="emphasize">→[34]  html,←⊂'                render: function ( data, type, row, meta ) {'</code>
<code class="emphasize">→[35]  html,←⊂'                            return data+"%" ;        '</code>
<code class="emphasize">→[36]  html,←⊂'                        },'</code>
<code class="emphasize">→[37]  html,←⊂'                targets: 2'</code>
<code class="emphasize">→[38]  html,←⊂'            }'</code>
<code class="emphasize">→[39]  html,←⊂'        ]             '</code>
<code class="emphasize">→[40]  html,←⊂'    } );'</code>
<code class="emphasize">→[41]  html,←⊂'    oTable.button(0).trigger();'</code>
<code class="emphasize">→[42]  html,←⊂''</code>
<code class="emphasize">→[43]  html,←⊂'} );    '</code>
<code class="emphasize">→[44]  html,←⊂'&lt;/script&gt;'</code>
</div>
<code class="header" id="listing_16">#.CodeCoverage.CodeCoverage.AddJavaScriptButton &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  html←AddJavaScriptButton(caption percent noOf search)</code>
<code class="emphasize">→[1]   html←''</code>
<code class="emphasize">→[2]   html,←⊂'        {'</code>
<code class="emphasize">→[3]   html,←⊂'            text: "',caption,' (',(⍕noOf),')",'</code>
<code class="emphasize">→[4]   html,←⊂'            titleAttr: "',percent,'",'</code>
<code class="emphasize">→[5]   html,←⊂'            className: "active",'</code>
<code class="emphasize">→[6]   html,←⊂'            action: function ( e, dt, node, config ) {'</code>
<code class="emphasize">→[7]   html,←⊂'                var text = this.text();'</code>
<code class="emphasize">→[8]   html,←⊂'                var search = "',search,'";'</code>
<code class="emphasize">→[9]   html,←⊂'                oTable.column(2)'</code>
<code class="emphasize">→[10]  html,←⊂'                    .search(search,true,false,false)'</code>
<code class="emphasize">→[11]  html,←⊂'                    .draw();'</code>
<code class="emphasize">→[12]  html,←⊂'                $(".dt-buttons button").removeClass("active");'</code>
<code class="emphasize">→[13]  html,←⊂'                this.active( true );'</code>
<code class="emphasize">→[14]  html,←⊂'            }'</code>
<code class="emphasize">→[15]  html,←⊂'        },'</code>
</div>
<code class="header" id="listing_17">#.CodeCoverage.CodeCoverage.ProcessData &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {(details watch)}←ProcessData filename</code>
<code> [1]       ⍝ Takes the name of a component file created by calling `Start`, `Stop` and `Finalise`.\\</code>
<code> [2]       ⍝ The components are read, aggregated and massaged and finally stored in the tenth component,</code>
<code> [3]       ⍝ but the aggregated data is also returned as a shy result along with the watched data.</code>
<code> [4]   :Access Public Shared</code>
<code class="emphasize">→[5]   dcfFilename←(⊃,/2↑⎕NPARTS filename),'.profile'</code>
<code class="emphasize">→[6]   'File not found'⎕SIGNAL 11/⍨0=⎕NEXISTS dcfFilename</code>
<code class="emphasize">→[7]   tno←dcfFilename ⎕FSTIE 0</code>
<code class="emphasize">→[8]   watched←⎕FREAD tno,2</code>
<code class="emphasize">→[9]   details←watch←⍬</code>
<code class="emphasize">→[10]  :If 0&lt;≢∊data←tno{⎕FREAD ⍺,⍵}¨9↓⍳-/⌽2↑⎕FSIZE tno</code>
<code class="emphasize">→[11]      watch←⎕FREAD tno 2</code>
<code class="emphasize">→[12]      ignore←⎕FREAD tno 3</code>
<code class="emphasize">→[13]      data←⊃⍪/data</code>
<code class="emphasize">→[14]      data[;2]←(data[;2]∊¨data[;4])/¨data[;2]</code>
<code class="emphasize">→[15]      details←data[;1]{(⊃⍺)(∪⊃,/⍵)}⌸data[;2]</code>
<code class="emphasize">→[16]      where←data[;1]⍳details[;1]</code>
<code class="emphasize">→[17]      details,←data[where;3 4]</code>
<code class="emphasize">→[18]      details(RemoveToBeIgnored)←ignore</code>
<code class="emphasize">→[19]      b←details[;3]≠100</code>
<code class="emphasize">→[20]      :If ∨/b</code>
<code class="emphasize">→[21]          (b/details[;3])←100⌊⌊0.5+100×÷/≢¨b⌿details[;2 4]         ⍝ Recalculate percentage</code>
<code> [22]      :EndIf</code>
<code class="emphasize">→[23]      details ⎕FREPLACE tno 10</code>
<code> [24]  :EndIf</code>
<code class="emphasize">→[25]  ⎕FUNTIE tno</code>
</div>
<code class="header" id="listing_18">#.CodeCoverage.CodeCoverage.Finalise &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>   r←Finalise dummy</code>
<code> [1]       ⍝ Call this when all the code you want to check on has been executed`.\\</code>
<code> [2]       ⍝ It examines all functions and operators that are only partially covered, and saves the lines that</code>
<code> [3]       ⍝ were executed as well as the lines that could have been executed.\\</code>
<code> [4]       ⍝ For the latter, a number of lines are ignored, such as empty lines, comment lines and all lines</code>
<code> [5]       ⍝ that contain meaningless code (in terms of being executed), such as all `:End*` lines etc.\\</code>
<code> [6]       ⍝ Note that the collected data is appended to the DCF file associated with the instance. Therefore</code>
<code> [7]       ⍝ you can move the DCF file to another platform and re-run the code under the supervision of `CodeCoverage`</code>
<code> [8]       ⍝ again, for example.</code>
<code> [9]    :Access Public Instance</code>
<code class="emphasize">→[10]   r←⍬</code>
<code class="emphasize">→[11]   0 0⍴{Stop ⍵}⍣(~⊃∆STOPPED)⊣⍬</code>
<code class="emphasize">→[12]   _data←_data[;1]{(⊃⍺)(∪⊃,/⍵)}⌸_data[;2]</code>
<code class="emphasize">→[13]   names←CollectDataForCoverageReport _watch</code>
<code class="emphasize">→[14]   details←0 4⍴⍬</code>
<code class="emphasize">→[15]   regExPattern←'^ *:else$' '^ *:section$'                       ⍝ Lines that contain just these patterns...</code>
<code class="emphasize">→[16]   regExPattern,←'^ *:access ' '^ *:field ' '^ *:attribute'      ⍝ ... or these are to be ignored.</code>
<code class="emphasize">→[17]   regExPattern,←⊂'^ *:end[a-zA-Z]*$'                            ⍝ All sorts of :End* statements are not of interest either</code>
<code class="emphasize">→[18]   regExPattern,←⊂'^ *:implements'</code>
<code class="emphasize">→[19]   regExPattern,←⊂'^ *:signature'</code>
<code class="emphasize">→[20]   regExPattern,←⊂'^ *:section'</code>
<code class="emphasize">→[21]   filename←(⊃,/2↑⎕NPARTS _filename),'.profile'</code>
<code class="emphasize">→[22]   crF←(∊2↑⎕NPARTS filename),'.cr'                               ⍝ this file has the CRs of everything we watched</code>
<code class="emphasize">→[23]   :If crX←⎕NEXISTS crF</code>
<code class="emphasize">→[24]       crT←crF ⎕FTIE 0</code>
<code class="emphasize">→[25]       crN←⎕FREAD crT,1                                          ⍝ the list of names for which we have CRs in component 1+index</code>
<code> [26]   :Else</code>
<code class="emphasize">→[27]       crT←crF ⎕FCREATE 0</code>
<code class="emphasize">→[28]       (1 3⍴0 ¯1 0)⎕FSTAC crT                                    ⍝ Everybody everything; important for non-Windows platforms</code>
<code class="emphasize">→[29]       crN←⍬</code>
<code class="emphasize">→[30]       ⍬ ⎕FAPPEND crT</code>
<code> [31]   :EndIf</code>
<code> [32]  </code>
<code class="emphasize">→[33]   :For i :In ⍳≢names</code>
<code class="emphasize">→[34]       name←i⊃names</code>
<code class="emphasize">→[35]       :If (≢_data)≥row←_data[;1]⍳⊂name</code>
<code class="emphasize">→[36]           linesCovered←2⊃_data[row;]</code>
<code> [37]       :Else</code>
<code class="emphasize">→[38]           linesCovered←⍬</code>
<code> [39]       :EndIf</code>
<code> [40]  </code>
<code class="emphasize">→[41]       :If {~3 4∊⍨10×⍵-⌊⍵}⎕NC⊆name                               ⍝ Ignore derived functions and derived operators</code>
<code class="emphasize">→[42]       :AndIf 2≠|≡buff←180⌶name                                  ⍝ For weird staff (like function operands of an operator) we need to check</code>
<code class="emphasize">→[43]           :If 0=≢body←{⍵↓⍨-+/∧\' '=⌽⍵}¨↓buff                    ⍝ True for localized dfns</code>
<code> [44]              ⍝ ---------- TODO</code>
<code> [45]              ⍝     ∘∘∘                                               ⍝TODO⍝ We cannot get the body of that dfn with ⎕CR or 180⌶, so we need to take other measures</code>
<code> [46]              ⍝ ----------</code>
<code> [47]           :EndIf</code>
<code class="emphasize">→[48]           :If crX</code>
<code class="emphasize">→[49]               :If (⊂name)∊crN</code>
<code class="emphasize">→[50]                   :If ~body CompareCR bodyC←⎕FREAD crT,1+crN⍳⊂name</code>
<code class="emphasize">→[51]                       ⎕←'Current definition of function "',name,'" does not match the one captured earlier - do not trust the results' ⍝ ⎕SIGNAL?!</code>
<code> [52]                   :EndIf</code>
<code> [53]               :Else</code>
<code class="emphasize">→[54]                   ⎕←'Found new function "',name,'" that was not captured in previous runs - do not trust the results!'</code>
<code> [55]               :EndIf</code>
<code> [56]           :Else</code>
<code class="emphasize">→[57]               crN,←⊂name</code>
<code class="emphasize">→[58]               body ⎕FAPPEND crT</code>
<code> [59]           :EndIf</code>
<code class="emphasize">→[60]           body←'''[^'']*'''⎕R''⍠('Greedy' 0)⊣body               ⍝ Remove text</code>
<code class="emphasize">→[61]           body←'⍝.*$'⎕R''⍠('Greedy' 0)⊣body                     ⍝ Remove comments</code>
<code class="emphasize">→[62]           lines←¯1+⍳≢body</code>
<code class="emphasize">→[63]           :If '}'=⊃{⍵↓⍨+/∧\' '=⍵}⊃¯1↑body                       ⍝ Is it possibly a dfn? (⎕NC does only work on stuff that's not part of a class!)</code>
<code class="emphasize">→[64]           :AndIf ∨/(({⍵↑⍨1+-{⍵⍳'.'}⌽⍵}name),'←{')⍷1⊃body        ⍝ First line carries &lt;name&gt;←{   - then it must be a dfn</code>
<code class="emphasize">→[65]           :AndIf (,'}')≡¯1↑' '~⍨⊃¯1↑body</code>
<code class="emphasize">→[66]               (body lines)←(0=≢{⍵↓⍨⍵⍳'{'}⊃body)↓¨body lines     ⍝ Drop first line if it is nothing but &lt;name&gt;←{</code>
<code class="emphasize">→[67]               (body lines)←(-(,'}')≡' '~⍨⊃¯1↑body)↓¨body lines  ⍝ Drop last line if it is nothing but a closing "`}`</code>
<code> [68]           :Else</code>
<code class="emphasize">→[69]               (body lines)←1↓¨body lines                        ⍝ Always drop first line in case of a tfn</code>
<code class="emphasize">→[70]               bool←regExPattern∘{0=≢⍺ ⎕S 0⍠('IC' 1)('Greedy' 0)⊣⍵}¨body</code>
<code class="emphasize">→[71]               bool∧←'}'≠⊃∘{⍵↓⍨+/∧\' '=⍵}¨body                   ⍝ Get rid of closing lines of local dfns - otherwise they will be reported</code>
<code class="emphasize">→[72]               (body lines)←bool∘/¨body lines</code>
<code> [73]           :EndIf</code>
<code class="emphasize">→[74]           (body lines)←(0&lt;≢¨body~¨' ')∘/¨body lines             ⍝ Remove empty lines</code>
<code class="emphasize">→[75]           details⍪←name linesCovered(100-⌊0.5+100×(≢lines~linesCovered)÷≢lines)lines</code>
<code> [76]       :EndIf</code>
<code> [77]  </code>
<code> [78]   :EndFor</code>
<code> [79]  </code>
<code class="emphasize">→[80]   details←('.'≠⊃¨¯1↑¨details[;1])⌿details</code>
<code class="emphasize">→[81]   :If ~crX</code>
<code class="emphasize">→[82]       crN ⎕FREPLACE crT,1</code>
<code> [83]   :EndIf</code>
<code class="emphasize">→[84]   ⎕FUNTIE crT</code>
<code class="emphasize">→[85]   :If ⎕NEXISTS filename</code>
<code class="emphasize">→[86]       tno←filename ⎕FSTIE 0</code>
<code class="emphasize">→[87]       (∪watch,⎕FREAD tno 2)⎕FREPLACE tno 2</code>
<code class="emphasize">→[88]       (∪ignore,⎕FREAD tno 3)⎕FREPLACE tno 3</code>
<code class="emphasize">→[89]       (({0=≢d←⎕FREAD tno 4:0 3⍴'' ⋄ d}⍬)⍪CollectInformation ⍬)⎕FREPLACE tno 4 ⍝ Old versions might still carry an empty forth component</code>
<code class="emphasize">→[90]       details ⎕FAPPEND tno</code>
<code class="emphasize">→[91]       ⎕FUNTIE tno</code>
<code> [92]   :Else</code>
<code class="emphasize">→[93]       3 ⎕MKDIR 1⊃⎕NPARTS filename</code>
<code class="emphasize">→[94]       tno←filename ⎕FCREATE 0</code>
<code class="emphasize">→[95]       (1 3⍴0 ¯1 0)⎕FSTAC tno                                    ⍝ Everybody everything; important for non-Windows platforms</code>
<code class="emphasize">→[96]       d←''</code>
<code class="emphasize">→[97]       d,←⊂'Documentation regarding the contents of this file'</code>
<code class="emphasize">→[98]       d,←⊂(⍴1⊃d)⍴'-'</code>
<code class="emphasize">→[99]       d,←⊂'* The first component contains this documentation'</code>
<code class="emphasize">→[100]      d,←⊂'* The second one contains what has been watched; this will eventually be used to'</code>
<code class="emphasize">→[101]      d,←⊂'  compile the caption for the coverage report.'</code>
<code class="emphasize">→[102]      d,←⊂'* The third component holds the names of functions and operators to be ignored.'</code>
<code class="emphasize">→[103]      d,←⊂'* The fourth component holds a matrix with as many rows as test runs have been performed:'</code>
<code class="emphasize">→[104]      d,←⊂'  [;1] Timestamp ("YYYY-MM-DD hh:mm:ss")'</code>
<code class="emphasize">→[105]      d,←⊂'  [;2] The result of the "APLVersion" property + info about the edition'</code>
<code class="emphasize">→[106]      d,←⊂'  [;3] ⎕WA in KB'</code>
<code class="emphasize">→[107]      d,←⊂'* Components five to nine are reserved'</code>
<code class="emphasize">→[108]      d,←⊂'* The tenth one is originally empty. when "ProcessData" or "ProcessDataAndCreateReport"'</code>
<code class="emphasize">→[109]      d,←⊂'  is called the resulting data is written to this component.'</code>
<code class="emphasize">→[110]      d,←⊂'After the tenth one all components carry a matrix with n rows and 4 columns. n is'</code>
<code class="emphasize">→[111]      d,←⊂'determined by the number of fns/oprs involved. The columns:'</code>
<code class="emphasize">→[112]      d,←⊂'[;1] The name of the function or operator'</code>
<code class="emphasize">→[113]      d,←⊂'[;2] Either empty or a vector of line numbers there were *not* executed.'</code>
<code class="emphasize">→[114]      d,←⊂'     Empty in case none or all lines were executed.'</code>
<code class="emphasize">→[115]      d,←⊂'[;3] Coverage percentage.'</code>
<code class="emphasize">→[116]      d,←⊂'[;4] Total number of lines that can be expected to be tested.'</code>
<code class="emphasize">→[117]      d ⎕FAPPEND tno</code>
<code class="emphasize">→[118]      watch ⎕FAPPEND tno</code>
<code class="emphasize">→[119]      ignore ⎕FAPPEND tno</code>
<code class="emphasize">→[120]      (CollectInformation ⍬)⎕FAPPEND tno</code>
<code class="emphasize">→[121]      tno{⍵ ⎕FAPPEND ⍺}¨(9-¯1+2⊃⎕FSIZE tno)⍴⊂''                 ⍝ Fill up to the tenth component</code>
<code class="emphasize">→[122]      details ⎕FAPPEND tno</code>
<code class="emphasize">→[123]      ⎕FUNTIE tno</code>
<code> [124]  :EndIf</code>
<code class="emphasize">→[125]  r←filename</code>
<code> [126]       ⍝Done</code>
</div>
<code class="header" id="listing_19">#.CodeCoverage.CodeCoverage.CreateListingForFnsAndOpr &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  html←CreateListingForFnsAndOpr partlyCovered</code>
<code class="emphasize">→[1]   cr←⎕NS''</code>
<code class="emphasize">→[2]   html←''</code>
<code class="emphasize">→[3]   links←'&lt;a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document"&gt;&amp;#8607;&lt;/a&gt;'</code>
<code class="emphasize">→[4]   links,←'&lt;a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of ''Partly-covered''"&gt;↑&lt;/a&gt;'</code>
<code class="emphasize">→[5]   cr.filename←(⊃,/2↑⎕NPARTS filename),'.cr'             ⍝ this file has the CRs of everything we watched</code>
<code class="emphasize">→[6]   :If ⎕NEXISTS cr.filename</code>
<code class="emphasize">→[7]       cr.tno←cr.filename ⎕FTIE 0</code>
<code class="emphasize">→[8]       cr.names←⎕FREAD cr.tno,1</code>
<code class="emphasize">→[9]       ⎕←'Tied ',cr.filename,' for listings'</code>
<code> [10]  :Else</code>
<code class="emphasize">→[11]      ⎕←'Did not find file "',cr.filename,'" with CRs collected by fn "Finalize" - will try to work without it'</code>
<code class="emphasize">→[12]      cr.tno←0</code>
<code> [13]  :EndIf</code>
<code class="emphasize">→[14]  :For i :In ⍳≢partlyCovered</code>
<code class="emphasize">→[15]      (name lines percent testable)←partlyCovered[i;1 2 3 4]</code>
<code class="emphasize">→[16]      :If (cr.tno=0)∨~(⊂name)∊cr.names</code>
<code class="emphasize">→[17]          body←{⍵↓⍨-+/∧\' '=⌽⍵}¨↓180⌶name</code>
<code> [18]      :Else</code>
<code class="emphasize">→[19]          :If cr.tno∊⎕FNUMS</code>
<code class="emphasize">→[20]              body←⎕FREAD cr.tno,1+cr.names⍳⊂name</code>
<code> [21]          :Else</code>
<code class="emphasize">→[22]              body←⍬</code>
<code> [23]          :EndIf</code>
<code> [24]      :EndIf</code>
<code class="emphasize">→[25]      :If 0&lt;≢body</code>
<code class="emphasize">→[26]          body←ExchangeHtmlSpecialChars body</code>
<code class="emphasize">→[27]          (1⊃body)←{⍵↑⍨¯1+⌊/⍵⍳'⍝;'}1⊃body</code>
<code class="emphasize">→[28]          width←≢⍕≢body</code>
<code class="emphasize">→[29]          html2←((⊂(width-1)⍴' '),(width+4){⍺↑' [',(⍕⍵),']'}¨¯1↓⍳≢body),¨body,¨⊂'&lt;/code&gt;'</code>
<code class="emphasize">→[30]          :If 0&lt;≢lines</code>
<code class="emphasize">→[31]              (⊃¨html2[lines+1])←'→'   ⍝TODO⍝ Check!</code>
<code> [32]          :EndIf</code>
<code class="emphasize">→[33]          buff←(≢body)⍴⊂'&lt;code&gt;'</code>
<code class="emphasize">→[34]          buff[lines+1]←⊂'&lt;code class="emphasize"&gt;'</code>
<code class="emphasize">→[35]          html2←buff,¨html2</code>
<code class="emphasize">→[36]          (1⊃html2)←'&lt;div class="code-block"&gt;',1⊃html2</code>
<code class="emphasize">→[37]          html2,←⊂'&lt;/div&gt;'</code>
<code class="emphasize">→[38]          html2←(⊂'&lt;code class="header" id="listing_',(⍕i),'"&gt;',name,(' &amp;mdash; ',(⍕percent),'%'),links,'&lt;/code&gt;'),html2</code>
<code class="emphasize">→[39]          html,←html2</code>
<code> [40]      :Else</code>
<code class="emphasize">→[41]          html2←⊂'&lt;div class="code-block missing"&gt;Could not get canonical representation.&lt;/div&gt;'</code>
<code class="emphasize">→[42]          html2←(⊂'&lt;code class="header" id="listing_',(⍕i),'"&gt;',name,(' &amp;mdash; ',(⍕percent),'%'),links,'&lt;/code&gt;'),html2</code>
<code class="emphasize">→[43]          html,←html2</code>
<code> [44]      :EndIf</code>
<code> [45]  :EndFor</code>
<code class="emphasize">→[46]  ⎕FUNTIE cr.tno</code>
<code class="emphasize">→[47]  ⎕DL 0.1</code>
</div>
<code class="header" id="listing_20">#.CodeCoverage.CodeCoverage.GetScreenCss &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←GetScreenCss</code>
<code class="emphasize">→[1]   r←''</code>
<code class="emphasize">→[2]   r,←⊂'@media screen{'</code>
<code class="emphasize">→[3]   r,←⊂'    html {background-color: #FFFFF0;}'</code>
<code class="emphasize">→[4]   r,←⊂'body {'</code>
<code class="emphasize">→[5]   r,←⊂'    font-size: 16px;'</code>
<code class="emphasize">→[6]   r,←⊂'    font-family : Verdana, "Bitstream Vera Sans", "DejaVu Sans", Tahoma, Geneva, Arial, Sans-serif;'</code>
<code class="emphasize">→[7]   r,←⊂'    margin: 1em;'</code>
<code class="emphasize">→[8]   r,←⊂'}'</code>
<code class="emphasize">→[9]   r,←⊂'th, td {padding: 5px 10px;}'</code>
<code class="emphasize">→[10]  r,←⊂'th {text-align: left;}'</code>
<code class="emphasize">→[11]  r,←⊂'h1, h2, h3, h4, h5, h6 {color: #424242;}'</code>
<code class="emphasize">→[12]  r,←⊂'h1 {font-size: 22px;}'</code>
<code class="emphasize">→[13]  r,←⊂'h2 {font-size: 18px; margin-top: 2em; margin-bottom:0.3em;}'</code>
<code class="emphasize">→[14]  r,←⊂'tbody tr:nth-child(even) {background-color: #F0F0F0;}'</code>
<code class="emphasize">→[15]  r,←⊂'tbody tr:nth-child(odd) {background-color: #FAFAFA;}'</code>
<code class="emphasize">→[16]  r,←⊂'th {background-color: #E6E6E6;color: #424242;}'</code>
<code class="emphasize">→[17]  r,←⊂'table {border: silver 1px solid; font-size: 14px;font-family: APLFont, monospace;}'</code>
<code class="emphasize">→[18]  r,←⊂'code , code a {font-size: 14px; font-family: APLFont, monospace;}'</code>
<code class="emphasize">→[19]  r,←⊂'code.header {'</code>
<code class="emphasize">→[20]  r,←⊂'    font-size: 16px; '</code>
<code class="emphasize">→[21]  r,←⊂'    font-family: APLFont, monospace; '</code>
<code class="emphasize">→[22]  r,←⊂'    margin: 1.5em 0.5em 0 0.5em; '</code>
<code class="emphasize">→[23]  r,←⊂'    padding:0;'</code>
<code class="emphasize">→[24]  r,←⊂'    display: block;'</code>
<code class="emphasize">→[25]  r,←⊂'}'</code>
<code class="emphasize">→[26]  r,←⊂'div.code-block {'</code>
<code class="emphasize">→[27]  r,←⊂'    border: 1px silver dashed;'</code>
<code class="emphasize">→[28]  r,←⊂'    background-color: #F2F2F2;'</code>
<code class="emphasize">→[29]  r,←⊂'    display: block;'</code>
<code class="emphasize">→[30]  r,←⊂'    margin: 0.5em 0.5em 0.5em 0.5em;'</code>
<code class="emphasize">→[31]  r,←⊂'    padding: 0.5em;'</code>
<code class="emphasize">→[32]  r,←⊂'}'</code>
<code class="emphasize">→[33]  r,←⊂'div.code-block.missing {'</code>
<code class="emphasize">→[34]  r,←⊂'    background-color: #fa605254;'</code>
<code class="emphasize">→[35]  r,←⊂'}'</code>
<code class="emphasize">→[36]  r,←⊂'div.code-block code {display: block; white-space: pre-wrap; margin:0; padding:0; word-wrap: break-word;}'</code>
<code class="emphasize">→[37]  r,←⊂'.emphasize { font-weight: 800;}'</code>
<code class="emphasize">→[38]  r,←⊂'ul li, ol li {margin: 0.7em 0.2em;}'</code>
<code class="emphasize">→[39]  r,←⊂'.float-right {float:right;}'</code>
<code class="emphasize">→[40]  r,←⊂'.no-underline {    text-decoration :none;}'</code>
<code class="emphasize">→[41]  r,←⊂'.top-links {font-size:20px; padding-left: 0.6em;}'</code>
<code class="emphasize">→[42]  r,←⊂'.align-right {text-align: right;}'</code>
<code class="emphasize">→[43]  r,←⊂'#footer hr {margin-top:1.5em;}'</code>
<code class="emphasize">→[44]  r,←⊂'#footer p {margin-top:5px; padding-top:0; font-size: 9px;}'</code>
<code class="emphasize">→[45]  r,←⊂'@font-face {'</code>
<code class="emphasize">→[46]  r,←⊂'        font-family: "APLFont";'</code>
<code class="emphasize">→[47]  r,←⊂'    src:'</code>
<code class="emphasize">→[48]  r,←⊂'        local("APL385 Unicode"),'</code>
<code class="emphasize">→[49]  r,←⊂'        url("https://misc.aplteam.com/apl385.ttf") format("truetype");'</code>
<code class="emphasize">→[50]  r,←⊂'}'</code>
<code class="emphasize">→[51]  r,←⊂'.info {border: 1px silver dashed; background-color: #F2F2F2;margin: 0.5em; padding: 0.5em;}'</code>
<code class="emphasize">→[52]  r,←⊂'}'</code>
</div>
<code class="header" id="listing_21">#.CodeCoverage.CodeCoverage.GetPrintCss &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←GetPrintCss</code>
<code class="emphasize">→[1]   r←''</code>
<code class="emphasize">→[2]   r,←⊂'@media print{@page {size: portrait}'</code>
<code class="emphasize">→[3]   r,←⊂'@page {'</code>
<code class="emphasize">→[4]   r,←⊂'    margin: 1cm 1cm 1cm 1.75cm;'</code>
<code class="emphasize">→[5]   r,←⊂'    @bottom-right {'</code>
<code class="emphasize">→[6]   r,←⊂'        content: counter(page) " / " counter(pages);'</code>
<code class="emphasize">→[7]   r,←⊂'  }'</code>
<code class="emphasize">→[8]   r,←⊂'}'</code>
<code class="emphasize">→[9]   r,←⊂'body {'</code>
<code class="emphasize">→[10]  r,←⊂'    font: 12pt "Times New Roman", Times, serif;'</code>
<code class="emphasize">→[11]  r,←⊂'    line-height: 1.2;'</code>
<code class="emphasize">→[12]  r,←⊂'     /* CSS3 filter, at the moment Webkit only. Prefix it for future implementations */'</code>
<code class="emphasize">→[13]  r,←⊂'    -webkit-filter: grayscale(100%);'</code>
<code class="emphasize">→[14]  r,←⊂'    filter: grayscale(100%); /* future-proof */'</code>
<code class="emphasize">→[15]  r,←⊂'}'</code>
<code class="emphasize">→[16]  r,←⊂'h1 {font-size: 18pt;}'</code>
<code class="emphasize">→[17]  r,←⊂'h2 {font-size: 16pt; margin-top: 10pt; margin-bottom: 3pt;}'</code>
<code class="emphasize">→[18]  r,←⊂'th, td {padding: 2pt 3pt;}'</code>
<code class="emphasize">→[19]  r,←⊂'th {text-align: left;background-color: #DBDBDB;}'</code>
<code class="emphasize">→[20]  r,←⊂'tbody tr:nth-child(odd) {background-color: #EDEDED;}'</code>
<code class="emphasize">→[21]  r,←⊂'table {'</code>
<code class="emphasize">→[22]  r,←⊂'    color-adjust: exact !important;'</code>
<code class="emphasize">→[23]  r,←⊂'    -webkit-print-color-adjust: exact !important;'</code>
<code class="emphasize">→[24]  r,←⊂'    print-color-adjust: exact !important;'</code>
<code class="emphasize">→[25]  r,←⊂'    font-size: 8pt;'</code>
<code class="emphasize">→[26]  r,←⊂'    font-family: APLFont, monospace;'</code>
<code class="emphasize">→[27]  r,←⊂'}'</code>
<code class="emphasize">→[28]  r,←⊂'div.keep-together {break-inside: avoid; break-before:auto;}'</code>
<code class="emphasize">→[29]  r,←⊂'table {border: silver 1pt solid;}'</code>
<code class="emphasize">→[30]  r,←⊂'code , code a {font-size: 8pt; font-family: APLFont, monospace;}'</code>
<code class="emphasize">→[31]  r,←⊂'code.header {'</code>
<code class="emphasize">→[32]  r,←⊂'    font-size: 8pt;'</code>
<code class="emphasize">→[33]  r,←⊂'    font-family: APLFont, monospace;'</code>
<code class="emphasize">→[34]  r,←⊂'    margin: 7pt 3pt 0 10pt;'</code>
<code class="emphasize">→[35]  r,←⊂'    padding:0;'</code>
<code class="emphasize">→[36]  r,←⊂'    display: block;'</code>
<code class="emphasize">→[37]  r,←⊂'}'</code>
<code class="emphasize">→[38]  r,←⊂'div.code-block {'</code>
<code class="emphasize">→[39]  r,←⊂'    border: 1pt silver dashed;'</code>
<code class="emphasize">→[40]  r,←⊂'    background-color: #F2F2F2;'</code>
<code class="emphasize">→[41]  r,←⊂'    display: block;'</code>
<code class="emphasize">→[42]  r,←⊂'    margin: 4pt 4pt 4pt 4pt;'</code>
<code class="emphasize">→[43]  r,←⊂'    padding: 4pt;'</code>
<code class="emphasize">→[44]  r,←⊂'}'</code>
<code class="emphasize">→[45]  r,←⊂'div.code-block code {display: block; white-space: pre-wrap; margin:0; padding:0; word-wrap: break-word;}'</code>
<code class="emphasize">→[46]  r,←⊂'.emphasize { font-weight: 800;}'</code>
<code class="emphasize">→[47]  r,←⊂'a {text-decoration: none;color: black;}'</code>
<code class="emphasize">→[48]  r,←⊂'ul li, ol li {margin: 8pt 3pt;}'</code>
<code class="emphasize">→[49]  r,←⊂'.no-print {display:none;}'</code>
<code class="emphasize">→[50]  r,←⊂'.align-right {text-align: right;}'</code>
<code class="emphasize">→[51]  r,←⊂'#footer hr {margin-top:1.5em;}'</code>
<code class="emphasize">→[52]  r,←⊂'#footer p {margin-top:5pt; padding-top:0; font-size: 6pt;}'</code>
<code class="emphasize">→[53]  r,←⊂'@font-face {'</code>
<code class="emphasize">→[54]  r,←⊂'        font-family: "APLFont";'</code>
<code class="emphasize">→[55]  r,←⊂'    src:'</code>
<code class="emphasize">→[56]  r,←⊂'        local("APL385 Unicode"),'</code>
<code class="emphasize">→[57]  r,←⊂'        url("https://misc.aplteam.com/apl385.ttf") format("truetype");'</code>
<code class="emphasize">→[58]  r,←⊂'}'</code>
<code class="emphasize">→[59]  r,←⊂'.info {border: 1px silver dashed; background-color: #F2F2F2;margin: 8px; padding: 8px;}'</code>
<code class="emphasize">→[60]  r,←⊂'}'</code>
</div>
<code class="header" id="listing_22">#.CodeCoverage.CodeCoverage.CollectDataForCoverageReport &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  names←CollectDataForCoverageReport watch</code>
<code> [1]      ⍝ Determins all objects to be observed together with the number of lines.</code>
<code class="emphasize">→[2]   names←''</code>
<code class="emphasize">→[3]   :For this :In ,⊆watch</code>
<code class="emphasize">→[4]       ref←⍎this</code>
<code class="emphasize">→[5]       :If IsScripted ref</code>
<code class="emphasize">→[6]           names,←(⊂this,'.'),¨NamesInScript ref</code>
<code> [7]       :Else</code>
<code class="emphasize">→[8]           names,←(⊂this,'.'),¨' '~¨⍨↓ref.⎕NL 3 4</code>
<code class="emphasize">→[9]           :If 0&lt;≢list←ref.⎕NL 9</code>
<code class="emphasize">→[10]              list←' '~¨⍨↓list</code>
<code class="emphasize">→[11]              isScripted←IsScripted¨ref⍎¨list</code>
<code class="emphasize">→[12]              :For this2 :In isScripted/list</code>
<code class="emphasize">→[13]                  ref2←ref⍎this2</code>
<code class="emphasize">→[14]                  :If (⍕ref2)≡this,'.',this2                            ⍝ Ignore references</code>
<code class="emphasize">→[15]                      names,←(⊂this,'.',this2,'.'),¨NamesInScript ref2</code>
<code> [16]                  :EndIf</code>
<code> [17]              :EndFor</code>
<code class="emphasize">→[18]              :If 0&lt;≢list←(~isScripted)/list</code>
<code class="emphasize">→[19]              :AndIf 0&lt;≢list←({⍵≡⍕⍎⍵}¨(⊂this,'.'),¨list)/list           ⍝ Ignore references</code>
<code class="emphasize">→[20]                  names,←⊃,/CollectDataForCoverageReport¨(⊂this,'.'),¨list</code>
<code> [21]              :EndIf</code>
<code> [22]          :EndIf</code>
<code> [23]      :EndIf</code>
<code> [24]  :EndFor</code>
</div>
<code class="header" id="listing_23">#.CodeCoverage.CodeCoverage.NamesInScript &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←NamesInScript ref</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ Takes a ref pointing to a class or interface script and returns the names of all functions and operators</code>
<code> [3]      ⍝ within that script.\\</code>
<code> [4]      ⍝ Has two limitations:</code>
<code> [5]      ⍝ * Cannot handle nested classes and nested namespaces.</code>
<code> [6]      ⍝ * May well mistake a variable name for the name of a dfn.\\</code>
<code class="emphasize">→[7]   r←''</code>
<code class="emphasize">→[8]   body←⎕SRC ref</code>
<code class="emphasize">→[9]   body←'''[^'']*'''⎕R''⊣body                                     ⍝ Get rid of everything between quotes</code>
<code class="emphasize">→[10]  body←'⍝.*$'⎕R''⊣body                                           ⍝ Get rid of comments</code>
<code class="emphasize">→[11]  options←('IC' 1)('Greedy' 0)('DotAll' 1)('Mode' 'D')</code>
<code class="emphasize">→[12]  r,←options GeterAndSetterNames body                            ⍝ Extract the names of all getters and setters (if any)</code>
<code class="emphasize">→[13]  body←':Property .*:EndProperty'⎕R''⍠options⊣body               ⍝ Remove Properties (because they carry `∇`!)</code>
<code class="emphasize">→[14]  body←¯1↓1↓(~body∧.=¨' ')/body                                  ⍝ Remove first, last and all empty lines</code>
<code class="emphasize">→[15]  body←'^ {5,}∇.*$'⎕R''⊣body                                     ⍝ Remove recursive ∇ calls that stand on their own</code>
<code class="emphasize">→[16]  b←'∇'∊¨body                                                    ⍝ Which lines carry a ∇?</code>
<code class="emphasize">→[17]  ((b\{{1=≢⍵:0 ⋄ '∇'≠⊃⍵}⍵~' '}¨b/body)/body)←' '                 ⍝ Remove all other recursive ∇ calls</code>
<code class="emphasize">→[18]  body↓¨⍨←{+/∧\' '=⍵}¨body                                       ⍝ Drop all leading spaces</code>
<code class="emphasize">→[19]  b←'∇'=⊃¨body                                                   ⍝ All lines that start with a nabla</code>
<code class="emphasize">→[20]  tfns←b/body                                                    ⍝ Trad fns headers</code>
<code class="emphasize">→[21]  tfns←1↓¨tfns                                                   ⍝ Remove the nablas</code>
<code class="emphasize">→[22]  tfns←((≢tfns)⍴1 0)/tfns                                        ⍝ Remove every second line: those are the closing ones</code>
<code class="emphasize">→[23]  tfns←{'←'∊⍵:⍵↓⍨⍵⍳'←' ⋄ ⍵}¨tfns                                 ⍝ Remove all explicit results</code>
<code class="emphasize">→[24]  tfns←{'{'∊⍵:⍵↓⍨⍵⍳'}' ⋄ ⍵}¨tfns                                 ⍝ Remove optional left argument</code>
<code class="emphasize">→[25]  tfns←{⍵↓⍨+/∧\' '=⍵}¨tfns                                       ⍝ Remove all leading spaces</code>
<code class="emphasize">→[26]  tfns←{⍵/⍨~'  '⍷⍵}¨tfns                                         ⍝ Remove all multiple spaces</code>
<code class="emphasize">→[27]  tfns←{⍵↓⍨{-+/∧\' '=⍵}⌽⍵}¨tfns                                  ⍝ Remove all trailing spaces</code>
<code class="emphasize">→[28]  :If ∨/b←'('=⊃¨tfns                                             ⍝ These must be operators</code>
<code class="emphasize">→[29]      (b/tfns)←{{⍵↑⍨¯1+⍵⍳')'}⍵↓⍨⍵⍳' '}¨b/tfns                    ⍝ Extract the operator names</code>
<code> [30]  :EndIf</code>
<code class="emphasize">→[31]  tfns←'\([^)]+\)'⎕R' foo'⊣tfns                                  ⍝ Replace anything betwen () by ` foo` = impersonate a simple ⍵</code>
<code class="emphasize">→[32]  :If 0&lt;≢tfns←{2=' '+.=⍵:⍵↓⍨⍵⍳' ' ⋄ ⍵}¨tfns                      ⍝ Remove left arguments</code>
<code class="emphasize">→[33]      r,←{⍵↑⍨¯1+⌊/⍵⍳' ;'}¨tfns                                   ⍝ Name of all trad fns</code>
<code> [34]  :EndIf</code>
<code class="emphasize">→[35]  :If 0&lt;≢bodies←'∇[^∇]*∇'⎕S{⍵.Match}⍠options⊣body                ⍝ Every trad fn must be investigated for any local dfns.</code>
<code class="emphasize">→[36]  :AndIf 0&lt;≢bodies←{(⎕UCS 10)~¨⍨(~(⎕UCS 13 10)⍷⍵)⊆⍵}¨bodies      ⍝ Split them one-by-one</code>
<code class="emphasize">→[37]      r,←{0=≢⍵:⍵ ⋄ ⊃,/⍵}EstablishDfns¨bodies                     ⍝ All dfns defined within tradfns</code>
<code> [38]  :EndIf</code>
<code class="emphasize">→[39]  body←'∇[^∇]*∇'⎕R''⍠options⊣body                                ⍝ Wipe out all trad fns</code>
<code class="emphasize">→[40]  body←(0&lt;≢¨body~¨' ')/body                                      ⍝ No empty lines</code>
<code> [41]       ⍝ --- Next two lines are future stuff</code>
<code> [42]       ⍝ dfns←EstablishDfns body                                      ⍝ Extract the dfns (and dops of course)</code>
<code> [43]       ⍝ r,←∪dfns                                                     ⍝ Those might well be variable assignment, therefore ∪!</code>
</div>
<code class="header" id="listing_24">#.CodeCoverage.CodeCoverage.GeterAndSetterNames &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←options GeterAndSetterNames body</code>
<code class="emphasize">→[1]  r←''</code>
<code class="emphasize">→[2]  body←1↓⊃,/(⎕UCS 10),¨body</code>
<code class="emphasize">→[3]  :If ∨/bool←':property'⍷⎕C body</code>
<code class="emphasize">→[4]      r,←⊃,/body∘{'set_' 'get_',¨⊂(1+≢':propert')↓{⍵↑⍨¯1+⍵⍳⎕UCS 10}⍵↓⍺}¨{⍵/⍳≢⍵}bool</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_25">#.CodeCoverage.CodeCoverage.RemoveToBeIgnored &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  data←data RemoveToBeIgnored ignore</code>
<code> [1]        ⍝ `ignore` is a nested vector with nanes. In case such a name identifies any APL object it is removed.\\</code>
<code> [2]        ⍝ However, if an ordinary namespace is part of `ignore` then it won't appear in `data`.</code>
<code> [3]        ⍝ Therefore we identify container names in a second step and remove everything that belongs to such a container.</code>
<code> [4]        ⍝ That means it works recursively.</code>
<code class="emphasize">→[5]   :If 0&lt;≢ignore</code>
<code class="emphasize">→[6]   :AndIf 0&lt;≢data←(~data[;1]∊ignore)⌿data</code>
<code class="emphasize">→[7]       bool←9=⊃∘⎕NC¨ignore</code>
<code class="emphasize">→[8]       data←(⊃∧/data∘{⍵∘≢¨(≢⍵)↑¨⍺[;1]}¨((bool/ignore),¨'.'))⌿data</code>
<code> [9]   :EndIf</code>
</div>
<code class="header" id="listing_26">#.CodeCoverage.CodeCoverage.FormatDateTime &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←FormatDateTime ts</code>
<code class="emphasize">→[1]  r←⊃'YYYY-MM-DD hh:mm:ss'(1200⌶)¯1 1 ⎕DT⊂ts</code>
</div>
<code class="header" id="listing_27">#.CodeCoverage.CodeCoverage.CollectInformation &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←CollectInformation dummy</code>
<code> [1]     ⍝ Collects information about the current test run.</code>
<code class="emphasize">→[2]  ts←FormatDateTime ⎕TS</code>
<code class="emphasize">→[3]  version←⊃{⍺,' ⋄ ',⍵}/# ⎕WG'APLVersion'</code>
<code class="emphasize">→[4]  version,←' ⋄ ','Classic' 'Unicode'⊃⍨1+80=⎕DR' '</code>
<code class="emphasize">→[5]  r←1 3⍴ts version(' '~⍨,'K0G⊂ZZZ.ZZZ.ZZZ.ZZZ.ZZ9⊃'⎕FMT⌊⎕WA÷1024×1024) ⍝ MBs</code>
</div>
<code class="header" id="listing_28">#.CodeCoverage.CodeCoverage.ExchangeHtmlSpecialChars &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> txt←ExchangeHtmlSpecialChars txt</code>
<code> [1]     ⍝ &lt; =&gt; &amp;lt; ⋄ &gt; =&gt; &amp;gt; ⋄ &amp; =&gt; &amp;amp;</code>
<code class="emphasize">→[2]  txt←(,¨'&amp;&lt;&gt;')⎕R'\&amp;amp;' '\&amp;lt;' '\&amp;gt;'⊣txt</code>
</div>
<code class="header" id="listing_29">#.CodeCoverage.CodeCoverage.CompareCR &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  z←a CompareCR b</code>
<code> [1]        ⍝ compare two CRs taking into account that some symbols are replaced with ⎕Uxxxx when loaded into classic</code>
<code> [2]        ⍝ z=1: match, 0: did not match</code>
<code> [3]        ⍝--&gt; this means that the final run which creates the report must be run on a Unicode interpreter, otherwise</code>
<code> [4]        ⍝    it will crash with errors because it can't deal with these characters...</code>
<code class="emphasize">→[5]   :If {0::1 ⋄ 0⊣⎕UCS ⍵}8838  ⍝ do not even attempt to execute this on Classic!</code>
<code class="emphasize">→[6]       z←1</code>
<code class="emphasize">→[7]   :ElseIf a≠⍥≢b   ⍝ no of lines must match</code>
<code class="emphasize">→[8]       z←0</code>
<code> [9]   :Else</code>
<code class="emphasize">→[10]      args←{1=≡⍵:↓⍵ ⋄ ⍵}¨a b</code>
<code class="emphasize">→[11]      :For i :In ⍳2</code>
<code class="emphasize">→[12]          :For m :In ('(⎕u\d*)'⎕S 2⍠'IC' 1)i⊃args</code>
<code class="emphasize">→[13]              :If m≢0</code>
<code class="emphasize">→[14]                  l←(⎕IO+m)⊃i⊃args</code>
<code class="emphasize">→[15]                  l←('⎕u(\d*.)'⎕R{{(⎕UCS dec ¯1↓⍵),(' '≢⍥,¯1↑⍵)/¯1↑⍵}2↓⍵.Match}⍠'IC' 1)l</code>
<code class="emphasize">→[16]                  ((⎕IO+m)⊃i⊃args)←l</code>
<code> [17]              :EndIf</code>
<code> [18]          :EndFor</code>
<code> [19]      :EndFor</code>
<code class="emphasize">→[20]      z←≡/args</code>
<code> [21]  :EndIf</code>
</div>
<code class="header" id="listing_30">#.CodeCoverage.CodeCoverage.IsFile &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←IsFile filename</code>
<code class="emphasize">→[1]  r←0</code>
<code class="emphasize">→[2]  :Trap 22</code>
<code class="emphasize">→[3]      r←2=1 ⎕NINFO filename</code>
<code> [4]  :EndTrap</code>
</div>
<code class="header" id="listing_31">#.CodeCoverage.Admin.Make &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  Make flag</code>
<code class="emphasize">→[1]   :If flag</code>
<code class="emphasize">→[2]       M←⎕SE.MakeHelpers</code>
<code class="emphasize">→[3]       C←##.CiderConfig</code>
<code class="emphasize">→[4]       path←C.HOME,'/',C.CIDER.distributionFolder</code>
<code class="emphasize">→[5]       cfg←⎕JSON⍠('Dialect' 'JSON5')⊢⊃⎕NGET C.HOME,'/apl-package.json'</code>
<code class="emphasize">→[6]       version←M.CompileVersionNumberPattern cfg</code>
<code class="emphasize">→[7]       M.RecreateFolder path</code>
<code class="emphasize">→[8]       parms←⎕SE.Tatin.CreateBuildParms C.HOME</code>
<code class="emphasize">→[9]       parms.targetPath←path</code>
<code class="emphasize">→[10]      parms.version←version</code>
<code class="emphasize">→[11]      zipFilename←⎕SE.Tatin.BuildPackage parms</code>
<code class="emphasize">→[12]      ⎕←'*** New version build successfully:',M.CR,'   ',zipFilename</code>
<code> [13]  :EndIf</code>
<code> [14] ⍝Done</code>
</div>
<code class="header" id="listing_32">#.CodeCoverage.TatinVars.ASSETS &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ASSETS</code>
<code class="emphasize">→[1]  r←''</code>
</div>
<code class="header" id="listing_33">#.CodeCoverage.TatinVars.CONFIG &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←CONFIG</code>
<code class="emphasize">→[1]   r←'{</code>
<code class="emphasize">→[2]    api: "CodeCoverage",</code>
<code class="emphasize">→[3]    assets: "",</code>
<code class="emphasize">→[4]    description: "Monitors which parts of an application got actually executed",</code>
<code class="emphasize">→[5]    documentation: "",</code>
<code class="emphasize">→[6]    files: "",</code>
<code class="emphasize">→[7]    group: "aplteam",</code>
<code class="emphasize">→[8]    io: 1,</code>
<code class="emphasize">→[9]    license: "MIT",</code>
<code class="emphasize">→[10]   lx: "",</code>
<code class="emphasize">→[11]   maintainer: "kai@aplteam.com",</code>
<code class="emphasize">→[12]   minimumAplVersion: "18.0",</code>
<code class="emphasize">→[13]   ml: 1,</code>
<code class="emphasize">→[14]   name: "CodeCoverage",</code>
<code class="emphasize">→[15]   os_lin: 1,</code>
<code class="emphasize">→[16]   os_mac: 1,</code>
<code class="emphasize">→[17]   os_win: 1,</code>
<code class="emphasize">→[18]   project_url: "https://github.com/aplteam/CodeCoverage",</code>
<code class="emphasize">→[19]   source: "APLSource/CodeCoverage.aplc",</code>
<code class="emphasize">→[20]   tags: "code-coverage,test-framework,unit-tests",</code>
<code class="emphasize">→[21]   userCommandScript: "",</code>
<code class="emphasize">→[22]   version: "0.10.6+67",</code>
<code> [23] }'</code>
</div>
<code class="header" id="listing_34">#.CodeCoverage.TatinVars.DEPENDENCIES &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←DEPENDENCIES</code>
<code class="emphasize">→[1]  r←⍬</code>
</div>
<code class="header" id="listing_35">#.CodeCoverage.TatinVars.GetFullPath2AssetsFolder &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetFullPath2AssetsFolder</code>
<code class="emphasize">→[1]  :If 0&lt;≢r←ASSETS</code>
<code class="emphasize">→[2]  :AndIf 0&lt;≢HOME</code>
<code class="emphasize">→[3]  :AndIf ⎕NEXISTS HOME</code>
<code class="emphasize">→[4]      r←HOME,'/',ASSETS</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_36">#.CodeCoverage.TatinVars.HOME &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←HOME</code>
<code> [1]  ⍝ Returns folder package was loaded from or current directory or an empty vector if both are not valid</code>
<code class="emphasize">→[2]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[3]   r←'C:/T/Projects/APLTree/CodeCoverage'   ⍝ Original source</code>
<code class="emphasize">→[4]   :If ~⎕NEXISTS r</code>
<code class="emphasize">→[5]       (dir name extension)←⎕NPARTS r</code>
<code class="emphasize">→[6]       r←(⊃1 ⎕NPARTS''),(2⊃⎕NPARTS ¯1↓dir),'/',name,extension ⍝ Try current dir</code>
<code class="emphasize">→[7]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[8]       r←(⊃1 ⎕NPARTS''),name,extension</code>
<code class="emphasize">→[9]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[10]      r←''</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_37">#.CodeCoverage.TatinVars.ID &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ID</code>
<code class="emphasize">→[1]  r←'aplteam-CodeCoverage-0.10.6+67'</code>
</div>
<code class="header" id="listing_38">#.CodeCoverage.TatinVars.URI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←URI</code>
<code class="emphasize">→[1]  r←''</code>
</div>
<code class="header" id="listing_39">#.CodeCoverage.TestCases.Initial &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Initial</code>
<code class="emphasize">→[1]  T.custom_1←'Nested scripts are not supported'</code>
</div>
<code class="header" id="listing_40">#.CodeCoverage.TestCases.Prepare &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  Prepare</code>
<code> [1]  ⍝ Creates an instance of the class `Tester2` named `T` and configures it for</code>
<code> [2]  ⍝ Assumes that the project is handled by the project manager "Cider", and that there is</code>
<code> [3]  ⍝ a namespace ##.CiderConfig available with the Cider config parameters.</code>
<code> [4]  ⍝ As a side effect is creates a folder "TestResults" in the project's root folder if the</code>
<code> [5]  ⍝ user wants to do code coverage with the `CodeCoverage` class.</code>
<code class="emphasize">→[6]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[7]   T←⎕NEW Tester2 ⎕THIS</code>
<code class="emphasize">→[8]   testPath←##.CiderConfig.HOME,'/TestResults'</code>
<code class="emphasize">→[9]   testFilename←testPath,'/CodeCoverage'</code>
<code class="emphasize">→[10]  flag←0</code>
<code class="emphasize">→[11]  :If ⎕NEXISTS testPath</code>
<code class="emphasize">→[12]      :If ⎕NEXISTS testFilename,'.profile'</code>
<code class="emphasize">→[13]          ind←('Code Coverage' 0 1)CommTools.Select'Append' 'Replace' 'Neither'</code>
<code class="emphasize">→[14]          →(3=ind)/0</code>
<code class="emphasize">→[15]          flag←1</code>
<code class="emphasize">→[16]          :If 2=ind</code>
<code class="emphasize">→[17]              1 CodeCoverage.DeleteFiles testFilename</code>
<code> [18]          :EndIf</code>
<code> [19]      :Else</code>
<code class="emphasize">→[20]          flag←0 CommTools.YesOrNo'Code coverage?'</code>
<code> [21]      :EndIf</code>
<code> [22]  :Else</code>
<code class="emphasize">→[23]      flag←0 CommTools.YesOrNo'Code coverage?'</code>
<code> [24]  :EndIf</code>
<code class="emphasize">→[25]  :If flag</code>
<code class="emphasize">→[26]      3 ⎕MKDIR testPath  ⍝</code>
<code> [27]       ⍝TODO⍝ T.codeCoverage←⎕NEW CodeCoverage(,⊂'#.',{⍵,'.',⍵}2↓⍕⎕THIS.##)</code>
<code class="emphasize">→[28]      T.codeCoverage←⎕NEW ##.CodeCoverage(,⊂'#')</code>
<code class="emphasize">→[29]      T.codeCoverage.filename←testFilename</code>
<code> [30]  :EndIf</code>
</div>
<code class="header" id="listing_41">#.CodeCoverage.TestCases.RunTests &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  RunTests</code>
<code> [1]  ⍝ 1. Prepares the test framework</code>
<code> [2]  ⍝ 2. Runs all test cases</code>
<code> [3]  ⍝ 3. Processes the code coverage data (if collected)</code>
<code> [4]  ⍝ 4. Asks the user whether the code coverage report should be put on view</code>
<code class="emphasize">→[5]   Prepare</code>
<code class="emphasize">→[6]   T.Run 1</code>
<code class="emphasize">→[7]   :If 0&lt;≢T.codeCoverage</code>
<code class="emphasize">→[8]       {}##.CodeCoverage.ProcessData T.codeCoverage.filename</code>
<code class="emphasize">→[9]       option←'Type of code coverage report' 0 1 CommTools.Select'Overview' 'Verbose' 'None'</code>
<code class="emphasize">→[10]      :If 3&gt;option</code>
<code class="emphasize">→[11]          verbose←2=option</code>
<code class="emphasize">→[12]          htmlFilename←verbose ##.CodeCoverage.CreateReport T.codeCoverage.filename</code>
<code class="emphasize">→[13]          ⎕←']Open file://',htmlFilename</code>
<code> [14]      :EndIf</code>
<code> [15]  :EndIf</code>
</div>
<code class="header" id="listing_42">#.CodeCoverage.TestCases.RunTestsInBatchMode &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> (success log)←RunTestsInBatchMode</code>
<code> [1] ⍝ Runs all test with the batch flag on and the debug flag off.</code>
<code> [2] ⍝ Returns a two-item vector:\\</code>
<code> [3] ⍝ [1] Boolean with 1 indicating success and 0 failure\\</code>
<code> [4] ⍝ [2] A vector of character vectors with the messages</code>
<code class="emphasize">→[5]  Prepare</code>
<code class="emphasize">→[6]  (rc log)←T.RunBatchTests 0</code>
<code class="emphasize">→[7]  success←rc=0</code>
</div>
<code class="header" id="listing_43">#.CodeCoverage.TestCases.Test_Misc_001 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_001(stopFlag batchFlag)</code>
<code> [1]  ⍝ Just runs all sorts of functions and then checks the coverage results</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   Data.Prepare</code>
<code class="emphasize">→[6]   Data.T.codeCoverage.filename←(739⌶0),'/CodeCoverage_',(⊃⎕SI)</code>
<code class="emphasize">→[7]   {}Data.T.RunThese'Test_001'                  ⍝ Twice in order to force CodeCoverage...</code>
<code class="emphasize">→[8]   {}Data.T.RunThese'Test_001'                  ⍝ ... to aggregate the data</code>
<code class="emphasize">→[9]   htmlFilename←##.CodeCoverage.ProcessDataAndCreateReport Data.T.codeCoverage.filename</code>
<code class="emphasize">→[10]  tno←(Data.T.codeCoverage.filename,'.profile')⎕FTIE 0</code>
<code class="emphasize">→[11]  →T.GoToTidyUp 12≠2⊃⎕FSIZE tno                ⍝ First 9 are reserved, 10+11 hold data (we called the test suite twice!)</code>
<code> [12] </code>
<code class="emphasize">→[13]  result←⎕FREAD tno,10</code>
<code class="emphasize">→[14]  toc←↑result[;1]</code>
<code class="emphasize">→[15]  b←∨/'∆FnsOpr'⍷toc</code>
<code class="emphasize">→[16]  (toc result)←b∘⌿¨toc result</code>
<code class="emphasize">→[17]  :For row :In ⍳≢toc</code>
<code class="emphasize">→[18]      name←toc[row;]</code>
<code class="emphasize">→[19]      :If '#.CodeCoverage.TestCases.Data.∆FnsOpr_003'≡name~' '</code>
<code> [20]          ⍝TODO⍝ To be ignored for the time being because ⎕PROFILE cannot deal with names local dfns inside tfns in any meaningful way</code>
<code> [21]      :Else</code>
<code class="emphasize">→[22]          (could did)←∆GetLinesFromFnsOpr name</code>
<code class="emphasize">→[23]          →T.GoToTidyUp did could≢result[row;2 4]</code>
<code> [24]      :EndIf</code>
<code> [25]  :EndFor</code>
<code class="emphasize">→[26]  buff←⎕FREAD tno 4</code>
<code class="emphasize">→[27]  →T.GoToTidyUp 2≠⍴⍴buff</code>
<code class="emphasize">→[28]  →T.GoToTidyUp 2≠≢buff</code>
<code> [29] </code>
<code class="emphasize">→[30]  R←T._OK</code>
<code> [31] </code>
<code class="emphasize">→[32] ∆TidyUp:</code>
<code class="emphasize">→[33]  ⎕FUNTIE tno</code>
<code class="emphasize">→[34]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[35]  Data.⎕EX'T'</code>
<code> [36] ⍝Done</code>
</div>
<code class="header" id="listing_44">#.CodeCoverage.TestCases.Test_Misc_002 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_002(stopFlag batchFlag)</code>
<code> [1]  ⍝ Just runs stuff in a script and then checks the coverage results</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   Data.Prepare</code>
<code class="emphasize">→[6]   Data.T.codeCoverage.filename←(739⌶0),'/CodeCoverage_',(⊃⎕SI)</code>
<code class="emphasize">→[7]   {}Data.T.RunThese'Test_002'</code>
<code class="emphasize">→[8]   {}Data.T.RunThese'Test_002'</code>
<code class="emphasize">→[9]   htmlFilename←##.CodeCoverage.ProcessDataAndCreateReport Data.T.codeCoverage.filename</code>
<code class="emphasize">→[10]  tno←(Data.T.codeCoverage.filename,'.profile')⎕FTIE 0</code>
<code class="emphasize">→[11]  →T.GoToTidyUp 12≠2⊃⎕FSIZE tno                ⍝ First 9 are reserved, 10+11 hold data (two times!)</code>
<code> [12] </code>
<code class="emphasize">→[13]  result←⎕FREAD tno,10</code>
<code class="emphasize">→[14]  toc←↑result[;1]~¨' '</code>
<code class="emphasize">→[15]  b←∨/'∆Script1'⍷toc</code>
<code class="emphasize">→[16]  (toc result)←b∘⌿¨toc result</code>
<code class="emphasize">→[17]  :For row :In ⍳≢toc</code>
<code class="emphasize">→[18]      name←' '~⍨toc[row;]</code>
<code class="emphasize">→[19]      :If '#.CodeCoverage.TestCases.Data.∆Script1.Hello2'≡name</code>
<code> [20]          ⍝TODO⍝ To be ignored for the time being because ⎕PROFILE cannot deal with names local dfns inside tfns in any meaningful way</code>
<code> [21]      :Else</code>
<code class="emphasize">→[22]          (could did)←∆GetLinesFromScrips name</code>
<code class="emphasize">→[23]          →T.GoToTidyUp did could≢result[row;2 4]</code>
<code> [24]      :EndIf</code>
<code> [25]  :EndFor</code>
<code> [26] </code>
<code class="emphasize">→[27]  R←T._OK</code>
<code> [28] </code>
<code class="emphasize">→[29] ∆TidyUp:</code>
<code class="emphasize">→[30]  ⎕FUNTIE tno</code>
<code class="emphasize">→[31]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[32]  Data.⎕EX'T'</code>
<code> [33] ⍝Done</code>
</div>
<code class="header" id="listing_45">#.CodeCoverage.TestCases.Test_Misc_003 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_003(stopFlag batchFlag)</code>
<code> [1]  ⍝ Calls ProcessData and CreateReport rather than ProcessDataAndCreateReport</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   Data.Prepare</code>
<code class="emphasize">→[6]   Data.T.codeCoverage.filename←(739⌶0),'/CodeCoverage_',(⊃⎕SI)</code>
<code class="emphasize">→[7]   {}Data.T.RunThese'Test_002'</code>
<code class="emphasize">→[8]   {}Data.T.RunThese'Test_002'</code>
<code class="emphasize">→[9]   ##.CodeCoverage.ProcessData Data.T.codeCoverage.filename</code>
<code class="emphasize">→[10]  htmlFilename←##.CodeCoverage.CreateReport Data.T.codeCoverage.filename</code>
<code class="emphasize">→[11]  tno←(Data.T.codeCoverage.filename,'.profile')⎕FTIE 0</code>
<code class="emphasize">→[12]  →T.GoToTidyUp 12≠2⊃⎕FSIZE tno                ⍝ First 9 are reserved, 10+11 hold data (two times!)</code>
<code> [13] </code>
<code class="emphasize">→[14]  result←⎕FREAD tno,10</code>
<code class="emphasize">→[15]  toc←↑result[;1]~¨' '</code>
<code class="emphasize">→[16]  b←∨/'∆Script1'⍷toc</code>
<code class="emphasize">→[17]  (toc result)←b∘⌿¨toc result</code>
<code class="emphasize">→[18]  :For row :In ⍳≢toc</code>
<code class="emphasize">→[19]      name←' '~⍨toc[row;]</code>
<code class="emphasize">→[20]      :If '#.CodeCoverage.TestCases.Data.∆Script1.Hello2'≡name</code>
<code> [21]          ⍝TODO⍝ To be ignored for the time being because ⎕PROFILE cannot deal with names local dfns inside tfns in any meaningful way</code>
<code> [22]      :Else</code>
<code class="emphasize">→[23]          (could did)←∆GetLinesFromScrips name</code>
<code class="emphasize">→[24]          →T.GoToTidyUp did could≢result[row;2 4]</code>
<code> [25]      :EndIf</code>
<code> [26]  :EndFor</code>
<code> [27] </code>
<code class="emphasize">→[28]  R←T._OK</code>
<code> [29] </code>
<code class="emphasize">→[30] ∆TidyUp:</code>
<code class="emphasize">→[31]  ⎕FUNTIE tno</code>
<code class="emphasize">→[32]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[33]  Data.⎕EX'T'</code>
<code> [34] ⍝Done</code>
</div>
<code class="header" id="listing_46">#.CodeCoverage.TestCases.Test_Misc_004 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_004(stopFlag batchFlag)</code>
<code> [1]  ⍝ Checks on "filename" (default)</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   Data.Prepare</code>
<code class="emphasize">→[6]   {}Data.T.RunThese'Test_002'</code>
<code class="emphasize">→[7]   ##.CodeCoverage.ProcessData Data.T.codeCoverage.filename</code>
<code class="emphasize">→[8]   htmlFilename←##.CodeCoverage.CreateReport Data.T.codeCoverage.filename</code>
<code class="emphasize">→[9]   →T.GoToTidyUp~0∧.&lt;≢¨⎕NPARTS htmlFilename</code>
<code class="emphasize">→[10]  html←1⊃⎕NGET htmlFilename</code>
<code class="emphasize">→[11]  →T.GoToTidyUp 0=+/'&lt;title&gt;Coverage&lt;/title&gt;'⍷html</code>
<code> [12] </code>
<code class="emphasize">→[13]  R←T._OK</code>
<code> [14] </code>
<code class="emphasize">→[15] ∆TidyUp:</code>
<code class="emphasize">→[16]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[17]  Data.⎕EX'T'</code>
<code> [18] ⍝Done</code>
</div>
<code class="header" id="listing_47">#.CodeCoverage.TestCases.Test_Misc_005 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_005(stopFlag batchFlag)</code>
<code> [1]  ⍝ Checks what happens if nothing is reported at all</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   Data.Prepare</code>
<code class="emphasize">→[7]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[8]   'TEMP'#.⎕NS''</code>
<code class="emphasize">→[9]   #.TEMP.⎕FX'r←Hello' '⍝'</code>
<code> [10] </code>
<code class="emphasize">→[11]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code class="emphasize">→[12]  C.Start ⍬</code>
<code class="emphasize">→[13]  #.TEMP.Hello</code>
<code class="emphasize">→[14]  C.Stop ⍬</code>
<code class="emphasize">→[15]  {}C.Finalise ⍬</code>
<code class="emphasize">→[16]  →T.GoToTidyUp 1≠≢C.data</code>
<code class="emphasize">→[17]  {}##.CodeCoverage.ProcessDataAndCreateReport C.filename</code>
<code> [18] </code>
<code class="emphasize">→[19]  R←T._OK</code>
<code> [20] </code>
<code class="emphasize">→[21] ∆TidyUp:</code>
<code class="emphasize">→[22]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[23]  Data.⎕EX'T'</code>
<code> [24] ⍝Done</code>
</div>
<code class="header" id="listing_48">#.CodeCoverage.TestCases.Test_Misc_006 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_006(stopFlag batchFlag)</code>
<code> [1]  ⍝ Checks what happens if a single line got executed</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   Data.Prepare</code>
<code class="emphasize">→[7]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[8]   'TEMP'#.⎕NS''</code>
<code class="emphasize">→[9]   #.TEMP.⎕FX'r←Hello' 'r←''Hello world''' '→0' 'a←1'</code>
<code> [10] </code>
<code class="emphasize">→[11]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code class="emphasize">→[12]  C.Start ⍬</code>
<code class="emphasize">→[13]  {}#.TEMP.Hello</code>
<code class="emphasize">→[14]  C.Stop ⍬</code>
<code class="emphasize">→[15]  {}C.Finalise ⍬</code>
<code class="emphasize">→[16]  →T.GoToTidyUp 1≠≢C.data</code>
<code class="emphasize">→[17]  {}1 ##.CodeCoverage.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[18]  html←⊃⎕NGET C.filename,'.html'</code>
<code class="emphasize">→[19]  →T.GoToTidyUp 0=+/'&gt;→[3] '⍷html</code>
<code class="emphasize">→[20]  →T.GoToTidyUp 1≠≢'&gt;→\[[0-9]+] '⎕S 0⊣html</code>
<code> [21] </code>
<code class="emphasize">→[22]  R←T._OK</code>
<code> [23] </code>
<code class="emphasize">→[24] ∆TidyUp:</code>
<code class="emphasize">→[25]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[26]  Data.⎕EX'T'</code>
<code> [27] ⍝Done</code>
</div>
<code class="header" id="listing_49">#.CodeCoverage.TestCases.Test_Misc_007 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_007(stopFlag batchFlag)</code>
<code> [1]  ⍝ Derived functions are ignored but what's called as a side effect of calling them is reported</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   Data.Prepare</code>
<code class="emphasize">→[7]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[8]   'TEMP'#.⎕NS''</code>
<code class="emphasize">→[9]   #.TEMP.⎕FX'r←x Plus y' 'r←+/y'</code>
<code class="emphasize">→[10]  #.TEMP.⎕FX'r←Times y' 'r←×/y'</code>
<code class="emphasize">→[11]  #.TEMP.MyFunction←2∘#.TEMP.Plus∘#.TEMP.Times</code>
<code> [12] </code>
<code class="emphasize">→[13]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code class="emphasize">→[14]  C.Start ⍬</code>
<code class="emphasize">→[15]  {}#.TEMP.MyFunction 4 5</code>
<code class="emphasize">→[16]  C.Stop ⍬</code>
<code class="emphasize">→[17]  {}C.Finalise ⍬</code>
<code class="emphasize">→[18]  →T.GoToTidyUp 2≠≢C.data</code>
<code class="emphasize">→[19]  {}##.CodeCoverage.ProcessDataAndCreateReport C.filename</code>
<code> [20] </code>
<code class="emphasize">→[21]  R←T._OK</code>
<code> [22] </code>
<code class="emphasize">→[23] ∆TidyUp:</code>
<code class="emphasize">→[24]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[25]  Data.⎕EX'T'</code>
<code> [26] ⍝Done</code>
</div>
<code class="header" id="listing_50">#.CodeCoverage.TestCases.Test_Misc_008 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_008(stopFlag batchFlag)</code>
<code> [1]  ⍝ "Stop" is not called yet "Finalise" should still work fine</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   Data.Prepare</code>
<code class="emphasize">→[7]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[8]   'TEMP'#.⎕NS''</code>
<code class="emphasize">→[9]   #.TEMP.⎕FX'r←Hello' 'r←''Hello world''' '→0' 'a←1'</code>
<code> [10] </code>
<code class="emphasize">→[11]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code class="emphasize">→[12]  C.Start ⍬</code>
<code class="emphasize">→[13]  {}#.TEMP.Hello</code>
<code class="emphasize">→[14]  {}C.Finalise ⍬</code>
<code class="emphasize">→[15]  →T.GoToTidyUp 1≠≢C.data</code>
<code class="emphasize">→[16]  {}1 ##.CodeCoverage.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[17]  html←⊃⎕NGET C.filename,'.html'</code>
<code class="emphasize">→[18]  →T.GoToTidyUp 0=+/'&gt;→[3] '⍷html</code>
<code class="emphasize">→[19]  →T.GoToTidyUp 1≠≢'&gt;→\[[0-9]+] '⎕S 0⊣html</code>
<code> [20] </code>
<code class="emphasize">→[21]  R←T._OK</code>
<code> [22] </code>
<code class="emphasize">→[23] ∆TidyUp:</code>
<code class="emphasize">→[24]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[25]  Data.⎕EX'T'</code>
<code> [26] ⍝Done</code>
</div>
<code class="header" id="listing_51">#.CodeCoverage.TestCases.Test_Misc_009 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_009(stopFlag batchFlag)</code>
<code> [1]  ⍝ Runs no function at all; caused once a VALUE ERROR on ∆STOPPED</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   Data.Prepare</code>
<code class="emphasize">→[6]   Data.T.codeCoverage.filename←(739⌶0),'/CodeCoverage_',(⊃⎕SI)</code>
<code class="emphasize">→[7]   {}Data.T.RunThese'Test_DoesNotExists_001'</code>
<code class="emphasize">→[8]   htmlFilename←##.CodeCoverage.ProcessDataAndCreateReport Data.T.codeCoverage.filename</code>
<code class="emphasize">→[9]   tno←(Data.T.codeCoverage.filename,'.profile')⎕FTIE 0</code>
<code class="emphasize">→[10]  →T.GoToTidyUp 11≠2⊃⎕FSIZE tno                ⍝ First 9 are reserved, 10 holds data (we called the test suite twice!)</code>
<code> [11] </code>
<code class="emphasize">→[12]  R←T._OK</code>
<code> [13] </code>
<code class="emphasize">→[14] ∆TidyUp:</code>
<code class="emphasize">→[15]  ⎕FUNTIE tno</code>
<code class="emphasize">→[16]  1 Data.T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[17]  Data.⎕EX'T'</code>
<code> [18] ⍝Done</code>
</div>
<code class="header" id="listing_52">#.CodeCoverage.TestCases.Test_Misc_010 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_010(stopFlag batchFlag)</code>
<code> [1]  ⍝ Check on setter and getter functions</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   filename←(739⌶0),'/CodeCoverage_Tests_',⊃⎕SI</code>
<code> [7]  </code>
<code class="emphasize">→[8]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[9]   'TEMP'#.⎕NS''</code>
<code> [10] </code>
<code class="emphasize">→[11]  body←,¨':Class Foo' '_Goo←⍬' ':Property Goo' ':Access Public Shared' '∇r←get' 'r←_Goo' '→0' 'a←1' '∇' '∇set arg' '_Goo←arg.NewValue' '→0' 'a←1' '∇' ':EndProperty' ':EndClass'</code>
<code class="emphasize">→[12]  ref←#.TEMP.⎕FIX body</code>
<code> [13] </code>
<code class="emphasize">→[14]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code class="emphasize">→[15]  C.filename←filename</code>
<code class="emphasize">→[16]  C.Start ⍬</code>
<code class="emphasize">→[17]  ref.Goo←'Hello world'</code>
<code class="emphasize">→[18]  {}ref.Goo</code>
<code class="emphasize">→[19]  C.Stop ⍬</code>
<code class="emphasize">→[20]  {}C.Finalise ⍬</code>
<code class="emphasize">→[21]  →T.GoToTidyUp 2≠≢C.data</code>
<code> [22] </code>
<code class="emphasize">→[23]  {}1 ##.CodeCoverage.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[24]  html←⊃⎕NGET C.filename,'.html'</code>
<code class="emphasize">→[25]  →T.GoToTidyUp 0=+/'&gt;→[3] '⍷html</code>
<code class="emphasize">→[26]  →T.GoToTidyUp 2≠≢'&gt;→\[[0-9]+] '⎕S 0⊣html</code>
<code> [27] </code>
<code class="emphasize">→[28]  R←T._OK</code>
<code> [29] </code>
<code class="emphasize">→[30] ∆TidyUp:</code>
<code class="emphasize">→[31]  1 T.codeCoverage.DeleteFiles C.filename</code>
<code class="emphasize">→[32]  Data.⎕EX'T'</code>
<code> [33] ⍝Done</code>
</div>
<code class="header" id="listing_53">#.CodeCoverage.TestCases.Test_Misc_011 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_011(stopFlag batchFlag)</code>
<code> [1]  ⍝ Specify # as source</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   filename←(739⌶0),'/CodeCoverage_Tests_',⊃⎕SI</code>
<code> [7]  </code>
<code class="emphasize">→[8]   C←⎕NEW ##.CodeCoverage(,⊂,'#')</code>
<code class="emphasize">→[9]   C.filename←filename</code>
<code class="emphasize">→[10]  C.Start ⍬</code>
<code> [11] </code>
<code class="emphasize">→[12]  a←1</code>
<code class="emphasize">→[13]  b←2</code>
<code class="emphasize">→[14]  c←3</code>
<code class="emphasize">→[15]  d←a+b+c</code>
<code> [16] </code>
<code class="emphasize">→[17]  C.Stop ⍬</code>
<code class="emphasize">→[18]  {}C.Finalise ⍬</code>
<code class="emphasize">→[19]  →T.GoToTidyUp 3≠≢C.data</code>
<code> [20] </code>
<code class="emphasize">→[21]  {}1 ##.CodeCoverage.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[22]  html←⊃⎕NGET C.filename,'.html'</code>
<code class="emphasize">→[23]  →T.GoToTidyUp 0=+/'&gt;→[3] '⍷html</code>
<code> [24] </code>
<code class="emphasize">→[25]  R←T._OK</code>
<code> [26] </code>
<code class="emphasize">→[27] ∆TidyUp:</code>
<code class="emphasize">→[28]  ⎕NDELETE C.filename,'.html'</code>
<code class="emphasize">→[29]  Data.⎕EX'T'</code>
<code> [30] ⍝Done</code>
</div>
<code class="header" id="listing_54">#.CodeCoverage.TestCases.Test_Misc_021 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_021(stopFlag batchFlag)</code>
<code> [1]  ⍝ Spcify comma-separated list to watch</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   #.⎕SHADOW'TEMP1' ⋄ 'TEMP1'#.⎕NS''</code>
<code class="emphasize">→[7]   #.⎕SHADOW'TEMP2' ⋄ 'TEMP2'#.⎕NS''</code>
<code> [8]  </code>
<code class="emphasize">→[9]   body1←':Namespace Foo' '∇r←Hello' 'r←''Hello world''' '→0' 'a←1' '∇' ':EndNamespace'</code>
<code class="emphasize">→[10]  ref←#.TEMP1.⎕FIX body1</code>
<code> [11] </code>
<code class="emphasize">→[12]  body2←':Namespace Goo' '∇r←Hello' 'r←''Hello galaxy''' '→0' 'b←1' '∇' ':EndNamespace'</code>
<code class="emphasize">→[13]  ref←#.TEMP2.⎕FIX body2</code>
<code> [14] </code>
<code class="emphasize">→[15]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP1,#.TEMP2')</code>
<code> [16] </code>
<code class="emphasize">→[17]  C.Start ⍬</code>
<code class="emphasize">→[18]  Assert'Hello world'≡#.TEMP1.Foo.Hello</code>
<code class="emphasize">→[19]  Assert'Hello galaxy'≡#.TEMP2.Goo.Hello</code>
<code> [20] </code>
<code class="emphasize">→[21]  C.Stop ⍬</code>
<code class="emphasize">→[22]  {}C.Finalise ⍬</code>
<code class="emphasize">→[23]  →T.PassesIf 2=≢C.data</code>
<code class="emphasize">→[24]  {}1 ##.CodeCoverage.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[25]  html←⊃⎕NGET C.filename,'.html'</code>
<code class="emphasize">→[26]  →T.GoToTidyUp 0=+/'&gt;→[3] '⍷html</code>
<code class="emphasize">→[27]  →T.GoToTidyUp 2≠≢'&gt;→\[[0-9]+] '⎕S 0⊣html</code>
<code> [28] </code>
<code class="emphasize">→[29]  R←T._OK</code>
<code> [30] </code>
<code class="emphasize">→[31] ∆TidyUp:</code>
<code class="emphasize">→[32]  1 T.codeCoverage.DeleteFiles C.filename</code>
<code class="emphasize">→[33]  Data.⎕EX'T'</code>
<code> [34] ⍝Done</code>
</div>
<code class="header" id="listing_55">#.CodeCoverage.TestCases.Test_Misc_031 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_031(stopFlag batchFlag)</code>
<code> [1]  ⍝ Check on the "Info" field</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[7]   'TEMP'#.⎕NS''</code>
<code> [8]  </code>
<code class="emphasize">→[9]   body←,¨':Class Foo' '∇r←Hello' ':Access Public Shared' 'r←''Hello world''' '→0' 'r←''Hello Galaxy''' '∇' ':EndClass'</code>
<code class="emphasize">→[10]  ref←#.TEMP.⎕FIX body</code>
<code> [11] </code>
<code class="emphasize">→[12]  ##.CodeCoverage.Info←'&gt;&gt;&gt;Additonal &amp; information&lt;&lt;&lt;'</code>
<code class="emphasize">→[13]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code> [14] </code>
<code class="emphasize">→[15]  C.Start ⍬</code>
<code class="emphasize">→[16]  {}#.TEMP.Foo.Hello</code>
<code class="emphasize">→[17]  C.Stop ⍬</code>
<code class="emphasize">→[18]  {}C.Finalise ⍬</code>
<code class="emphasize">→[19]  htmlFilename←1 C.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[20]  html←⊃⎕NGET htmlFilename</code>
<code class="emphasize">→[21]  →T.GoToTidyUp~∨/'&lt;p class="info"&gt;&amp;gt;&amp;gt;&amp;gt;Additonal &amp;amp; information&amp;lt;&amp;lt;&amp;lt;&lt;/p&gt;'⍷html</code>
<code> [22] </code>
<code class="emphasize">→[23]  R←T._OK</code>
<code> [24] </code>
<code class="emphasize">→[25] ∆TidyUp:</code>
<code class="emphasize">→[26]  ##.CodeCoverage.Info←''</code>
<code class="emphasize">→[27]  1 T.codeCoverage.DeleteFiles C.filename</code>
<code> [28] ⍝Done</code>
</div>
<code class="header" id="listing_56">#.CodeCoverage.TestCases.Test_Misc_032 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_032(stopFlag batchFlag)</code>
<code> [1]  ⍝ Check on a single-line dfn</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[7]   'TEMP'#.⎕NS''</code>
<code class="emphasize">→[8]   #.TEMP.myFns←{+/⍵}</code>
<code> [9]  </code>
<code class="emphasize">→[10]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code class="emphasize">→[11]  C.Start ⍬</code>
<code class="emphasize">→[12]  {}#.TEMP.myFns⍳9</code>
<code class="emphasize">→[13]  C.Stop ⍬</code>
<code class="emphasize">→[14]  {}C.Finalise ⍬</code>
<code class="emphasize">→[15]  htmlFilename←1 C.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[16]  html←⊃⎕NGET htmlFilename</code>
<code class="emphasize">→[17]  →T.GoToTidyUp~∨/'1 of the fns/opr are 100% covered.'⍷html</code>
<code> [18] </code>
<code class="emphasize">→[19]  R←T._OK</code>
<code> [20] </code>
<code class="emphasize">→[21] ∆TidyUp:</code>
<code class="emphasize">→[22]  ##.CodeCoverage.Info←''</code>
<code class="emphasize">→[23]  1 T.codeCoverage.DeleteFiles C.filename</code>
<code> [24] ⍝Done</code>
</div>
<code class="header" id="listing_57">#.CodeCoverage.TestCases.Test_Misc_033 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_033(stopFlag batchFlag)</code>
<code> [1]  ⍝ Check on a multi-line dfn defined and called within a tfn</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[7]   'TEMP'#.⎕NS''</code>
<code class="emphasize">→[8]   #.TEMP.⎕FX'r←test;myFns' 'a←1' 'b←2' '→r←0' 'r←{' '+/⍵' '}⍳9' 'r←2×r'</code>
<code> [9]  </code>
<code class="emphasize">→[10]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code class="emphasize">→[11]  C.Start ⍬</code>
<code class="emphasize">→[12]  {}#.TEMP.test</code>
<code class="emphasize">→[13]  C.Stop ⍬</code>
<code class="emphasize">→[14]  {}C.Finalise ⍬</code>
<code class="emphasize">→[15]  htmlFilename←1 C.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[16]  html←⊃⎕NGET htmlFilename</code>
<code class="emphasize">→[17]  →T.GoToTidyUp~∧/∨/¨'→[4]' '→[5]' '→[7]'⍷¨⊂html</code>
<code class="emphasize">→[18]  →T.GoToTidyUp~∧/~∨/¨({'→[',(⍕⍵),']'}¨(⍳7)~4 5 7)⍷¨⊂html</code>
<code> [19] </code>
<code class="emphasize">→[20]  R←T._OK</code>
<code> [21] </code>
<code class="emphasize">→[22] ∆TidyUp:</code>
<code class="emphasize">→[23]  1 T.codeCoverage.DeleteFiles C.filename</code>
<code> [24] ⍝Done</code>
</div>
<code class="header" id="listing_58">#.CodeCoverage.TestCases.Test_Misc_040 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_040(stopFlag batchFlag)</code>
<code> [1]  ⍝ Check on a function operand of an operator</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code class="emphasize">→[6]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[7]   'TEMP'#.⎕NS''</code>
<code> [8]  </code>
<code class="emphasize">→[9]   #.TEMP.⎕FX'r←(TheFunction OP) array' 'r←TheFunction array' 'r←,r'</code>
<code class="emphasize">→[10]  #.TEMP.⎕FX'r←Plus arg' 'r←+/arg' 'r←,r'</code>
<code class="emphasize">→[11]  #.TEMP.⎕FX'r←Run' 'r←(Plus OP)100?999' 'r←,r'</code>
<code> [12] </code>
<code class="emphasize">→[13]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code> [14] </code>
<code class="emphasize">→[15]  C.Start ⍬</code>
<code class="emphasize">→[16]  {}#.TEMP.Run</code>
<code class="emphasize">→[17]  C.Stop ⍬</code>
<code class="emphasize">→[18]  {}C.Finalise ⍬</code>
<code class="emphasize">→[19]  {}C.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[20]  html←⊃⎕NGET C.filename,'.html'</code>
<code class="emphasize">→[21]  →T.GoToTidyUp 1≠+/'&lt;p&gt;3 of the fns/opr are 100% covered.&lt;/p&gt;'⍷∊html</code>
<code> [22] </code>
<code class="emphasize">→[23]  R←T._OK</code>
<code> [24] </code>
<code class="emphasize">→[25] ∆TidyUp:</code>
<code class="emphasize">→[26]  1 T.codeCoverage.DeleteFiles C.filename</code>
<code> [27] ⍝Done</code>
</div>
<code class="header" id="listing_59">#.CodeCoverage.TestCases.Test_Misc_041 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_041(stopFlag batchFlag)</code>
<code> [1]  ⍝ Make sure that a field is not reported as "not executed" - was once a bug</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[6]   'TEMP'#.⎕NS(⍕⎕THIS),'.ClassWithField'</code>
<code class="emphasize">→[7]   #.TEMP.⎕FX'r←Test_01 y' '#.TEMP.ClassWithField.Hello' 'r←0'</code>
<code class="emphasize">→[8]   T2←⎕NEW Tester2 #.TEMP</code>
<code class="emphasize">→[9]   T2.codeCoverage←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code class="emphasize">→[10]  T2.codeCoverage.filename←(739⌶0),'/CodeCoverage_',(⊃⎕SI)</code>
<code class="emphasize">→[11]  T2.RunThese'Test_01'</code>
<code class="emphasize">→[12]  htmlFilename←##.CodeCoverage.ProcessDataAndCreateReport T2.codeCoverage.filename</code>
<code class="emphasize">→[13]  tno←(T2.codeCoverage.filename,'.profile')⎕FTIE 0</code>
<code class="emphasize">→[14]  →T.GoToTidyUp 11≠2⊃⎕FSIZE tno                ⍝ First 9 are reserved, 10+11 hold data (we called the test suite once)</code>
<code> [15] </code>
<code class="emphasize">→[16]  result←⎕FREAD tno,10</code>
<code class="emphasize">→[17]  toc←↑result[;1]</code>
<code class="emphasize">→[18]  →T.GoToTidyUp'#.TEMP.Test_01' '#.TEMP.ClassWithField.Hello'≢' '~⍨¨↓toc</code>
<code class="emphasize">→[19]  →T.GoToTidyUp 2 100≢∊result[2;2 3]</code>
<code> [20] </code>
<code class="emphasize">→[21]  R←T._OK</code>
<code> [22] </code>
<code class="emphasize">→[23] ∆TidyUp:</code>
<code class="emphasize">→[24]  ⎕FUNTIE tno</code>
<code class="emphasize">→[25]  1 T.codeCoverage.DeleteFiles T2.codeCoverage.filename</code>
<code> [26] ⍝Done</code>
</div>
<code class="header" id="listing_60">#.CodeCoverage.TestCases.Test_Misc_051 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_051(stopFlag batchFlag)</code>
<code> [1]  ⍝ Simple case in ⎕Se (mixed case!); was once a bug</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   ⎕SE.⎕SHADOW'______Foo'</code>
<code class="emphasize">→[6]   '______Foo'⎕SE.⎕NS''</code>
<code class="emphasize">→[7]   ⎕SE.______Foo.⎕FX'r←Hello' 'r←''World'''</code>
<code class="emphasize">→[8]   Data.T←⎕NEW Tester2 Data</code>
<code class="emphasize">→[9]   Data.T.codeCoverage←⎕NEW ##.CodeCoverage(,⊂'⎕Se.______Foo')  ⍝ Mixed case: ⎕Se</code>
<code class="emphasize">→[10]  Data.T.codeCoverage.filename←(739⌶0),'/CodeCoverage_',(⊃⎕SI)</code>
<code class="emphasize">→[11]  {}Data.T.RunThese'Test_003'</code>
<code class="emphasize">→[12]  htmlFilename←##.CodeCoverage.ProcessDataAndCreateReport Data.T.codeCoverage.filename</code>
<code class="emphasize">→[13]  tno←(Data.T.codeCoverage.filename,'.profile')⎕FTIE 0</code>
<code class="emphasize">→[14]  →T.GoToTidyUp 11≠2⊃⎕FSIZE tno                ⍝ First 9 are reserved, 10 holds data</code>
<code> [15] </code>
<code class="emphasize">→[16]  result←⎕FREAD tno,10</code>
<code class="emphasize">→[17]  →T.GoToTidyUp(,¨'⎕SE.______Foo.Hello' 1 100 1)≢,¨,result</code>
<code> [18] </code>
<code class="emphasize">→[19]  R←T._OK</code>
<code> [20] </code>
<code class="emphasize">→[21] ∆TidyUp:</code>
<code class="emphasize">→[22]  ⎕FUNTIE tno</code>
<code class="emphasize">→[23]  1 T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[24]  Data.⎕EX'T'</code>
<code> [25] ⍝Done</code>
</div>
<code class="header" id="listing_61">#.CodeCoverage.TestCases.Test_Misc_061 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_061(stopFlag batchFlag)</code>
<code> [1]  ⍝ Calls ProcessData and CreateReport rather than ProcessDataAndCreateReport and ignore a function</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   Data.Prepare</code>
<code class="emphasize">→[6]   Data.T.codeCoverage.filename←(739⌶0),'/CodeCoverage_',(⊃⎕SI)</code>
<code class="emphasize">→[7]   Data.T.codeCoverage.ignore←'#.CodeCoverage.TestCases.Data.∆Script5.Hello2'</code>
<code class="emphasize">→[8]   {}Data.T.RunThese'Test_002'</code>
<code class="emphasize">→[9]   ##.CodeCoverage.ProcessData Data.T.codeCoverage.filename</code>
<code class="emphasize">→[10]  htmlFilename←##.CodeCoverage.CreateReport Data.T.codeCoverage.filename</code>
<code class="emphasize">→[11]  html←⊃⎕NGET htmlFilename</code>
<code class="emphasize">→[12]  →T.GoToTidyUp 1≠+/'∆Script5.Hello1'⍷html</code>
<code class="emphasize">→[13]  →T.GoToTidyUp 0≠+/'∆Script5.Hello2'⍷html</code>
<code> [14] </code>
<code class="emphasize">→[15]  R←T._OK</code>
<code> [16] </code>
<code class="emphasize">→[17] ∆TidyUp:</code>
<code class="emphasize">→[18]  1 T.codeCoverage.DeleteFiles Data.T.codeCoverage.filename</code>
<code class="emphasize">→[19]  Data.⎕EX'T'</code>
<code> [20] ⍝Done</code>
</div>
<code class="header" id="listing_62">#.CodeCoverage.TestCases.∆GetLinesFromFnsOpr &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  ∆GetLinesFromFnsOpr←{</code>
<code> [1]  ⍝ Every function/operation carries a comment in line 1 that lists all lines that can be executed,</code>
<code> [2]  ⍝ followed by a list of line numbers that are expected to be executed, separated by a `⋄`.</code>
<code> [3]  ⍝ If there is nothing listed after the ⋄ is treated as if the two lists are identical.</code>
<code class="emphasize">→[4]       lines←2⊃⎕NR ⍵</code>
<code class="emphasize">→[5]       ~'⋄'∊lines:∘∘∘ ⍝ Huuh?! Diamond is missing</code>
<code class="emphasize">→[6]       (could did)←'⋄'(≠⊆⊢)lines</code>
<code class="emphasize">→[7]       could←⊃(//)⎕VFI could~'⍝'</code>
<code class="emphasize">→[8]       0=≡did~' ':.</code>
<code class="emphasize">→[9]       did←⊃(//)⎕VFI did</code>
<code class="emphasize">→[10]      could did</code>
<code> [11]  }</code>
</div>
<code class="header" id="listing_63">#.CodeCoverage.TestCases.∆GetLinesFromScrips &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  ∆GetLinesFromScrips←{</code>
<code class="emphasize">→[1]       name←⍵~' '</code>
<code class="emphasize">→[2]       body←↓180⌶name</code>
<code class="emphasize">→[3]       0=≢body:⍬ ⍬            ⍝ A localyzed dfn</code>
<code class="emphasize">→[4]       lines←2⊃body</code>
<code class="emphasize">→[5]       ~'⋄'∊lines:∘∘∘         ⍝ Huuh?! Diamond is missing</code>
<code class="emphasize">→[6]       (could did)←'⋄'(≠⊆⊢)lines</code>
<code class="emphasize">→[7]       could←⊃(//)⎕VFI could~'⍝'</code>
<code class="emphasize">→[8]       0=≢did~' ':could could</code>
<code class="emphasize">→[9]       did←⊃(//)⎕VFI did</code>
<code class="emphasize">→[10]      could did</code>
<code> [11]  }</code>
</div>
<code class="header" id="listing_64">#.CodeCoverage.TestCases.ClassWithField.Hello &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Hello</code>
<code> [1]  :Access Public Shared</code>
<code class="emphasize">→[2]  r←'World'</code>
</div>
<code class="header" id="listing_65">#.CodeCoverage.TestCases.Data.Prepare &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Prepare</code>
<code class="emphasize">→[1]  T←⎕NEW ##.Tester2 ⎕THIS</code>
<code class="emphasize">→[2]  T.codeCoverage←⎕NEW ##.##.CodeCoverage(,⊂'#.CodeCoverage')</code>
<code> [3] ⍝Done</code>
</div>
<code class="header" id="listing_66">#.CodeCoverage.TestCases.Data.Test_001 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_001(stopFlag batchFlag)</code>
<code> [1]  ⍝ Pro-forma test case: just runs all sorts of functions</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   ∆FnsOpr_001 ⍬</code>
<code class="emphasize">→[6]   ∆FnsOpr_002 ⍬</code>
<code> [7]  ⍝ ∆FnsOpr_003 ⍬    ⍝TODO⍝ Currently this is not handled properly due to ⎕PROFILE missing out on this</code>
<code class="emphasize">→[8]   ∆FnsOpr_004 ⍬</code>
<code class="emphasize">→[9]   ∆FnsOpr_005 ⍬</code>
<code> [10] </code>
<code class="emphasize">→[11]  R←T._OK</code>
<code> [12] ⍝Done</code>
</div>
<code class="header" id="listing_67">#.CodeCoverage.TestCases.Data.Test_002 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_002(stopFlag batchFlag)</code>
<code> [1]  ⍝ Pro-forma test case: runs functions in scripts</code>
<code class="emphasize">→[2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]   R←T._Failed</code>
<code> [4]  </code>
<code class="emphasize">→[5]   ∆Script1.Run</code>
<code class="emphasize">→[6]   ∆Script2.Run</code>
<code class="emphasize">→[7]   ∆Script3.Run</code>
<code class="emphasize">→[8]   ∆Script4.Run</code>
<code class="emphasize">→[9]   ref←⎕NEW ∆Script5</code>
<code class="emphasize">→[10]  {}ref.Hello1</code>
<code class="emphasize">→[11]  {}ref.Hello2</code>
<code> [12] </code>
<code class="emphasize">→[13]  R←T._OK</code>
<code> [14] ⍝Done</code>
</div>
<code class="header" id="listing_68">#.CodeCoverage.TestCases.Data.Test_003 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> R←Test_003(stopFlag batchFlag)</code>
<code> [1] ⍝ Run function ins ⎕SE</code>
<code class="emphasize">→[2]  ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[3]  R←T._Failed</code>
<code> [4] </code>
<code class="emphasize">→[5]  {}⎕SE.______Foo.Hello</code>
<code> [6] </code>
<code class="emphasize">→[7]  R←T._OK</code>
<code> [8] ⍝Done</code>
</div>
<code class="header" id="listing_69">#.CodeCoverage.TestCases.Data.∆FnsOpr_001 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  ∆FnsOpr_001 dummy</code>
<code> [1]  ⍝ 2 3 4 5 7 8 9 ⋄ 2 3 4 5</code>
<code class="emphasize">→[2]   :If 1</code>
<code class="emphasize">→[3]       a←1</code>
<code class="emphasize">→[4]       b←2</code>
<code class="emphasize">→[5]       c←3</code>
<code> [6]   :Else</code>
<code class="emphasize">→[7]       d←4</code>
<code class="emphasize">→[8]       e←5</code>
<code class="emphasize">→[9]       f←6</code>
<code> [10]  :EndIf</code>
<code> [11] ⍝Done</code>
</div>
<code class="header" id="listing_70">#.CodeCoverage.TestCases.Data.∆FnsOpr_002 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> ∆FnsOpr_002 dummy</code>
<code> [1] ⍝ 2 3 4 5 ⋄ 2</code>
<code class="emphasize">→[2]  :If 0</code>
<code class="emphasize">→[3]      a←1</code>
<code class="emphasize">→[4]      b←2</code>
<code class="emphasize">→[5]      c←3</code>
<code> [6]  :EndIf</code>
<code> [7] ⍝Done</code>
</div>
<code class="header" id="listing_71">#.CodeCoverage.TestCases.Data.∆FnsOpr_003 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←∆FnsOpr_003 dummy</code>
<code> [1]  ⍝ 2 3 4 5 6 8 ⋄</code>
<code class="emphasize">→[2]   MyDfn_3←{</code>
<code class="emphasize">→[3]       a←1</code>
<code class="emphasize">→[4]       b←2</code>
<code class="emphasize">→[5]       c←3</code>
<code class="emphasize">→[6]       +/,a,b,c,⍵</code>
<code> [7]   }</code>
<code class="emphasize">→[8]   r←MyDfn_3 1 2 3</code>
<code> [9]  ⍝Done</code>
</div>
<code class="header" id="listing_72">#.CodeCoverage.TestCases.Data.∆FnsOpr_004 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  ∆FnsOpr_004 dummy</code>
<code> [1]  ⍝ 2 3 4 5 7 8 9 ⋄ 2 3 4 5</code>
<code class="emphasize">→[2]   :If 1</code>
<code class="emphasize">→[3]       a←1</code>
<code class="emphasize">→[4]       b←2</code>
<code class="emphasize">→[5]       c←3</code>
<code> [6]   :Else</code>
<code class="emphasize">→[7]       d←4</code>
<code class="emphasize">→[8]       e←5</code>
<code class="emphasize">→[9]       f←6</code>
<code> [10]  :EndIf</code>
<code> [11] ⍝Done</code>
</div>
<code class="header" id="listing_73">#.CodeCoverage.TestCases.Data.∆FnsOpr_005 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> ∆FnsOpr_005 dummy</code>
<code> [1] ⍝ 2 3 4 5 ⋄</code>
<code class="emphasize">→[2]  :If 1</code>
<code class="emphasize">→[3]      a←1</code>
<code class="emphasize">→[4]      b←2</code>
<code class="emphasize">→[5]      c←3</code>
<code> [6]  :EndIf</code>
<code> [7] ⍝Done</code>
</div>
<code class="header" id="listing_74">#.CodeCoverage.TestCases.Data.∆Script1.Run &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Run</code>
<code> [1]     ⍝ 3 4 5 6 7 ⋄</code>
<code> [2]  :Access Public Shared</code>
<code class="emphasize">→[3]  r←⍬</code>
<code class="emphasize">→[4]  Hello</code>
<code class="emphasize">→[5]  MyDfns1 100</code>
<code class="emphasize">→[6]  MyDfns2 ⍬</code>
<code class="emphasize">→[7]  Hello2</code>
</div>
<code class="header" id="listing_75">#.CodeCoverage.TestCases.Data.∆Script1.Hello &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Hello</code>
<code> [1]     ⍝ 2 3 5 ⋄ 2 3</code>
<code class="emphasize">→[2]  :If 1</code>
<code class="emphasize">→[3]      r←'World'</code>
<code> [4]  :Else</code>
<code class="emphasize">→[5]      r←'Galaxy'</code>
<code> [6]  :EndIf</code>
</div>
<code class="header" id="listing_76">#.CodeCoverage.TestCases.Data.∆Script2.Run &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Run</code>
<code> [1]     ⍝ 2 3 4 5 6 ⋄</code>
<code class="emphasize">→[2]  r←⍬</code>
<code class="emphasize">→[3]  Hello</code>
<code class="emphasize">→[4]  MyDfns1 100</code>
<code class="emphasize">→[5]  MyDfns2 ⍬</code>
<code class="emphasize">→[6]  Hello2</code>
</div>
<code class="header" id="listing_77">#.CodeCoverage.TestCases.Data.∆Script2.Hello &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Hello</code>
<code> [1]     ⍝ 2 3 5 ⋄ 2 3</code>
<code class="emphasize">→[2]  :If 1</code>
<code class="emphasize">→[3]      r←'World'</code>
<code> [4]  :Else</code>
<code class="emphasize">→[5]      r←'Galaxy'</code>
<code> [6]  :EndIf</code>
</div>
<code class="header" id="listing_78">#.CodeCoverage.TestCases.Data.∆Script2.Hello2 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Hello2</code>
<code> [1]     ⍝ 2 3 4 5 ⋄</code>
<code class="emphasize">→[2]  myDfns2←{</code>
<code class="emphasize">→[3]      +/⍳⍵</code>
<code> [4]  }</code>
<code class="emphasize">→[5]  r←myDfns2 10</code>
</div>
<code class="header" id="listing_79">#.CodeCoverage.TestCases.Data.∆Script3.Run &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Run</code>
<code> [1]  :Access Public Shared</code>
<code class="emphasize">→[2]  r←Sub1.SubTfns 100</code>
<code class="emphasize">→[3]  r+←Sub2.SubSubTfns 100</code>
</div>
<code class="header" id="listing_80">#.CodeCoverage.TestCases.Data.∆Script4.Run &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Run</code>
<code class="emphasize">→[1]  r←Sub1.SubTfns 100</code>
<code class="emphasize">→[2]  r+←Sub1.SubDfns 100</code>
<code class="emphasize">→[3]  r+←Sub1.Sub2.SubSubTfns 100</code>
<code class="emphasize">→[4]  r+←Sub1.Sub2.SubSubDfns 100</code>
</div>
<code class="header" id="listing_81">#.CodeCoverage.TestCases.Data.∆Script5.make &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> make</code>
<code> [1]  :Access Public Instance</code>
<code> [2]  :Implements Constructor</code>
<code class="emphasize">→[3]  ⎕RL←+/⎕TS</code>
</div>
<code class="header" id="listing_82">#.CodeCoverage.TestCases.Data.∆Script5.Hello1 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Hello1</code>
<code> [1]  :Access Public Instance</code>
<code class="emphasize">→[2]  r←'Galaxy'</code>
</div>
<code class="header" id="listing_83">#.CodeCoverage.TestCases.Data.∆Script5.Hello2 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Hello2</code>
<code> [1]  :Access Public Instance</code>
<code class="emphasize">→[2]  r←'World'</code>
</div>
<code class="header" id="listing_84">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Version &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Version</code>
<code> [1]  :Access Public Shared</code>
<code class="emphasize">→[2]  r←'APLTreeUtils2' '1.4.0+62' '2024-03-21'</code>
</div>
<code class="header" id="listing_85">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Lowercase &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←{x}Lowercase txt</code>
<code> [1]     ⍝ `txt` is transformed into lowercase.\\</code>
<code> [2]     ⍝ This function is kept for compatability reasons.</code>
<code> [3]  :Access Public Shared</code>
<code class="emphasize">→[4]  x←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ¯3}'x'</code>
<code class="emphasize">→[5]  r←x ⎕C txt</code>
</div>
<code class="header" id="listing_86">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Uppercase &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Uppercase txt</code>
<code> [1]     ⍝ `txt` is transformed into uppercase.\\</code>
<code> [2]     ⍝ This function is kept for compatability reasons.</code>
<code> [3]  :Access Public Shared</code>
<code class="emphasize">→[4]  r←1 ⎕C txt</code>
</div>
<code class="header" id="listing_87">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IsChar &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←IsChar y</code>
<code> [1]     ⍝ Checks `y` for being text</code>
<code> [2]  :Access Public Shared</code>
<code class="emphasize">→[3]  r←0 2∊⍨10|⎕DR y</code>
</div>
<code class="header" id="listing_88">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.ToNum &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{default}ToNum y</code>
<code> [1]      ⍝ Transforms `y` into number(s).\\</code>
<code> [2]      ⍝ In case `y` is empty `default` is returned which defaults to ⍬ (empty numeric vector).</code>
<code> [3]   :Access Public Shared</code>
<code class="emphasize">→[4]   :If 0=≢y</code>
<code class="emphasize">→[5]   :AndIf 0&lt;⎕NC'default'</code>
<code class="emphasize">→[6]       r←default</code>
<code> [7]   :Else</code>
<code class="emphasize">→[8]       r←⊃(//)⎕VFI y</code>
<code> [9]   :EndIf</code>
</div>
<code class="header" id="listing_89">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IsScripted &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←IsScripted y</code>
<code> [1]     ⍝ Returns a 1 for classes, interfaces and scripted namespaces and 0 otherwise.</code>
<code> [2]  :Access Public Shared</code>
<code class="emphasize">→[3]  r←{11 16::0 ⋄ 1⊣⎕SRC ⍵}y</code>
</div>
<code class="header" id="listing_90">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.LazyMatch &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←x LazyMatch y</code>
<code> [1]  :Access Public Shared</code>
<code class="emphasize">→[2]  r←(∧/x∊y)∧(∧/y∊x)</code>
</div>
<code class="header" id="listing_91">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Assert &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←{msg}Assert y</code>
<code> [1]      ⍝ Use this to ensure certain conditions. If the condition is not met an error is signalled, otherwise a 1 is returned.\\</code>
<code> [2]      ⍝ The optional left argument would become the message that is signalled.\\</code>
<code> [3]      ⍝ `y` might be a scalar or a vector of length one: that must be a Boolean. 1 means "success".\\</code>
<code> [4]      ⍝ `y` can also be a two-item vector:</code>
<code> [5]      ⍝ 1. A Boolean as before</code>
<code> [6]      ⍝ 2. An error number to be signalle; defaults to 11.</code>
<code> [7]   :Access Public Shared</code>
<code class="emphasize">→[8]   r←1</code>
<code class="emphasize">→[9]   msg←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ''}'msg'</code>
<code class="emphasize">→[10]  (success EN)←2↑y,11</code>
<code class="emphasize">→[11]  :If (,1)≢,success</code>
<code class="emphasize">→[12]      msg ⎕SIGNAL EN</code>
<code> [13]  :EndIf</code>
</div>
<code class="header" id="listing_92">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IsDevelopment &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←IsDevelopment</code>
<code> [1]  :Access Public Shared</code>
<code> [2]     ⍝ Returns 1 in case the function is running under a Dyalog development (EXE or DLL).</code>
<code class="emphasize">→[3]  r←'Development'≡4⊃'#'⎕WG'APLVersion'</code>
<code class="emphasize">→[4]  r∨←'DLL'≡4⊃'#'⎕WG'APLVersion'   ⍝ May be DLLRT instead!</code>
</div>
<code class="header" id="listing_93">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.SplitPath &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{sep}SplitPath y</code>
<code> [1]      ⍝ Separates the path from the filename and returns both.\\</code>
<code> [2]      ⍝ Default for the optional left argument (the separator) are `\/`.\\</code>
<code> [3]      ⍝ `'C:\Buffer\' 'my.txt' ←→ SplitPath 'C:\Buffer\my.txt'`</code>
<code> [4]      ⍝ `(,¨'1.2.3.4.') (,'5') ←→ '.' SplitPath '1.2.3.4.5'`</code>
<code> [5]   :Access Public Shared</code>
<code class="emphasize">→[6]   sep←,{0&lt;⎕NC ⍵:⍎⍵ ⋄ '/\'}'sep'</code>
<code class="emphasize">→[7]   :If 0=≢y</code>
<code class="emphasize">→[8]       r←2⍴⊂y</code>
<code> [9]   :Else</code>
<code class="emphasize">→[10]      l←1+-⌊/sep⍳⍨⌽y</code>
<code class="emphasize">→[11]      r←(l↓y)(l↑y)</code>
<code> [12]  :EndIf</code>
</div>
<code class="header" id="listing_94">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Split &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{sep}Split y</code>
<code> [1]   :Access Public Shared</code>
<code> [2]        ⍝  `'First' 'Second' ←→ Split 'First',(⎕UCS 13 10),'Second'`\\</code>
<code> [3]        ⍝ `(,¨'1' '2' '3' '' '4') ←→ '.' Split '1.2.3..4'`\\</code>
<code> [4]        ⍝ That's _different_ from what `(≠⊆⊢)` is doing:\\</code>
<code> [5]        ⍝ `(,¨'1' '2' '3' '4') ←→ '.' (≠⊆⊢) '1.2.3..4'`\\</code>
<code> [6]        ⍝ Default for the optional left argument (the separator) is CR+LF.</code>
<code class="emphasize">→[7]   sep←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ⎕UCS 13 10}'sep'</code>
<code class="emphasize">→[8]   b←(1↑⍨≢sep),sep⍷y     ⍝ This is more efficient in terms of memory then doing it one one line</code>
<code class="emphasize">→[9]   r←(≢sep)↓¨b⊂sep,y</code>
</div>
<code class="header" id="listing_95">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Last &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{sep}Last y</code>
<code> [1]   :Access Public Shared</code>
<code> [2]        ⍝ Returns the last part in `y`.\\</code>
<code> [3]        ⍝ Default separator is the dot (`.`), so for a filename it would return the extension:\\</code>
<code> [4]        ⍝ `BAT ←→ Last '/path/to/file.BAT'`\\</code>
<code> [5]        ⍝ You can also use this to get the filename from a path:\\</code>
<code> [6]        ⍝ `file.BAT ←→ '/\' Last '/path/to/file.BAT'`\\</code>
<code> [7]        ⍝ Returns always a vector:\\</code>
<code> [8]        ⍝ `(,¨'3') ←→ Last '1.2.3'`</code>
<code class="emphasize">→[9]   sep←{0&lt;⎕NC ⍵:⍎⍵ ⋄ '.'}'sep'</code>
<code class="emphasize">→[10]  :If (≢y)=where←¯1+⌊/sep⍳⍨⌽,y</code>
<code class="emphasize">→[11]      r←0⍴y</code>
<code class="emphasize">→[12]  :ElseIf ~0 1∊⍨≡r←(-where)↑y</code>
<code class="emphasize">→[13]      r←⍬⍴r</code>
<code> [14]  :EndIf</code>
</div>
<code class="header" id="listing_96">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.DMB &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{x}DMB y</code>
<code> [1]   :Access Public Shared</code>
<code> [2]        ⍝ Delete leading, trailing and multiple blanks by default. Accepts scalar, vector and matrix as argument.</code>
<code class="emphasize">→[3]   x←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ' '}'x'</code>
<code class="emphasize">→[4]   r←x{~0 1∊⍨≡⍵:⍺ ∇¨⍵</code>
<code class="emphasize">→[5]       2=⍴⍴⍵:↑⍺ ∇¨↓⍵</code>
<code class="emphasize">→[6]       (,⍺)≡,⍵:''</code>
<code class="emphasize">→[7]       w←1↓¯1↓⍺{⍵/⍨~(2⍴⍺)⍷⍵}⍺,⍵,⍺</code>
<code class="emphasize">→[8]       (0=⍴⍴⍵)∧1=≢w:⍬⍴⍵</code>
<code class="emphasize">→[9]       w</code>
<code> [10]  }y</code>
</div>
<code class="header" id="listing_97">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.DLB &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←DLB y</code>
<code> [1]   :Access Public Shared</code>
<code> [2]        ⍝ Delete leading blanks. Accepts scalar, vector and matrix as argument.</code>
<code class="emphasize">→[3]   :If 2=|≡y</code>
<code class="emphasize">→[4]       r←DLB¨y</code>
<code class="emphasize">→[5]   :ElseIf 1=⍴⍴y</code>
<code class="emphasize">→[6]       r←(+/∧\' '=y)↓y                 ⍝ Vectors (main application)</code>
<code class="emphasize">→[7]   :ElseIf 2=⍴⍴y</code>
<code class="emphasize">→[8]       r←(+/∧\' '=y)⌽y                 ⍝ Matrix</code>
<code class="emphasize">→[9]   :ElseIf 0=⍴⍴y</code>
<code class="emphasize">→[10]      r←(1+' '≡y)⊃y''                 ⍝ Scalar</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_98">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.DTB &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←DTB y</code>
<code> [1]   :Access Public Shared</code>
<code> [2]        ⍝ Delete trailing blanks. Accepts scalar, vector and matrix as argument.</code>
<code class="emphasize">→[3]   :If 2=|≡y</code>
<code class="emphasize">→[4]       r←DTB¨y</code>
<code class="emphasize">→[5]   :ElseIf 1=⍴⍴y</code>
<code class="emphasize">→[6]       r←⌽{(+/∧\' '=⍵)↓⍵}⌽y            ⍝ Vectors (main application)</code>
<code class="emphasize">→[7]   :ElseIf 2=⍴⍴y</code>
<code class="emphasize">→[8]       r←(-+/∧⌿∧\' '=⌽y)↓[2]y          ⍝ Matrix</code>
<code class="emphasize">→[9]   :ElseIf 0=⍴⍴y</code>
<code class="emphasize">→[10]      r←(1+' '≡y)⊃y''                 ⍝ Scalar</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_99">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.GoToWebPage &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {success}←{x}GoToWebPage Url</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ Fires up the default browser and displays "Url". Exception is when the current</code>
<code> [3]      ⍝ session is connected to Ride: then "Url" is displayed in the Ride browser.\\</code>
<code> [4]      ⍝ Instead of using the default browser you can specify an EXE (Windows) or command</code>
<code> [5]      ⍝ as the left argument. That will then be used to show "Url". Instead the left argument</code>
<code> [6]      ⍝ can be a `0`: thi is useful to **not** use the Ride browser when connected to Ride.</code>
<code> [7]      ⍝ If not connected to Ride the left argument is ignored in case it is numeric.</code>
<code> [8]      ⍝ For displaying a local file rather then a url add "file://".\\</code>
<code> [9]      ⍝ However, note that "file://" does not work on some systems / with some browsers.\\</code>
<code> [10]     ⍝ Returns 1 for success and 0 for failure. That can happen for example when the</code>
<code> [11]     ⍝ Windows Scripting Host throws a DOMAIN ERROR.\\</code>
<code> [12]     ⍝ Examples:</code>
<code> [13]     ⍝ ~~~</code>
<code> [14]     ⍝ GoToWebPage 'file:///c:/my.html'</code>
<code> [15]     ⍝ GoToWebPage 'file://localhost/c:/my.html'</code>
<code> [16]     ⍝ GoToWebPage 'http://aplwiki.com'</code>
<code> [17]     ⍝ GoToWebPage 'https://en.wikipedia.org/wiki/Main_Page'</code>
<code> [18]     ⍝ ~~~</code>
<code class="emphasize">→[19]  ⎕WX←1</code>
<code class="emphasize">→[20]  success←1</code>
<code class="emphasize">→[21]  url←Lowercase Url</code>
<code class="emphasize">→[22]  x←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ''}'x'</code>
<code class="emphasize">→[23]  :If ' '=1↑0⍴x</code>
<code class="emphasize">→[24]      browser←{'"',(⍵~'"'),'" '}⍣(0&lt;≢x)⊢x</code>
<code class="emphasize">→[25]      rideFlag←1</code>
<code> [26]  :Else</code>
<code class="emphasize">→[27]      rideFlag←⊃x</code>
<code class="emphasize">→[28]      browser←''</code>
<code> [29]  :EndIf</code>
<code class="emphasize">→[30]  :If ∨/'file:'{⍺≡(≢⍺)↑⍵}url</code>
<code class="emphasize">→[31]      :If 'Win'≡GetOperatingSystem ⍬</code>
<code class="emphasize">→[32]          Url←'"',('"'~⍨'file://'{⍺,(≢⍺)↓⍵}Url),'"'</code>
<code> [33]      :EndIf</code>
<code class="emphasize">→[34]  :ElseIf ∨/'https:'{⍺≡(≢⍺)↑⍵}url</code>
<code class="emphasize">→[35]      Url←'https://'{⍺,(≢⍺)↓⍵}Url</code>
<code class="emphasize">→[36]  :ElseIf ∨/'http:'{⍺≡(≢⍺)↑⍵}url</code>
<code class="emphasize">→[37]      Url←'http://'{⍺,(≢⍺)↓⍵}Url</code>
<code> [38]  :Else</code>
<code class="emphasize">→[39]      :If ∨/'//:'∊Url  ⍝ Any protocol at all?!</code>
<code> [40]               ⍝ ? No idea what that protocol is, so we just allow it going through.</code>
<code> [41]      :Else</code>
<code class="emphasize">→[42]          Url←'https://',Url    ⍝ That's the default</code>
<code> [43]      :EndIf</code>
<code> [44]  :EndIf</code>
<code class="emphasize">→[45]  (('\'=Url)/Url)←'/'</code>
<code class="emphasize">→[46]  Url←{l←3+1⍳⍨'://'⍷⍵ ⋄ (l↑⍵),{(~'//'⍷⍵)/⍵}l↓Url}Url</code>
<code class="emphasize">→[47]  :If 3501⌶⍬ ⍝ Connected to Ride?</code>
<code class="emphasize">→[48]  :AndIf rideFlag</code>
<code class="emphasize">→[49]      :If 'file://'{⍺≡(≢⍺)↑⍵}Url</code>
<code> [50]               ⍝Url←∊(⊂'\ ')@(⍸' '=Url)⊣Url</code>
<code class="emphasize">→[51]          Url←(≢'file://')↓Url</code>
<code class="emphasize">→[52]          html←⊃⎕NGET Url 1</code>
<code class="emphasize">→[53]          :If 0=≢title←'&lt;title'{{⍵↑⍨¯1+⍵⍳'&lt;'}⍵↓⍨(≢⍺)+1⍳⍨⍺⍷⍵}∊html</code>
<code class="emphasize">→[54]              title←Url</code>
<code> [55]          :EndIf</code>
<code class="emphasize">→[56]          success←0=title(3500⌶)∊html</code>
<code> [57]      :Else</code>
<code class="emphasize">→[58]          html←'&lt;html&gt;' '&lt;head&gt;'</code>
<code class="emphasize">→[59]          html,←⊂'&lt;meta http-equiv="refresh" content="0;url=',Url,'" /&gt;'</code>
<code class="emphasize">→[60]          html,←'&lt;/head&gt;' '&lt;/html&gt;'</code>
<code class="emphasize">→[61]          success←0=Url(3500⌶)∊html</code>
<code> [62]      :EndIf</code>
<code> [63]  :Else</code>
<code class="emphasize">→[64]      :Select GetOperatingSystem ⍬</code>
<code class="emphasize">→[65]      :Case 'Win'</code>
<code class="emphasize">→[66]          'wsh'⎕WC'OLEClient' 'WScript.Shell'</code>
<code class="emphasize">→[67]          :Trap 11</code>
<code class="emphasize">→[68]              :If 0=≢browser</code>
<code class="emphasize">→[69]                  {}wsh.Run Url</code>
<code> [70]              :Else</code>
<code class="emphasize">→[71]                  {}wsh.Run browser,Url</code>
<code> [72]              :EndIf</code>
<code> [73]          :Else</code>
<code class="emphasize">→[74]              success←0</code>
<code> [75]          :EndTrap</code>
<code class="emphasize">→[76]      :Case 'Lin'</code>
<code class="emphasize">→[77]          :Trap 11</code>
<code class="emphasize">→[78]              :If 0=≢browser</code>
<code class="emphasize">→[79]                  {}⎕SH'xdg-open ',Url,'&lt;/dev/null &gt; /dev/null 2&gt;&amp;1 &amp;'</code>
<code> [80]              :Else</code>
<code class="emphasize">→[81]                  {}⎕SH browser,' ',Url,'&lt;/dev/null &gt; /dev/null 2&gt;&amp;1 &amp;'</code>
<code> [82]              :EndIf</code>
<code> [83]          :Else</code>
<code class="emphasize">→[84]              success←0</code>
<code> [85]          :EndTrap</code>
<code class="emphasize">→[86]      :Case 'Mac'</code>
<code class="emphasize">→[87]          :Trap 11</code>
<code class="emphasize">→[88]              {}⎕SH'open -a Safari ',Url</code>
<code> [89]          :Else</code>
<code class="emphasize">→[90]              success←0</code>
<code> [91]          :EndTrap</code>
<code> [92]      :EndSelect</code>
<code> [93]  :EndIf</code>
</div>
<code class="header" id="listing_100">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IsRunningAsAdmin &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←IsRunningAsAdmin</code>
<code> [1]        ⍝ Tells whether this process is being "Run as Administrator" (Windows) or has sudo rights (others)</code>
<code> [2]   :Access Public Shared</code>
<code class="emphasize">→[3]   :If 'Win'≡APLTreeUtils2.GetOperatingSystem''</code>
<code class="emphasize">→[4]       :Trap r←0</code>
<code class="emphasize">→[5]           r←⍎⎕NA'I Shell32|IsUserAnAdmin'</code>
<code> [6]       :EndTrap</code>
<code> [7]   :Else</code>
<code class="emphasize">→[8]       r←{∨/' sudo '⍷' ',⍵,' '}⊃⎕SH'groups ',⎕AN</code>
<code> [9]   :EndIf</code>
</div>
<code class="header" id="listing_101">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.GetOperatingSystem &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetOperatingSystem dummy</code>
<code> [1]  :Access Public Shared</code>
<code> [2]    ⍝ Returns one of: "Win", "Mac", "AIX", "Lin".\\</code>
<code> [3]    ⍝ Note that under Linux you might need more information.</code>
<code class="emphasize">→[4]  r←3↑⊃'.'⎕WG'APLVersion'</code>
</div>
<code class="header" id="listing_102">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Create_UUID &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Create_UUID</code>
<code> [1]     ⍝ Produces a UUID</code>
<code> [2]  :Access Public Shared</code>
<code class="emphasize">→[3]  ⎕RL[1]←⊂⍬</code>
<code class="emphasize">→[4]  r←'-'@(4+5×⍳4)⊢(⎕D,⎕C ⎕A)[4(9+|)@20⊢5@15?36⍴16]</code>
</div>
<code class="header" id="listing_103">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.Base64 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{type}Base64 txt</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ Base64 encoding and decoding. `txt` must be a simple character vector.</code>
<code> [3]      ⍝ The function works out what to do.\\</code>
<code> [4]      ⍝ Note that this function is **_not_** designed to convert large amounts of data.</code>
<code> [5]      ⍝ `type` defaults to 1 which specifies the default alphabet: `[a-zA-z0-9+/=]`.\\</code>
<code> [6]      ⍝ If you want a file and URL-save alphabet specify `type` as 2. Then `- is used instead of `+`, and `_` instead of `/`.\\</code>
<code> [7]      ⍝ See [RFC 4648](http://www.rfc-editor.org/rfc/rfc4648.txt) for details.\\</code>
<code> [8]      ⍝ Whitespace in `txt` is ignored on decode.</code>
<code class="emphasize">→[9]   type←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 1}'type'</code>
<code class="emphasize">→[10]  :If (,1)≡,type</code>
<code class="emphasize">→[11]      charset←'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'</code>
<code class="emphasize">→[12]  :ElseIf (,2)≡,type</code>
<code class="emphasize">→[13]      charset←'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'</code>
<code> [14]  :Else</code>
<code class="emphasize">→[15]      'Invalid left argument: "type" must be either 1 or 2'⎕SIGNAL 11</code>
<code> [16]  :EndIf</code>
<code class="emphasize">→[17]  :If ∧/('='~⍨∪txt)∊charset</code>
<code class="emphasize">→[18]      r←charset base64 txt</code>
<code> [19]  :Else</code>
<code class="emphasize">→[20]      r←charset base64'UTF-8'⎕UCS txt</code>
<code> [21]  :EndIf</code>
</div>
<code class="header" id="listing_104">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.AtLeastVersion &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{currentVersion}AtLeastVersion min</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ Returns 1 if the currently running version is at least `min`.\\</code>
<code> [3]      ⍝ If the current version is 17.1 then:\\</code>
<code> [4]      ⍝ `1 1 1 0 ←→ AtLeastVersion¨16 17 17.1 18`\\</code>
<code> [5]      ⍝ You may specify a version different from the currently running one via `⍺`:\\</code>
<code> [6]      ⍝ `1 1 0 0 ←→ 17 AtLeastVersion¨16 17 17.1 18`</code>
<code class="emphasize">→[7]   currentVersion←{0&lt;⎕NC ⍵:⍎⍵ ⋄ {⊃⊃(//)⎕VFI ⍵/⍨2&gt;+\⍵='.'}2⊃'#'⎕WG'APLVersion'}'currentVersion'</code>
<code class="emphasize">→[8]   'Right argument must be length 1'⎕SIGNAL 11/⍨1≠≢min</code>
<code class="emphasize">→[9]   r←⊃min≤currentVersion</code>
</div>
<code class="header" id="listing_105">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.FormatDateTime &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{length}FormatDateTime ts</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ Formats the right argument (defaults to `⎕TS` if empty) as a string with 'YYYY-MM-DD hh:mm:ss by default\\</code>
<code> [3]      ⍝ The right argument can be one of:</code>
<code> [4]      ⍝ * A single float (like 20120102030405) representing date and time.</code>
<code> [5]      ⍝ * A simple vector of length 6 or 7 representing a timestamp (`⎕TS`).</code>
<code> [6]      ⍝ * A matrix of either floats or vectors (length 6 or 7) representing a DateTime.</code>
<code> [7]      ⍝ Note that you cannot mix floats and time stamps.\\</code>
<code> [8]      ⍝ If the right argument has not 7 but 6 or 3 elements, formatting is done accordingly.\\</code>
<code> [9]      ⍝ Via the left argument the length can be set to</code>
<code> [10]     ⍝ ⍬, 3, 6 or 7; default is 6; ⍬ Accepts any length of the right argument which is 3, 6 or 7.\\</code>
<code> [11]     ⍝ If the right argument is a...</code>
<code> [12]     ⍝ * simple vector, a string is returned.</code>
<code> [13]     ⍝ * matrix, a matrix is returned.</code>
<code class="emphasize">→[14]  :If 645≡⎕DR ts</code>
<code class="emphasize">→[15]      :If (⍴⍴ts)∊0 1</code>
<code class="emphasize">→[16]          :If 1=≢ts</code>
<code class="emphasize">→[17]              ts←{0=≢,⍵:⍬ ⋄ ⎕ML←3 ⋄ ⍎¨(4 2 2 2 2 2/⍳6)⊂14 0⍕⍵}ts</code>
<code> [18]          :EndIf</code>
<code> [19]      :Else</code>
<code class="emphasize">→[20]          ts←↑,{0=⍵:6⍴0 ⋄ v←14 0⍕⍵ ⋄ ⎕ML←3 ⋄ ⍎¨(4 2 2 2 2 2/⍳6)⊂v}¨ts</code>
<code> [21]      :EndIf</code>
<code> [22]  :EndIf</code>
<code class="emphasize">→[23]  :If ⍬≡length←{2=⎕NC ⍵:⍎⍵ ⋄ 6}'length'</code>
<code class="emphasize">→[24]      length←''⍴¯1↑⍴ts</code>
<code> [25]  :EndIf</code>
<code class="emphasize">→[26]  :If ~0=≢ts</code>
<code class="emphasize">→[27]      :If 2=⍴⍴ts</code>
<code class="emphasize">→[28]          buffer←{⍵/⍨0&lt;≢¨⍵~¨⊂' ' 0}↓ts</code>
<code class="emphasize">→[29]          'Invalid right argument: must be integer'⎕SIGNAL 11/⍨~326 163∊⍨∪⎕DR¨buffer</code>
<code class="emphasize">→[30]          'Invalid right argument: must not be negative'⎕SIGNAL 11/⍨∨/¯1∊¨×¨buffer</code>
<code class="emphasize">→[31]          'Invalid right argument: must be simple'⎕SIGNAL 11/⍨1≠∪≡¨buffer</code>
<code> [32]      :Else</code>
<code class="emphasize">→[33]          'Invalid right argument: must be integer'⎕SIGNAL 11/⍨~326 163∊⍨⎕DR ts</code>
<code class="emphasize">→[34]          'Invalid right argument: must not be negative'⎕SIGNAL 11/⍨¯1∊×,ts</code>
<code class="emphasize">→[35]          'Invalid right argument: must be simple'⎕SIGNAL 11/⍨1≠≡ts</code>
<code> [36]      :EndIf</code>
<code> [37]  :EndIf</code>
<code class="emphasize">→[38]  :If 2=⍴⍴ts</code>
<code class="emphasize">→[39]      ts2←length↑[2]ts</code>
<code> [40]  :Else</code>
<code class="emphasize">→[41]      ts2←,[0.5]length↑{0=≢⍵:⎕TS ⋄ ts}ts</code>
<code> [42]  :EndIf</code>
<code class="emphasize">→[43]  :Select ⊃length</code>
<code class="emphasize">→[44]  :Case 3</code>
<code class="emphasize">→[45]      formatstring←'ZI4,&lt;-&gt;,ZI2,&lt;-&gt;,ZI2'</code>
<code class="emphasize">→[46]  :CaseList 6 7</code>
<code class="emphasize">→[47]      formatstring←'ZI4,&lt;-&gt;,ZI2,&lt;-&gt;,ZI2,&lt; &gt;,ZI2,&lt;:&gt;,ZI2,&lt;:&gt;,ZI2'</code>
<code> [48]  :Else</code>
<code class="emphasize">→[49]      'Invalid left argument'⎕SIGNAL 11</code>
<code> [50]  :EndSelect</code>
<code class="emphasize">→[51]  bool←(ts2∨.≠' ')∧ts2∨.≠0</code>
<code class="emphasize">→[52]  r←bool⍀formatstring ⎕FMT(6⌊length)↑[2]bool⌿ts2</code>
<code class="emphasize">→[53]  :If 7=2⊃⍴ts2</code>
<code class="emphasize">→[54]      r←⊃(↓r),¨{0=⍵:'' ⋄ 0=≢⍵~' ':'' ⋄ '.',⍕⍵}¨ts2[;7]</code>
<code> [55]  :EndIf</code>
<code class="emphasize">→[56]  :If 2≠⍴⍴ts</code>
<code class="emphasize">→[57]      r←,r</code>
<code> [58]  :EndIf</code>
</div>
<code class="header" id="listing_106">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.BitsToInt &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←BitsToInt y</code>
<code> [1]     ⍝ Unsigned</code>
<code> [2]  :Access Public Shared</code>
<code class="emphasize">→[3]  r←(32⍴2)⊥⌽32↑y</code>
</div>
<code class="header" id="listing_107">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.IntToBits &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←IntToBits y</code>
<code> [1]     ⍝ Unsigned</code>
<code> [2]  :Access Public Shared</code>
<code class="emphasize">→[3]  r←⌽(32⍴2)⊤y</code>
</div>
<code class="header" id="listing_108">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.ASSETS &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ASSETS</code>
<code class="emphasize">→[1]  r←''</code>
</div>
<code class="header" id="listing_109">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.CONFIG &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←CONFIG</code>
<code class="emphasize">→[1]   r←'{</code>
<code class="emphasize">→[2]    api: "APLTreeUtils2",</code>
<code class="emphasize">→[3]    assets: "",</code>
<code class="emphasize">→[4]    date: 20240325.144117,</code>
<code class="emphasize">→[5]    description: "General utilities required by most members of the APLTree library",</code>
<code class="emphasize">→[6]    documentation: "",</code>
<code class="emphasize">→[7]    files: "",</code>
<code class="emphasize">→[8]    group: "aplteam",</code>
<code class="emphasize">→[9]    io: 1,</code>
<code class="emphasize">→[10]   license: "MIT",</code>
<code class="emphasize">→[11]   lx: "",</code>
<code class="emphasize">→[12]   maintainer: "kai@aplteam.com",</code>
<code class="emphasize">→[13]   minimumAplVersion: "18.0",</code>
<code class="emphasize">→[14]   ml: 1,</code>
<code class="emphasize">→[15]   name: "APLTreeUtils2",</code>
<code class="emphasize">→[16]   os_lin: 1,</code>
<code class="emphasize">→[17]   os_mac: 1,</code>
<code class="emphasize">→[18]   os_win: 1,</code>
<code class="emphasize">→[19]   project_url: "https://github.com/aplteam/APLTreeUtils2",</code>
<code class="emphasize">→[20]   source: "APLSource/APLTreeUtils2.aplc",</code>
<code class="emphasize">→[21]   tags: "tools,utilities",</code>
<code class="emphasize">→[22]   uri: "https://tatin.dev/",</code>
<code class="emphasize">→[23]   userCommandScript: "",</code>
<code class="emphasize">→[24]   version: "1.4.0+78",</code>
<code> [25] }'</code>
</div>
<code class="header" id="listing_110">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.DEPENDENCIES &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←DEPENDENCIES</code>
<code class="emphasize">→[1]  r←⍬</code>
</div>
<code class="header" id="listing_111">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.GetFullPath2AssetsFolder &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetFullPath2AssetsFolder</code>
<code class="emphasize">→[1]  :If 0&lt;≢r←ASSETS</code>
<code class="emphasize">→[2]  :AndIf 0&lt;≢HOME</code>
<code class="emphasize">→[3]  :AndIf ⎕NEXISTS HOME</code>
<code class="emphasize">→[4]      r←HOME,'/',ASSETS</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_112">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.HOME &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←HOME</code>
<code> [1]  ⍝ Returns folder package was loaded from or current directory or an empty vector if both are not valid</code>
<code class="emphasize">→[2]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[3]   r←'C:/T/Projects/APLTree/CodeCoverage/packages_dev/aplteam-APLTreeUtils2-1.4.0'   ⍝ Original source</code>
<code class="emphasize">→[4]   :If ~⎕NEXISTS r</code>
<code class="emphasize">→[5]       (dir name extension)←⎕NPARTS r</code>
<code class="emphasize">→[6]       r←(⊃1 ⎕NPARTS''),(2⊃⎕NPARTS ¯1↓dir),'/',name,extension ⍝ Try current dir</code>
<code class="emphasize">→[7]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[8]       r←(⊃1 ⎕NPARTS''),name,extension</code>
<code class="emphasize">→[9]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[10]      r←''</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_113">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.ID &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ID</code>
<code class="emphasize">→[1]  r←'aplteam-APLTreeUtils2-1.4.0+78'</code>
</div>
<code class="header" id="listing_114">#._tatin.aplteam_APLTreeUtils2_1_4_0.TatinVars.URI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←URI</code>
<code class="emphasize">→[1]  r←'https://tatin.dev/'</code>
</div>
<code class="header" id="listing_115">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.get_data &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_data</code>
<code class="emphasize">→[1]  r←_data</code>
</div>
<code class="header" id="listing_116">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.set_ignore &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_ignore value</code>
<code class="emphasize">→[1]  :If 0=noOf←+/∧\1=≡¨value.NewValue</code>
<code class="emphasize">→[2]      v←∊value.NewValue</code>
<code> [3]  :Else</code>
<code class="emphasize">→[4]      v←(⊃{⍺,',',⍵}/noOf↑value.NewValue),noOf↓value.NewValue</code>
<code> [5]  :EndIf</code>
<code class="emphasize">→[6]  'Must be character vector'⎕SIGNAL 11/⍨' '≠1↑0⍴v</code>
<code class="emphasize">→[7]  ('Has invalid characters',b/v)⎕SIGNAL 11/⍨∨/b←~v∊APL_Chars,',⎕#.'</code>
<code class="emphasize">→[8]  _ignore←v</code>
</div>
<code class="header" id="listing_117">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.get_ignore &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_ignore</code>
<code class="emphasize">→[1]  r←','(≠⊆⊢),_ignore</code>
</div>
<code class="header" id="listing_118">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.set_watch &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  set_watch value</code>
<code class="emphasize">→[1]   v←∊value.NewValue</code>
<code class="emphasize">→[2]   'Must be character vector'⎕SIGNAL 11/⍨' '≠1↑0⍴v</code>
<code class="emphasize">→[3]   ('Has invalid characters',b/v)⎕SIGNAL 11/⍨∨/b←~v∊APL_Chars,',⎕#.'</code>
<code class="emphasize">→[4]   v2←','(≠⊆⊢),v</code>
<code class="emphasize">→[5]   :If ~v2∊,¨'#' '⎕SE'</code>
<code class="emphasize">→[6]       :If ∨/~b←0&lt;⎕NC↑v2</code>
<code class="emphasize">→[7]           11 ⎕SIGNAL⍨'Unknown names: ',⊃{⍺,',',⍵}/(~b)/v2</code>
<code> [8]       :EndIf</code>
<code> [9]   :EndIf</code>
<code class="emphasize">→[10]  _watch←v2</code>
</div>
<code class="header" id="listing_119">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.get_watch &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_watch</code>
<code class="emphasize">→[1]  r←_watch</code>
</div>
<code class="header" id="listing_120">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.set_filename &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_filename value</code>
<code class="emphasize">→[1]  v←value.NewValue</code>
<code class="emphasize">→[2]  'Invalid depth'⎕SIGNAL 11/⍨~(≡v)∊0 1</code>
<code class="emphasize">→[3]  'Must be a character vector'⎕SIGNAL 11/⍨' '≠1↑0⍴∊v</code>
<code class="emphasize">→[4]  _filename←⊃,/2↑⎕NPARTS v</code>
</div>
<code class="header" id="listing_121">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.get_filename &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_filename</code>
<code class="emphasize">→[1]  r←_filename</code>
</div>
<code class="header" id="listing_122">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Version &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Version</code>
<code> [1]  :Access Public Shared</code>
<code class="emphasize">→[2]  r←'CodeCoverage' '0.10.6+52' '2024-03-13'</code>
</div>
<code class="header" id="listing_123">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.make1 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  make1(watch_)</code>
<code> [1]   :Access Public Instance</code>
<code> [2]   :Implements Constructor</code>
<code> [3]   :Access Public</code>
<code class="emphasize">→[4]   _ignore←''</code>
<code class="emphasize">→[5]   :If ~(⊃watch_)∊'#⎕'</code>
<code class="emphasize">→[6]   :AndIf 0&lt;≢1↓⎕RSI</code>
<code class="emphasize">→[7]   :AndIf 0&lt;(⊃1↓⎕RSI).⎕NC watch_</code>
<code class="emphasize">→[8]       watch_←(⊃1↓⎕NSI),'.',watch_</code>
<code> [9]   :EndIf</code>
<code class="emphasize">→[10]  ⎕SIGNAL/{0∧.≠⍵:''⍬ ⋄ ('Not found: ',watch_)6}⎕NC watch_</code>
<code class="emphasize">→[11]  watch←'⎕se'⎕R'⎕SE'⍠('IC' 1)⊣watch_</code>
<code class="emphasize">→[12]  _filename←(739⌶0),'/CodeCoverage-',' '~⍨⍕⎕TS</code>
<code class="emphasize">→[13]  _data←0 2⍴''</code>
<code class="emphasize">→[14]  ∆STOPPED←0</code>
</div>
<code class="header" id="listing_124">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Close &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Close</code>
<code> [1]  :Implements destructor</code>
<code class="emphasize">→[2]  ⎕PROFILE'clear'</code>
</div>
<code class="header" id="listing_125">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.DeleteFiles &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←{htmlFile}DeleteFiles filename</code>
<code> [1]      ⍝ Delete both files created by `CodeCoverage` with the extensions `.profile` and `.cr`.\\</code>
<code> [2]      ⍝ `filename` must be a single filename with path but without extension.\\</code>
<code> [3]      ⍝ `htmlFile` defaults to 0, meaning that `filename` with an extension `.html` will not be deleted.</code>
<code> [4]      ⍝ By specifying a 1 as left argument you can enforce it to be deleted.\\</code>
<code> [5]      ⍝ `R` is an integer with the number of files deleted.</code>
<code> [6]   :Access Public Shared</code>
<code class="emphasize">→[7]   'Right argument must be a simple character vector'Assert(≡filename)∊0 1</code>
<code class="emphasize">→[8]   'Right argument must be a simple character vector'Assert' '=1↑0⍴filename</code>
<code class="emphasize">→[9]   'You MUST not specify a file extension'Assert~'.'∊3⊃⎕NPARTS filename</code>
<code class="emphasize">→[10]  r←0</code>
<code class="emphasize">→[11]  htmlFile←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'htmlFile'</code>
<code class="emphasize">→[12]  'The optional left argument must be 0 (default) or 1'Assert(⊂htmlFile)∊0 1</code>
<code class="emphasize">→[13]  :If IsFile filename,'.profile'</code>
<code class="emphasize">→[14]      r+←⎕NDELETE filename,'.profile'</code>
<code> [15]  :EndIf</code>
<code class="emphasize">→[16]  :If IsFile filename,'.cr'</code>
<code class="emphasize">→[17]      r+←⎕NDELETE filename,'.cr'</code>
<code> [18]  :EndIf</code>
<code class="emphasize">→[19]  :If htmlFile</code>
<code class="emphasize">→[20]  :AndIf IsFile filename,'.html'</code>
<code class="emphasize">→[21]      r+←⎕NDELETE filename,'.html'</code>
<code> [22]  :EndIf</code>
</div>
<code class="header" id="listing_126">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.ProcessDataAndCreateReport &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  htmlFilename←{verbose}ProcessDataAndCreateReport filename</code>
<code> [1]       ⍝ Takes the name of a component file created by first instantiating `CodeCoverage` and then calling</code>
<code> [2]       ⍝ the instance methods `Start`, `Stop` and `Finalise`.\\</code>
<code> [3]       ⍝ The components containing the `⎕PROFILE` data (11 and running) are then read, aggregated, massaged and</code>
<code> [4]       ⍝ finally stored in the tenth component.\\</code>
<code> [5]       ⍝ A report is then generated from the aggregated data and saved on disk.</code>
<code> [6]       ⍝ `filename` is used for both, identifying the DCF file and the HTML, only the extensions are different.\\</code>
<code> [7]       ⍝ The optional left argument `verbose` defaults to 0, which means that the code of the functions and operators</code>
<code> [8]       ⍝ that are only partially covered will to be listed.\\</code>
<code> [9]       ⍝ However, by specifying a 1 as left argument you can force the canonical representations of these functions</code>
<code> [10]      ⍝ and operators to become part of the report with any lines that were not executed highlighted.\\</code>
<code> [11]      ⍝ Note that this function can be called more than once on the same component file. It just wastes some resources</code>
<code> [12]      ⍝ calculating the result again, which is not necessary. However, as long as the number of functions and operators</code>
<code> [13]      ⍝ is not very large that does not matter much. If it does matter then call `ProcessData` and `CreateReport` instead:</code>
<code> [14]      ⍝ that is all this function does anyway.</code>
<code> [15]  :Access Public Shared</code>
<code class="emphasize">→[16]  dcfFilename←(⊃,/2↑⎕NPARTS filename),'.profile'</code>
<code class="emphasize">→[17]  'File not found'⎕SIGNAL 11/⍨0=⎕NEXISTS dcfFilename</code>
<code class="emphasize">→[18]  verbose←{0=⎕NC ⍵:0 ⋄ ⍎⍵}'verbose'</code>
<code class="emphasize">→[19]  {}ProcessData dcfFilename</code>
<code class="emphasize">→[20]  htmlFilename←verbose CreateReport filename</code>
</div>
<code class="header" id="listing_127">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CreateReport &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  filename←{verbose}CreateReport filename</code>
<code> [1]      ⍝ This function creates an HTML file containing a coverage report from the data collected during the execution of an application.\\</code>
<code> [2]      ⍝ You must call `ProcessData` first: this function relies on the data being aggregated.\\</code>
<code> [3]      ⍝ If the file extension of `filename` is not ".html" this will be enforced.\\</code>
<code> [4]      ⍝ The optional ⍺ (`verbose`) defaults to 0, meaning that no code listings are part of the report.</code>
<code> [5]   :Access Public Shared</code>
<code class="emphasize">→[6]   dcfFilename←(⊃,/2↑⎕NPARTS filename),'.profile'</code>
<code class="emphasize">→[7]   'File not found'⎕SIGNAL 11/⍨0=⎕NEXISTS dcfFilename</code>
<code class="emphasize">→[8]   tno←dcfFilename ⎕FSTIE 0</code>
<code class="emphasize">→[9]   watched←⎕FREAD tno,2</code>
<code class="emphasize">→[10]  data←⎕FREAD tno 10</code>
<code class="emphasize">→[11]  watch←⎕FREAD tno 2</code>
<code class="emphasize">→[12]  ignore←⎕FREAD tno 3</code>
<code class="emphasize">→[13]  runs←⎕FREAD tno 4</code>
<code class="emphasize">→[14]  ⎕FUNTIE tno</code>
<code class="emphasize">→[15]  verbose←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'verbose'</code>
<code class="emphasize">→[16]  html←''</code>
<code class="emphasize">→[17]  html,←⊂'&lt;!DOCTYPE html&gt;'</code>
<code class="emphasize">→[18]  html,←⊂'&lt;html lang="en"&gt;'</code>
<code class="emphasize">→[19]  html,←⊂'&lt;head&gt;'</code>
<code class="emphasize">→[20]  html,←⊂'&lt;title&gt;Coverage&lt;/title&gt;'</code>
<code class="emphasize">→[21]  html,←⊂'&lt;meta charset="utf-8"/&gt;'</code>
<code class="emphasize">→[22]  html,←⊂'&lt;style&gt;'</code>
<code class="emphasize">→[23]  html,←GetScreenCss</code>
<code class="emphasize">→[24]  html,←GetPrintCss</code>
<code class="emphasize">→[25]  html,←⊂'&lt;/style&gt;'</code>
<code> [26]       ⍝ Download package with all needed components from DataTables CDN</code>
<code class="emphasize">→[27]  html,←⊂'&lt;link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.11.2/b-2.0.0/b-print-2.0.0/fh-3.1.9/r-2.2.9/datatables.min.css"/&gt;'</code>
<code class="emphasize">→[28]  html,←⊂'&lt;script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.11.2/b-2.0.0/b-print-2.0.0/fh-3.1.9/r-2.2.9/datatables.min.js"&gt;&lt;/script&gt;'</code>
<code class="emphasize">→[29]  html,←⊂'&lt;/head&gt;'</code>
<code class="emphasize">→[30]  html,←⊂'&lt;body&gt;'</code>
<code class="emphasize">→[31]  html,←⊂'&lt;h1 id="top"&gt;Coverage Report&lt;/h1&gt;'</code>
<code class="emphasize">→[32]  :If 0&lt;≢Info</code>
<code class="emphasize">→[33]      html,←⊂'&lt;p class="info"&gt;',(ExchangeHtmlSpecialChars Info),'&lt;/p&gt;'</code>
<code> [34]  :EndIf</code>
<code class="emphasize">→[35]  :If 0=≢data</code>
<code class="emphasize">→[36]      html,←⊂'&lt;p&gt;Nothing to report at all&lt;/p&gt;'</code>
<code> [37]  :Else</code>
<code class="emphasize">→[38]      tally←≢data[;4]</code>
<code class="emphasize">→[39]      caption←⊃,/{⍺,', ',⍵}/watched</code>
<code class="emphasize">→[40]      html,←⊂'&lt;p&gt;Watched: ',(⍕tally),' fns/opr within &lt;code&gt;',caption,'&lt;/code&gt;&lt;/p&gt;'</code>
<code class="emphasize">→[41]      :If 1=≢runs</code>
<code class="emphasize">→[42]          html,←⊂'&lt;p&gt;The test suite was executed once:&lt;/p&gt;'</code>
<code> [43]      :Else</code>
<code class="emphasize">→[44]          html,←⊂'&lt;p&gt;The test suite was executed ',(⍕≢runs),' times:&lt;/p&gt;'</code>
<code> [45]      :EndIf</code>
<code class="emphasize">→[46]      html,←⊂'&lt;table&gt;'</code>
<code class="emphasize">→[47]      html,←⊂'&lt;thead&gt;'</code>
<code class="emphasize">→[48]      html,←⊂{'&lt;tr&gt;',(⊃,/{'&lt;th&gt;',⍵,'&lt;/th&gt;'}¨⍵),'&lt;/tr&gt;'}'Executed at' 'APLVersion' 'Memory (MB)'</code>
<code class="emphasize">→[49]      html,←⊂'&lt;/thead&gt;'</code>
<code class="emphasize">→[50]      html,←⊂'&lt;tbody&gt;'</code>
<code class="emphasize">→[51]      html,←{'&lt;tr&gt;',(⊃,/{'&lt;td&gt;',⍵,'&lt;/td&gt;'}¨⍵),'&lt;/tr&gt;'}¨↓runs</code>
<code class="emphasize">→[52]      html,←⊂'&lt;/tbody&gt;'</code>
<code class="emphasize">→[53]      html,←⊂'&lt;/table&gt;'</code>
<code class="emphasize">→[54]      :If 0&lt;≢∊data[;2 4]</code>
<code class="emphasize">→[55]          html,←⊂'&lt;p&gt;Overall ',(⍕⌊0.5+100×÷/+⌿≢¨data[;2 4]),'% of the testable code is covered.&lt;/p&gt;'</code>
<code class="emphasize">→[56]          html,←⊂'&lt;p&gt;(Comment lines, empty lines, all &lt;code&gt;:End&lt;/code&gt;* lines etc. are ignored)&lt;/p&gt;'</code>
<code> [57]      :EndIf</code>
<code class="emphasize">→[58]      html,←⊂'&lt;p&gt;',(⍕data[;3]+.=100),' of the fns/opr are 100% covered.&lt;/p&gt;'</code>
<code class="emphasize">→[59]      b←~data[;3]∊0 100</code>
<code class="emphasize">→[60]      data←{⍵[⍋⍵[;3];]}data</code>
<code class="emphasize">→[61]      html,←⊂'&lt;div id="partly-covered" class="keep-together"&gt;'</code>
<code class="emphasize">→[62]      html,←⊂'&lt;table id="percent"&gt;'</code>
<code class="emphasize">→[63]      html,←⊂'&lt;thead&gt;'</code>
<code class="emphasize">→[64]      align←'left' 'left' 'left' 'right'</code>
<code class="emphasize">→[65]      html,←⊂{'&lt;tr&gt;',⍵,'&lt;/tr&gt;'}⊃,/align{'&lt;th style="text-align:',⍺,';"&gt;',⍵,'&lt;/th&gt;'}¨'Function/Operator' 'Lines not executed' 'Coverage' '≢'</code>
<code class="emphasize">→[66]      html,←⊂'&lt;/thead&gt;'</code>
<code class="emphasize">→[67]      html,←⊂'&lt;tbody&gt;'</code>
<code class="emphasize">→[68]      :If 0&lt;≢buff←((≢data),3)⍴0</code>
<code class="emphasize">→[69]          data[;2]←data[;4]~¨data[;2]   ⍝ From "executed" to "not executed"</code>
<code class="emphasize">→[70]          buff[;1]←{4&gt;≢⍵:{0=≢⍵:⍵ ⋄ ⊃{⍺,', ',⍵}/⍵}⍕¨⍵ ⋄ (⍕≢⍵),'←≢',Shorten ⍵}¨data[;2]</code>
<code class="emphasize">→[71]          buff[;2]←data[;3]</code>
<code class="emphasize">→[72]          buff[;3]←⍕∘≢¨data[;4]</code>
<code class="emphasize">→[73]          :If verbose</code>
<code class="emphasize">→[74]              linkAndName←data[;1]{'&lt;a href="#listing_',⍵,'" title="Link to listing"&gt;',⍺,'&lt;/a&gt;'}∘⍕¨⍳≢data</code>
<code class="emphasize">→[75]              buff3←linkAndName{'&lt;td&gt;',⍺,'&lt;/td&gt;&lt;td&gt;',(1⊃⍵),'&lt;/td&gt;&lt;td&gt;',(⍕2⊃⍵),'&lt;/td&gt;&lt;td&gt;',(3⊃⍵),'&lt;/td&gt;'}¨↓buff</code>
<code> [76]          :Else</code>
<code class="emphasize">→[77]              buff3←data[;1]{'&lt;td&gt;',⍺,'&lt;/td&gt;&lt;td&gt;',(1⊃⍵),'&lt;/td&gt;&lt;td&gt;',(⍕2⊃⍵),'&lt;/td&gt;&lt;td&gt;',(3⊃⍵),'&lt;/td&gt;'}¨↓buff</code>
<code> [78]          :EndIf</code>
<code class="emphasize">→[79]          html,←(↓buff){'&lt;tr',({⍵=3:'' ⋄ ' class="',(⍵⊃'unc' 'fullyC'),'overed"' ⋄ }0 100⍳2⊃⍺),'&gt;',⍵,'&lt;/tr&gt;'}¨buff3</code>
<code> [80]      :EndIf</code>
<code class="emphasize">→[81]      html,←⊂'&lt;/tbody&gt;'</code>
<code class="emphasize">→[82]      html,←⊂'&lt;/table&gt;'</code>
<code class="emphasize">→[83]      html,←⊂'&lt;/div&gt;'</code>
<code class="emphasize">→[84]      html,←AddJavaScript buff</code>
<code class="emphasize">→[85]      :If verbose</code>
<code class="emphasize">→[86]          html,←⊂'&lt;h2&gt;Listings&lt;/h2&gt;'</code>
<code class="emphasize">→[87]          html,←CreateListingForFnsAndOpr data</code>
<code> [88]      :EndIf</code>
<code> [89]  :EndIf</code>
<code class="emphasize">→[90]  html,←⊂'&lt;div id="footer"&gt;'</code>
<code class="emphasize">→[91]  html,←⊂'&lt;hr&gt;'</code>
<code class="emphasize">→[92]  html,←⊂'&lt;p&gt;Created by "CodeCoverage" version ',(2⊃Version),' from ',(3⊃Version),'&lt;/p&gt;'</code>
<code class="emphasize">→[93]  html,←⊂'&lt;/div&gt;'</code>
<code class="emphasize">→[94]  html,←⊂''</code>
<code class="emphasize">→[95]  html,←⊂'&lt;/body&gt;'</code>
<code class="emphasize">→[96]  html,←⊂'&lt;/html&gt;'</code>
<code class="emphasize">→[97]  filename←(⊃,/2↑⎕NPARTS filename),'.html'</code>
<code class="emphasize">→[98]  (⊂html)⎕NPUT filename 1</code>
</div>
<code class="header" id="listing_128">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.AddJavaScript &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  html←AddJavaScript data</code>
<code class="emphasize">→[1]   html←''</code>
<code class="emphasize">→[2]   →(0=≢data)/0</code>
<code class="emphasize">→[3]   html,←⊂'&lt;script&gt;'</code>
<code class="emphasize">→[4]   html,←⊂'$(document).ready(function() {'</code>
<code class="emphasize">→[5]   html,←⊂'    var oTable;'</code>
<code class="emphasize">→[6]   html,←⊂'    oTable = $("#percent").DataTable( {'</code>
<code class="emphasize">→[7]   html,←⊂'        paging:   false,'</code>
<code class="emphasize">→[8]   html,←⊂'        ordering: true,'</code>
<code class="emphasize">→[9]   html,←⊂'        info:     true,'</code>
<code class="emphasize">→[10]  html,←⊂'        fixedHeader: true,'</code>
<code> [11] ⍝     html,←⊂'        order: [2,"desc"],'</code>
<code class="emphasize">→[12]  html,←⊂'        order: [2,"asc"],'</code>
<code class="emphasize">→[13]  html,←⊂'        dom: "Bft",'</code>
<code class="emphasize">→[14]  html,←⊂'        drawCallback: function( settings ) {'</code>
<code class="emphasize">→[15]  html,←⊂'             var api = this.api();'</code>
<code class="emphasize">→[16]  html,←⊂'             $(''.header[id^="listing_"]'').next().addBack().css("display","none");'  ⍝ hide all lines</code>
<code class="emphasize">→[17]  html,←⊂'             api.rows( {page:"current"} ).data().each(function(data){'</code>
<code class="emphasize">→[18]  html,←⊂'              id = data[0];'</code>
<code class="emphasize">→[19]  html,←⊂'              id = id.match(/"(\#.*?)"/);'</code>
<code class="emphasize">→[20]  html,←⊂'              if (id){$(id[1]).next().addBack().css("display","block");}'  ⍝ show header and following code</code>
<code class="emphasize">→[21]  html,←⊂'             })'</code>
<code class="emphasize">→[22]  html,←⊂'        },      '</code>
<code class="emphasize">→[23]  html,←⊂'        buttons: ['</code>
<code class="emphasize">→[24]  html,←AddJavaScriptButton('Partly covered' '50%'(+/~data[;2]∊0 100)'^(?!(0%|100%)).*')</code>
<code class="emphasize">→[25]  html,←AddJavaScriptButton('Uncovered' '0%'(+/data[;2]=0)'^0%')</code>
<code class="emphasize">→[26]  html,←AddJavaScriptButton('Fully covered' '100%'(+/data[;2]=100)'100%')</code>
<code class="emphasize">→[27]  html,←AddJavaScriptButton('All' 'all'(≢data)'.')</code>
<code class="emphasize">→[28]  html,←⊂'    ],'</code>
<code class="emphasize">→[29]  html,←⊂' '</code>
<code class="emphasize">→[30]  html,←⊂'        columnDefs: ['</code>
<code class="emphasize">→[31]  html,←⊂'            {className: "align-right", targets: [2,3]'</code>
<code class="emphasize">→[32]  html,←⊂'            },'</code>
<code class="emphasize">→[33]  html,←⊂'            {'</code>
<code class="emphasize">→[34]  html,←⊂'                render: function ( data, type, row, meta ) {'</code>
<code class="emphasize">→[35]  html,←⊂'                            return data+"%" ;        '</code>
<code class="emphasize">→[36]  html,←⊂'                        },'</code>
<code class="emphasize">→[37]  html,←⊂'                targets: 2'</code>
<code class="emphasize">→[38]  html,←⊂'            }'</code>
<code class="emphasize">→[39]  html,←⊂'        ]             '</code>
<code class="emphasize">→[40]  html,←⊂'    } );'</code>
<code class="emphasize">→[41]  html,←⊂'    oTable.button(0).trigger();'</code>
<code class="emphasize">→[42]  html,←⊂''</code>
<code class="emphasize">→[43]  html,←⊂'} );    '</code>
<code class="emphasize">→[44]  html,←⊂'&lt;/script&gt;'</code>
</div>
<code class="header" id="listing_129">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.AddJavaScriptButton &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  html←AddJavaScriptButton(caption percent noOf search)</code>
<code class="emphasize">→[1]   html←''</code>
<code class="emphasize">→[2]   html,←⊂'        {'</code>
<code class="emphasize">→[3]   html,←⊂'            text: "',caption,' (',(⍕noOf),')",'</code>
<code class="emphasize">→[4]   html,←⊂'            titleAttr: "',percent,'",'</code>
<code class="emphasize">→[5]   html,←⊂'            className: "active",'</code>
<code class="emphasize">→[6]   html,←⊂'            action: function ( e, dt, node, config ) {'</code>
<code class="emphasize">→[7]   html,←⊂'                var text = this.text();'</code>
<code class="emphasize">→[8]   html,←⊂'                var search = "',search,'";'</code>
<code class="emphasize">→[9]   html,←⊂'                oTable.column(2)'</code>
<code class="emphasize">→[10]  html,←⊂'                    .search(search,true,false,false)'</code>
<code class="emphasize">→[11]  html,←⊂'                    .draw();'</code>
<code class="emphasize">→[12]  html,←⊂'                $(".dt-buttons button").removeClass("active");'</code>
<code class="emphasize">→[13]  html,←⊂'                this.active( true );'</code>
<code class="emphasize">→[14]  html,←⊂'            }'</code>
<code class="emphasize">→[15]  html,←⊂'        },'</code>
</div>
<code class="header" id="listing_130">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.ProcessData &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {(details watch)}←ProcessData filename</code>
<code> [1]       ⍝ Takes the name of a component file created by calling `Start`, `Stop` and `Finalise`.\\</code>
<code> [2]       ⍝ The components are read, aggregated and massaged and finally stored in the tenth component,</code>
<code> [3]       ⍝ but the aggregated data is also returned as a shy result along with the watched data.</code>
<code> [4]   :Access Public Shared</code>
<code class="emphasize">→[5]   dcfFilename←(⊃,/2↑⎕NPARTS filename),'.profile'</code>
<code class="emphasize">→[6]   'File not found'⎕SIGNAL 11/⍨0=⎕NEXISTS dcfFilename</code>
<code class="emphasize">→[7]   tno←dcfFilename ⎕FSTIE 0</code>
<code class="emphasize">→[8]   watched←⎕FREAD tno,2</code>
<code class="emphasize">→[9]   details←watch←⍬</code>
<code class="emphasize">→[10]  :If 0&lt;≢∊data←tno{⎕FREAD ⍺,⍵}¨9↓⍳-/⌽2↑⎕FSIZE tno</code>
<code class="emphasize">→[11]      watch←⎕FREAD tno 2</code>
<code class="emphasize">→[12]      ignore←⎕FREAD tno 3</code>
<code class="emphasize">→[13]      data←⊃⍪/data</code>
<code class="emphasize">→[14]      data[;2]←(data[;2]∊¨data[;4])/¨data[;2]</code>
<code class="emphasize">→[15]      details←data[;1]{(⊃⍺)(∪⊃,/⍵)}⌸data[;2]</code>
<code class="emphasize">→[16]      where←data[;1]⍳details[;1]</code>
<code class="emphasize">→[17]      details,←data[where;3 4]</code>
<code class="emphasize">→[18]      details(RemoveToBeIgnored)←ignore</code>
<code class="emphasize">→[19]      b←details[;3]≠100</code>
<code class="emphasize">→[20]      :If ∨/b</code>
<code class="emphasize">→[21]          (b/details[;3])←100⌊⌊0.5+100×÷/≢¨b⌿details[;2 4]         ⍝ Recalculate percentage</code>
<code> [22]      :EndIf</code>
<code class="emphasize">→[23]      details ⎕FREPLACE tno 10</code>
<code> [24]  :EndIf</code>
<code class="emphasize">→[25]  ⎕FUNTIE tno</code>
</div>
<code class="header" id="listing_131">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Finalise &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>   r←Finalise dummy</code>
<code> [1]       ⍝ Call this when all the code you want to check on has been executed`.\\</code>
<code> [2]       ⍝ It examines all functions and operators that are only partially covered, and saves the lines that</code>
<code> [3]       ⍝ were executed as well as the lines that could have been executed.\\</code>
<code> [4]       ⍝ For the latter, a number of lines are ignored, such as empty lines, comment lines and all lines</code>
<code> [5]       ⍝ that contain meaningless code (in terms of being executed), such as all `:End*` lines etc.\\</code>
<code> [6]       ⍝ Note that the collected data is appended to the DCF file associated with the instance. Therefore</code>
<code> [7]       ⍝ you can move the DCF file to another platform and re-run the code under the supervision of `CodeCoverage`</code>
<code> [8]       ⍝ again, for example.</code>
<code> [9]    :Access Public Instance</code>
<code class="emphasize">→[10]   r←⍬</code>
<code class="emphasize">→[11]   {Stop ⍵}⍣(~⊃∆STOPPED)⊣⍬</code>
<code class="emphasize">→[12]   _data←_data[;1]{(⊃⍺)(∪⊃,/⍵)}⌸_data[;2]</code>
<code class="emphasize">→[13]   names←CollectDataForCoverageReport _watch</code>
<code class="emphasize">→[14]   details←0 4⍴⍬</code>
<code class="emphasize">→[15]   regExPattern←'^ *:else$' '^ *:section$'                       ⍝ Lines that contain just these patterns...</code>
<code class="emphasize">→[16]   regExPattern,←'^ *:access ' '^ *:field ' '^ *:attribute'      ⍝ ... or these are to be ignored.</code>
<code class="emphasize">→[17]   regExPattern,←⊂'^ *:end[a-zA-Z]*$'                            ⍝ All sorts of :End* statements are not of interest either</code>
<code class="emphasize">→[18]   regExPattern,←⊂'^ *:implements'</code>
<code class="emphasize">→[19]   regExPattern,←⊂'^ *:signature'</code>
<code class="emphasize">→[20]   regExPattern,←⊂'^ *:section'</code>
<code class="emphasize">→[21]   filename←(⊃,/2↑⎕NPARTS _filename),'.profile'</code>
<code class="emphasize">→[22]   crF←(∊2↑⎕NPARTS filename),'.cr'                               ⍝ this file has the CRs of everything we watched</code>
<code class="emphasize">→[23]   :If crX←⎕NEXISTS crF</code>
<code class="emphasize">→[24]       crT←crF ⎕FTIE 0</code>
<code class="emphasize">→[25]       crN←⎕FREAD crT,1                                          ⍝ the list of names for which we have CRs in component 1+index</code>
<code> [26]   :Else</code>
<code class="emphasize">→[27]       crT←crF ⎕FCREATE 0</code>
<code class="emphasize">→[28]       (1 3⍴0 ¯1 0)⎕FSTAC crT                                    ⍝ Everybody everything; important for non-Windows platforms</code>
<code class="emphasize">→[29]       crN←⍬</code>
<code class="emphasize">→[30]       ⍬ ⎕FAPPEND crT</code>
<code> [31]   :EndIf</code>
<code> [32]  </code>
<code class="emphasize">→[33]   :For i :In ⍳≢names</code>
<code class="emphasize">→[34]       name←i⊃names</code>
<code class="emphasize">→[35]       :If (≢_data)≥row←_data[;1]⍳⊂name</code>
<code class="emphasize">→[36]           linesCovered←2⊃_data[row;]</code>
<code> [37]       :Else</code>
<code class="emphasize">→[38]           linesCovered←⍬</code>
<code> [39]       :EndIf</code>
<code> [40]  </code>
<code class="emphasize">→[41]       :If {~3 4∊⍨10×⍵-⌊⍵}⎕NC⊆name                               ⍝ Ignore derived functions and derived operators</code>
<code class="emphasize">→[42]       :AndIf 2≠|≡buff←180⌶name                                  ⍝ For weird staff (like function operands of an operator) we need to check</code>
<code class="emphasize">→[43]           :If 0=≢body←{⍵↓⍨-+/∧\' '=⌽⍵}¨↓buff                    ⍝ True for localized dfns</code>
<code> [44]              ⍝ ---------- TODO</code>
<code> [45]              ⍝     ∘∘∘                                               ⍝TODO⍝ We cannot get the body of that dfn with ⎕CR or 180⌶, so we need to take other measures</code>
<code> [46]              ⍝ ----------</code>
<code> [47]           :EndIf</code>
<code class="emphasize">→[48]           :If crX</code>
<code class="emphasize">→[49]               :If (⊂name)∊crN</code>
<code class="emphasize">→[50]                   :If ~body CompareCR bodyC←⎕FREAD crT,1+crN⍳⊂name</code>
<code class="emphasize">→[51]                       ⎕←'Current definition of function "',name,'" does not match the one captured earlier - do not trust the results' ⍝ ⎕SIGNAL?!</code>
<code> [52]                   :EndIf</code>
<code> [53]               :Else</code>
<code class="emphasize">→[54]                   ⎕←'Found new function "',name,'" that was not captured in previous runs - do not trust the results!'</code>
<code> [55]               :EndIf</code>
<code> [56]           :Else</code>
<code class="emphasize">→[57]               crN,←⊂name</code>
<code class="emphasize">→[58]               body ⎕FAPPEND crT</code>
<code> [59]           :EndIf</code>
<code class="emphasize">→[60]           body←'''[^'']*'''⎕R''⍠('Greedy' 0)⊣body               ⍝ Remove text</code>
<code class="emphasize">→[61]           body←'⍝.*$'⎕R''⍠('Greedy' 0)⊣body                     ⍝ Remove comments</code>
<code class="emphasize">→[62]           lines←¯1+⍳≢body</code>
<code class="emphasize">→[63]           :If '}'=⊃{⍵↓⍨+/∧\' '=⍵}⊃¯1↑body                       ⍝ Is it possibly a dfn? (⎕NC does only work on stuff that's not part of a class!)</code>
<code class="emphasize">→[64]           :AndIf ∨/(({⍵↑⍨1+-{⍵⍳'.'}⌽⍵}name),'←{')⍷1⊃body        ⍝ First line carries &lt;name&gt;←{   - then it must be a dfn</code>
<code class="emphasize">→[65]           :AndIf (,'}')≡¯1↑' '~⍨⊃¯1↑body</code>
<code class="emphasize">→[66]               (body lines)←(0=≢{⍵↓⍨⍵⍳'{'}⊃body)↓¨body lines     ⍝ Drop first line if it is nothing but &lt;name&gt;←{</code>
<code class="emphasize">→[67]               (body lines)←(-(,'}')≡' '~⍨⊃¯1↑body)↓¨body lines  ⍝ Drop last line if it is nothing but a closing "`}`</code>
<code> [68]           :Else</code>
<code class="emphasize">→[69]               (body lines)←1↓¨body lines                        ⍝ Always drop first line in case of a tfn</code>
<code class="emphasize">→[70]               bool←regExPattern∘{0=≢⍺ ⎕S 0⍠('IC' 1)('Greedy' 0)⊣⍵}¨body</code>
<code class="emphasize">→[71]               bool∧←'}'≠⊃∘{⍵↓⍨+/∧\' '=⍵}¨body                   ⍝ Get rid of closing lines of local dfns - otherwise they will be reported</code>
<code class="emphasize">→[72]               (body lines)←bool∘/¨body lines</code>
<code> [73]           :EndIf</code>
<code class="emphasize">→[74]           (body lines)←(0&lt;≢¨body~¨' ')∘/¨body lines             ⍝ Remove empty lines</code>
<code class="emphasize">→[75]           details⍪←name linesCovered(100-⌊0.5+100×(≢lines~linesCovered)÷≢lines)lines</code>
<code> [76]       :EndIf</code>
<code> [77]  </code>
<code> [78]   :EndFor</code>
<code> [79]  </code>
<code class="emphasize">→[80]   details←('.'≠⊃¨¯1↑¨details[;1])⌿details</code>
<code class="emphasize">→[81]   :If ~crX</code>
<code class="emphasize">→[82]       crN ⎕FREPLACE crT,1</code>
<code> [83]   :EndIf</code>
<code class="emphasize">→[84]   ⎕FUNTIE crT</code>
<code class="emphasize">→[85]   :If ⎕NEXISTS filename</code>
<code class="emphasize">→[86]       tno←filename ⎕FSTIE 0</code>
<code class="emphasize">→[87]       (∪watch,⎕FREAD tno 2)⎕FREPLACE tno 2</code>
<code class="emphasize">→[88]       (∪ignore,⎕FREAD tno 3)⎕FREPLACE tno 3</code>
<code class="emphasize">→[89]       (({0=≢d←⎕FREAD tno 4:0 3⍴'' ⋄ d}⍬)⍪CollectInformation ⍬)⎕FREPLACE tno 4 ⍝ Old versions might still carry an empty forth component</code>
<code class="emphasize">→[90]       details ⎕FAPPEND tno</code>
<code class="emphasize">→[91]       ⎕FUNTIE tno</code>
<code> [92]   :Else</code>
<code class="emphasize">→[93]       3 ⎕MKDIR 1⊃⎕NPARTS filename</code>
<code class="emphasize">→[94]       tno←filename ⎕FCREATE 0</code>
<code class="emphasize">→[95]       (1 3⍴0 ¯1 0)⎕FSTAC tno                                    ⍝ Everybody everything; important for non-Windows platforms</code>
<code class="emphasize">→[96]       d←''</code>
<code class="emphasize">→[97]       d,←⊂'Documentation regarding the contents of this file'</code>
<code class="emphasize">→[98]       d,←⊂(⍴1⊃d)⍴'-'</code>
<code class="emphasize">→[99]       d,←⊂'* The first component contains this documentation'</code>
<code class="emphasize">→[100]      d,←⊂'* The second one contains what has been watched; this will eventually be used to'</code>
<code class="emphasize">→[101]      d,←⊂'  compile the caption for the coverage report.'</code>
<code class="emphasize">→[102]      d,←⊂'* The third component holds the names of functions and operators to be ignored.'</code>
<code class="emphasize">→[103]      d,←⊂'* The fourth component holds a matrix with as many rows as test runs have been performed:'</code>
<code class="emphasize">→[104]      d,←⊂'  [;1] Timestamp ("YYYY-MM-DD hh:mm:ss")'</code>
<code class="emphasize">→[105]      d,←⊂'  [;2] The result of the "APLVersion" property + info about the edition'</code>
<code class="emphasize">→[106]      d,←⊂'  [;3] ⎕WA in KB'</code>
<code class="emphasize">→[107]      d,←⊂'* Components five to nine are reserved'</code>
<code class="emphasize">→[108]      d,←⊂'* The tenth one is originally empty. when "ProcessData" or "ProcessDataAndCreateReport"'</code>
<code class="emphasize">→[109]      d,←⊂'  is called the resulting data is written to this component.'</code>
<code class="emphasize">→[110]      d,←⊂'After the tenth one all components carry a matrix with n rows and 4 columns. n is'</code>
<code class="emphasize">→[111]      d,←⊂'determined by the number of fns/oprs involved. The columns:'</code>
<code class="emphasize">→[112]      d,←⊂'[;1] The name of the function or operator'</code>
<code class="emphasize">→[113]      d,←⊂'[;2] Either empty or a vector of line numbers there were *not* executed.'</code>
<code class="emphasize">→[114]      d,←⊂'     Empty in case none or all lines were executed.'</code>
<code class="emphasize">→[115]      d,←⊂'[;3] Coverage percentage.'</code>
<code class="emphasize">→[116]      d,←⊂'[;4] Total number of lines that can be expected to be tested.'</code>
<code class="emphasize">→[117]      d ⎕FAPPEND tno</code>
<code class="emphasize">→[118]      watch ⎕FAPPEND tno</code>
<code class="emphasize">→[119]      ignore ⎕FAPPEND tno</code>
<code class="emphasize">→[120]      (CollectInformation ⍬)⎕FAPPEND tno</code>
<code class="emphasize">→[121]      tno{⍵ ⎕FAPPEND ⍺}¨(9-¯1+2⊃⎕FSIZE tno)⍴⊂''                 ⍝ Fill up to the tenth component</code>
<code class="emphasize">→[122]      details ⎕FAPPEND tno</code>
<code class="emphasize">→[123]      ⎕FUNTIE tno</code>
<code> [124]  :EndIf</code>
<code class="emphasize">→[125]  r←filename</code>
<code> [126]       ⍝Done</code>
</div>
<code class="header" id="listing_132">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Start &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Start dummy</code>
<code> [1]       ⍝ Execute `⎕PROFILE'start' 'coverage'`</code>
<code> [2]  :Access Public Instance</code>
<code class="emphasize">→[3]  r←⍬</code>
<code class="emphasize">→[4]  ⎕PROFILE'clear'</code>
<code class="emphasize">→[5]  ⎕PROFILE'start' 'coverage'</code>
<code class="emphasize">→[6]  ∆STOPPED←0</code>
</div>
<code class="header" id="listing_133">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.Stop &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Stop dummy</code>
<code> [1]     ⍝ Stores all the data collected since `Start` was invoked, and then executes `⎕PROFILE'clear'`</code>
<code> [2]  :Access Public Instance</code>
<code class="emphasize">→[3]  r←⍬</code>
<code class="emphasize">→[4]  buff←(⎕PROFILE'data')[;1 2]</code>
<code class="emphasize">→[5]  ⎕PROFILE'clear'</code>
<code class="emphasize">→[6]  buff←(buff[;2]≢¨⊂⍬)⌿buff                                 ⍝ Fns as such are not of any interest, only lines</code>
<code class="emphasize">→[7]  _data⍪←(⊃∨/watch{((1+≢¨⍺)↑¨¨⊂⍵)∊¨⊂¨⍺,¨'.'}buff[;1])⌿buff ⍝ Drop everthing that's not watched</code>
<code class="emphasize">→[8]  ∆STOPPED←1</code>
</div>
<code class="header" id="listing_134">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CreateListingForFnsAndOpr &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  html←CreateListingForFnsAndOpr partlyCovered</code>
<code class="emphasize">→[1]   cr←⎕NS''</code>
<code class="emphasize">→[2]   html←''</code>
<code class="emphasize">→[3]   links←'&lt;a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document"&gt;&amp;#8607;&lt;/a&gt;'</code>
<code class="emphasize">→[4]   links,←'&lt;a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of ''Partly-covered''"&gt;↑&lt;/a&gt;'</code>
<code class="emphasize">→[5]   cr.filename←(⊃,/2↑⎕NPARTS filename),'.cr'             ⍝ this file has the CRs of everything we watched</code>
<code class="emphasize">→[6]   :If ⎕NEXISTS cr.filename</code>
<code class="emphasize">→[7]       cr.tno←cr.filename ⎕FTIE 0</code>
<code class="emphasize">→[8]       cr.names←⎕FREAD cr.tno,1</code>
<code class="emphasize">→[9]       ⎕←'tied ',cr.filename,' for listings'</code>
<code> [10]  :Else</code>
<code class="emphasize">→[11]      ⎕←'Did not find file "',cr.filename,'" with CRs collected by fn "Finalize" - will try to work without it'</code>
<code class="emphasize">→[12]      cr.tno←0</code>
<code> [13]  :EndIf</code>
<code class="emphasize">→[14]  :For i :In ⍳≢partlyCovered</code>
<code class="emphasize">→[15]      (name lines percent testable)←partlyCovered[i;1 2 3 4]</code>
<code class="emphasize">→[16]      :If (cr.tno=0)∨~(⊂name)∊cr.names</code>
<code class="emphasize">→[17]          body←{⍵↓⍨-+/∧\' '=⌽⍵}¨↓180⌶name</code>
<code> [18]      :Else</code>
<code class="emphasize">→[19]          :If cr.tno∊⎕FNUMS</code>
<code class="emphasize">→[20]              body←⎕FREAD cr.tno,1+cr.names⍳⊂name</code>
<code> [21]          :Else</code>
<code class="emphasize">→[22]              body←⍬</code>
<code> [23]          :EndIf</code>
<code> [24]      :EndIf</code>
<code class="emphasize">→[25]      :If 0&lt;≢body</code>
<code class="emphasize">→[26]          body←ExchangeHtmlSpecialChars body</code>
<code class="emphasize">→[27]          (1⊃body)←{⍵↑⍨¯1+⌊/⍵⍳'⍝;'}1⊃body</code>
<code class="emphasize">→[28]          width←≢⍕≢body</code>
<code class="emphasize">→[29]          html2←((⊂(width-1)⍴' '),(width+4){⍺↑' [',(⍕⍵),']'}¨¯1↓⍳≢body),¨body,¨⊂'&lt;/code&gt;'</code>
<code class="emphasize">→[30]          :If 0&lt;≢lines</code>
<code class="emphasize">→[31]              (⊃¨html2[lines+1])←'→'   ⍝TODO⍝ Check!</code>
<code> [32]          :EndIf</code>
<code class="emphasize">→[33]          buff←(≢body)⍴⊂'&lt;code&gt;'</code>
<code class="emphasize">→[34]          buff[lines+1]←⊂'&lt;code class="emphasize"&gt;'</code>
<code class="emphasize">→[35]          html2←buff,¨html2</code>
<code class="emphasize">→[36]          (1⊃html2)←'&lt;div class="code-block"&gt;',1⊃html2</code>
<code class="emphasize">→[37]          html2,←⊂'&lt;/div&gt;'</code>
<code class="emphasize">→[38]          html2←(⊂'&lt;code class="header" id="listing_',(⍕i),'"&gt;',name,(' &amp;mdash; ',(⍕percent),'%'),links,'&lt;/code&gt;'),html2</code>
<code class="emphasize">→[39]          html,←html2</code>
<code> [40]      :Else</code>
<code class="emphasize">→[41]          html2←⊂'&lt;div class="code-block missing"&gt;Could not get canonical representation.&lt;/div&gt;'</code>
<code class="emphasize">→[42]          html2←(⊂'&lt;code class="header" id="listing_',(⍕i),'"&gt;',name,(' &amp;mdash; ',(⍕percent),'%'),links,'&lt;/code&gt;'),html2</code>
<code class="emphasize">→[43]          html,←html2</code>
<code> [44]      :EndIf</code>
<code> [45]  :EndFor</code>
<code class="emphasize">→[46]  ⎕FUNTIE cr.tno</code>
<code class="emphasize">→[47]  ⎕DL 0.1</code>
</div>
<code class="header" id="listing_135">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.GetScreenCss &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←GetScreenCss</code>
<code class="emphasize">→[1]   r←''</code>
<code class="emphasize">→[2]   r,←⊂'@media screen{'</code>
<code class="emphasize">→[3]   r,←⊂'    html {background-color: #FFFFF0;}'</code>
<code class="emphasize">→[4]   r,←⊂'body {'</code>
<code class="emphasize">→[5]   r,←⊂'    font-size: 16px;'</code>
<code class="emphasize">→[6]   r,←⊂'    font-family : Verdana, "Bitstream Vera Sans", "DejaVu Sans", Tahoma, Geneva, Arial, Sans-serif;'</code>
<code class="emphasize">→[7]   r,←⊂'    margin: 1em;'</code>
<code class="emphasize">→[8]   r,←⊂'}'</code>
<code class="emphasize">→[9]   r,←⊂'th, td {padding: 5px 10px;}'</code>
<code class="emphasize">→[10]  r,←⊂'th {text-align: left;}'</code>
<code class="emphasize">→[11]  r,←⊂'h1, h2, h3, h4, h5, h6 {color: #424242;}'</code>
<code class="emphasize">→[12]  r,←⊂'h1 {font-size: 22px;}'</code>
<code class="emphasize">→[13]  r,←⊂'h2 {font-size: 18px; margin-top: 2em; margin-bottom:0.3em;}'</code>
<code class="emphasize">→[14]  r,←⊂'tbody tr:nth-child(even) {background-color: #F0F0F0;}'</code>
<code class="emphasize">→[15]  r,←⊂'tbody tr:nth-child(odd) {background-color: #FAFAFA;}'</code>
<code class="emphasize">→[16]  r,←⊂'th {background-color: #E6E6E6;color: #424242;}'</code>
<code class="emphasize">→[17]  r,←⊂'table {border: silver 1px solid; font-size: 14px;font-family: APLFont, monospace;}'</code>
<code class="emphasize">→[18]  r,←⊂'code , code a {font-size: 14px; font-family: APLFont, monospace;}'</code>
<code class="emphasize">→[19]  r,←⊂'code.header {'</code>
<code class="emphasize">→[20]  r,←⊂'    font-size: 16px; '</code>
<code class="emphasize">→[21]  r,←⊂'    font-family: APLFont, monospace; '</code>
<code class="emphasize">→[22]  r,←⊂'    margin: 1.5em 0.5em 0 0.5em; '</code>
<code class="emphasize">→[23]  r,←⊂'    padding:0;'</code>
<code class="emphasize">→[24]  r,←⊂'    display: block;'</code>
<code class="emphasize">→[25]  r,←⊂'}'</code>
<code class="emphasize">→[26]  r,←⊂'div.code-block {'</code>
<code class="emphasize">→[27]  r,←⊂'    border: 1px silver dashed;'</code>
<code class="emphasize">→[28]  r,←⊂'    background-color: #F2F2F2;'</code>
<code class="emphasize">→[29]  r,←⊂'    display: block;'</code>
<code class="emphasize">→[30]  r,←⊂'    margin: 0.5em 0.5em 0.5em 0.5em;'</code>
<code class="emphasize">→[31]  r,←⊂'    padding: 0.5em;'</code>
<code class="emphasize">→[32]  r,←⊂'}'</code>
<code class="emphasize">→[33]  r,←⊂'div.code-block.missing {'</code>
<code class="emphasize">→[34]  r,←⊂'    background-color: #fa605254;'</code>
<code class="emphasize">→[35]  r,←⊂'}'</code>
<code class="emphasize">→[36]  r,←⊂'div.code-block code {display: block; white-space: pre-wrap; margin:0; padding:0; word-wrap: break-word;}'</code>
<code class="emphasize">→[37]  r,←⊂'.emphasize { font-weight: 800;}'</code>
<code class="emphasize">→[38]  r,←⊂'ul li, ol li {margin: 0.7em 0.2em;}'</code>
<code class="emphasize">→[39]  r,←⊂'.float-right {float:right;}'</code>
<code class="emphasize">→[40]  r,←⊂'.no-underline {    text-decoration :none;}'</code>
<code class="emphasize">→[41]  r,←⊂'.top-links {font-size:20px; padding-left: 0.6em;}'</code>
<code class="emphasize">→[42]  r,←⊂'.align-right {text-align: right;}'</code>
<code class="emphasize">→[43]  r,←⊂'#footer hr {margin-top:1.5em;}'</code>
<code class="emphasize">→[44]  r,←⊂'#footer p {margin-top:5px; padding-top:0; font-size: 9px;}'</code>
<code class="emphasize">→[45]  r,←⊂'@font-face {'</code>
<code class="emphasize">→[46]  r,←⊂'        font-family: "APLFont";'</code>
<code class="emphasize">→[47]  r,←⊂'    src:'</code>
<code class="emphasize">→[48]  r,←⊂'        local("APL385 Unicode"),'</code>
<code class="emphasize">→[49]  r,←⊂'        url("https://misc.aplteam.com/apl385.ttf") format("truetype");'</code>
<code class="emphasize">→[50]  r,←⊂'}'</code>
<code class="emphasize">→[51]  r,←⊂'.info {border: 1px silver dashed; background-color: #F2F2F2;margin: 0.5em; padding: 0.5em;}'</code>
<code class="emphasize">→[52]  r,←⊂'}'</code>
</div>
<code class="header" id="listing_136">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.GetPrintCss &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←GetPrintCss</code>
<code class="emphasize">→[1]   r←''</code>
<code class="emphasize">→[2]   r,←⊂'@media print{@page {size: portrait}'</code>
<code class="emphasize">→[3]   r,←⊂'@page {'</code>
<code class="emphasize">→[4]   r,←⊂'    margin: 1cm 1cm 1cm 1.75cm;'</code>
<code class="emphasize">→[5]   r,←⊂'    @bottom-right {'</code>
<code class="emphasize">→[6]   r,←⊂'        content: counter(page) " / " counter(pages);'</code>
<code class="emphasize">→[7]   r,←⊂'  }'</code>
<code class="emphasize">→[8]   r,←⊂'}'</code>
<code class="emphasize">→[9]   r,←⊂'body {'</code>
<code class="emphasize">→[10]  r,←⊂'    font: 12pt "Times New Roman", Times, serif;'</code>
<code class="emphasize">→[11]  r,←⊂'    line-height: 1.2;'</code>
<code class="emphasize">→[12]  r,←⊂'     /* CSS3 filter, at the moment Webkit only. Prefix it for future implementations */'</code>
<code class="emphasize">→[13]  r,←⊂'    -webkit-filter: grayscale(100%);'</code>
<code class="emphasize">→[14]  r,←⊂'    filter: grayscale(100%); /* future-proof */'</code>
<code class="emphasize">→[15]  r,←⊂'}'</code>
<code class="emphasize">→[16]  r,←⊂'h1 {font-size: 18pt;}'</code>
<code class="emphasize">→[17]  r,←⊂'h2 {font-size: 16pt; margin-top: 10pt; margin-bottom: 3pt;}'</code>
<code class="emphasize">→[18]  r,←⊂'th, td {padding: 2pt 3pt;}'</code>
<code class="emphasize">→[19]  r,←⊂'th {text-align: left;background-color: #DBDBDB;}'</code>
<code class="emphasize">→[20]  r,←⊂'tbody tr:nth-child(odd) {background-color: #EDEDED;}'</code>
<code class="emphasize">→[21]  r,←⊂'table {'</code>
<code class="emphasize">→[22]  r,←⊂'    color-adjust: exact !important;'</code>
<code class="emphasize">→[23]  r,←⊂'    -webkit-print-color-adjust: exact !important;'</code>
<code class="emphasize">→[24]  r,←⊂'    print-color-adjust: exact !important;'</code>
<code class="emphasize">→[25]  r,←⊂'    font-size: 8pt;'</code>
<code class="emphasize">→[26]  r,←⊂'    font-family: APLFont, monospace;'</code>
<code class="emphasize">→[27]  r,←⊂'}'</code>
<code class="emphasize">→[28]  r,←⊂'div.keep-together {break-inside: avoid; break-before:auto;}'</code>
<code class="emphasize">→[29]  r,←⊂'table {border: silver 1pt solid;}'</code>
<code class="emphasize">→[30]  r,←⊂'code , code a {font-size: 8pt; font-family: APLFont, monospace;}'</code>
<code class="emphasize">→[31]  r,←⊂'code.header {'</code>
<code class="emphasize">→[32]  r,←⊂'    font-size: 8pt;'</code>
<code class="emphasize">→[33]  r,←⊂'    font-family: APLFont, monospace;'</code>
<code class="emphasize">→[34]  r,←⊂'    margin: 7pt 3pt 0 10pt;'</code>
<code class="emphasize">→[35]  r,←⊂'    padding:0;'</code>
<code class="emphasize">→[36]  r,←⊂'    display: block;'</code>
<code class="emphasize">→[37]  r,←⊂'}'</code>
<code class="emphasize">→[38]  r,←⊂'div.code-block {'</code>
<code class="emphasize">→[39]  r,←⊂'    border: 1pt silver dashed;'</code>
<code class="emphasize">→[40]  r,←⊂'    background-color: #F2F2F2;'</code>
<code class="emphasize">→[41]  r,←⊂'    display: block;'</code>
<code class="emphasize">→[42]  r,←⊂'    margin: 4pt 4pt 4pt 4pt;'</code>
<code class="emphasize">→[43]  r,←⊂'    padding: 4pt;'</code>
<code class="emphasize">→[44]  r,←⊂'}'</code>
<code class="emphasize">→[45]  r,←⊂'div.code-block code {display: block; white-space: pre-wrap; margin:0; padding:0; word-wrap: break-word;}'</code>
<code class="emphasize">→[46]  r,←⊂'.emphasize { font-weight: 800;}'</code>
<code class="emphasize">→[47]  r,←⊂'a {text-decoration: none;color: black;}'</code>
<code class="emphasize">→[48]  r,←⊂'ul li, ol li {margin: 8pt 3pt;}'</code>
<code class="emphasize">→[49]  r,←⊂'.no-print {display:none;}'</code>
<code class="emphasize">→[50]  r,←⊂'.align-right {text-align: right;}'</code>
<code class="emphasize">→[51]  r,←⊂'#footer hr {margin-top:1.5em;}'</code>
<code class="emphasize">→[52]  r,←⊂'#footer p {margin-top:5pt; padding-top:0; font-size: 6pt;}'</code>
<code class="emphasize">→[53]  r,←⊂'@font-face {'</code>
<code class="emphasize">→[54]  r,←⊂'        font-family: "APLFont";'</code>
<code class="emphasize">→[55]  r,←⊂'    src:'</code>
<code class="emphasize">→[56]  r,←⊂'        local("APL385 Unicode"),'</code>
<code class="emphasize">→[57]  r,←⊂'        url("https://misc.aplteam.com/apl385.ttf") format("truetype");'</code>
<code class="emphasize">→[58]  r,←⊂'}'</code>
<code class="emphasize">→[59]  r,←⊂'.info {border: 1px silver dashed; background-color: #F2F2F2;margin: 8px; padding: 8px;}'</code>
<code class="emphasize">→[60]  r,←⊂'}'</code>
</div>
<code class="header" id="listing_137">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CollectDataForCoverageReport &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  names←CollectDataForCoverageReport watch</code>
<code> [1]      ⍝ Determins all objects to be observed together with the number of lines.</code>
<code class="emphasize">→[2]   names←''</code>
<code class="emphasize">→[3]   :For this :In ,⊆watch</code>
<code class="emphasize">→[4]       ref←⍎this</code>
<code class="emphasize">→[5]       :If IsScripted ref</code>
<code class="emphasize">→[6]           names,←(⊂this,'.'),¨NamesInScript ref</code>
<code> [7]       :Else</code>
<code class="emphasize">→[8]           names,←(⊂this,'.'),¨' '~¨⍨↓ref.⎕NL 3 4</code>
<code class="emphasize">→[9]           :If 0&lt;≢list←ref.⎕NL 9</code>
<code class="emphasize">→[10]              list←' '~¨⍨↓list</code>
<code class="emphasize">→[11]              isScripted←IsScripted¨ref⍎¨list</code>
<code class="emphasize">→[12]              :For this2 :In isScripted/list</code>
<code class="emphasize">→[13]                  ref2←ref⍎this2</code>
<code class="emphasize">→[14]                  :If (⍕ref2)≡this,'.',this2                            ⍝ Ignore references</code>
<code class="emphasize">→[15]                      names,←(⊂this,'.',this2,'.'),¨NamesInScript ref2</code>
<code> [16]                  :EndIf</code>
<code> [17]              :EndFor</code>
<code class="emphasize">→[18]              :If 0&lt;≢list←(~isScripted)/list</code>
<code class="emphasize">→[19]              :AndIf 0&lt;≢list←({⍵≡⍕⍎⍵}¨(⊂this,'.'),¨list)/list           ⍝ Ignore references</code>
<code class="emphasize">→[20]                  names,←⊃,/CollectDataForCoverageReport¨(⊂this,'.'),¨list</code>
<code> [21]              :EndIf</code>
<code> [22]          :EndIf</code>
<code> [23]      :EndIf</code>
<code> [24]  :EndFor</code>
</div>
<code class="header" id="listing_138">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.NamesInScript &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←NamesInScript ref</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ Takes a ref pointing to a class or interface script and returns the names of all functions and operators</code>
<code> [3]      ⍝ within that script.\\</code>
<code> [4]      ⍝ Has two limitations:</code>
<code> [5]      ⍝ * Cannot handle nested classes and nested namespaces.</code>
<code> [6]      ⍝ * May well mistake a variable name for the name of a dfn.\\</code>
<code class="emphasize">→[7]   r←''</code>
<code class="emphasize">→[8]   body←⎕SRC ref</code>
<code class="emphasize">→[9]   body←'''[^'']*'''⎕R''⊣body                                     ⍝ Get rid of everything between quotes</code>
<code class="emphasize">→[10]  body←'⍝.*$'⎕R''⊣body                                           ⍝ Get rid of comments</code>
<code class="emphasize">→[11]  options←('IC' 1)('Greedy' 0)('DotAll' 1)('Mode' 'D')</code>
<code class="emphasize">→[12]  r,←options GeterAndSetterNames body                            ⍝ Extract the names of all getters and setters (if any)</code>
<code class="emphasize">→[13]  body←':Property .*:EndProperty'⎕R''⍠options⊣body               ⍝ Remove Properties (because they carry `∇`!)</code>
<code class="emphasize">→[14]  body←¯1↓1↓(~body∧.=¨' ')/body                                  ⍝ Remove first, last and all empty lines</code>
<code class="emphasize">→[15]  body←'^ {5,}∇.*$'⎕R''⊣body                                     ⍝ Remove recursive ∇ calls that stand on their own</code>
<code class="emphasize">→[16]  b←'∇'∊¨body                                                    ⍝ Which lines carry a ∇?</code>
<code class="emphasize">→[17]  ((b\{{1=≢⍵:0 ⋄ '∇'≠⊃⍵}⍵~' '}¨b/body)/body)←' '                 ⍝ Remove all other recursive ∇ calls</code>
<code class="emphasize">→[18]  body↓¨⍨←{+/∧\' '=⍵}¨body                                       ⍝ Drop all leading spaces</code>
<code class="emphasize">→[19]  b←'∇'=⊃¨body                                                   ⍝ All lines that start with a nabla</code>
<code class="emphasize">→[20]  tfns←b/body                                                    ⍝ Trad fns headers</code>
<code class="emphasize">→[21]  tfns←1↓¨tfns                                                   ⍝ Remove the nablas</code>
<code class="emphasize">→[22]  tfns←((≢tfns)⍴1 0)/tfns                                        ⍝ Remove every second line: those are the closing ones</code>
<code class="emphasize">→[23]  tfns←{'←'∊⍵:⍵↓⍨⍵⍳'←' ⋄ ⍵}¨tfns                                 ⍝ Remove all explicit results</code>
<code class="emphasize">→[24]  tfns←{'{'∊⍵:⍵↓⍨⍵⍳'}' ⋄ ⍵}¨tfns                                 ⍝ Remove optional left argument</code>
<code class="emphasize">→[25]  tfns←{⍵↓⍨+/∧\' '=⍵}¨tfns                                       ⍝ Remove all leading spaces</code>
<code class="emphasize">→[26]  tfns←{⍵/⍨~'  '⍷⍵}¨tfns                                         ⍝ Remove all multiple spaces</code>
<code class="emphasize">→[27]  tfns←{⍵↓⍨{-+/∧\' '=⍵}⌽⍵}¨tfns                                  ⍝ Remove all trailing spaces</code>
<code class="emphasize">→[28]  :If ∨/b←'('=⊃¨tfns                                             ⍝ These must be operators</code>
<code class="emphasize">→[29]      (b/tfns)←{{⍵↑⍨¯1+⍵⍳')'}⍵↓⍨⍵⍳' '}¨b/tfns                    ⍝ Extract the operator names</code>
<code> [30]  :EndIf</code>
<code class="emphasize">→[31]  tfns←'\([^)]+\)'⎕R' foo'⊣tfns                                  ⍝ Replace anything betwen () by ` foo` = impersonate a simple ⍵</code>
<code class="emphasize">→[32]  :If 0&lt;≢tfns←{2=' '+.=⍵:⍵↓⍨⍵⍳' ' ⋄ ⍵}¨tfns                      ⍝ Remove left arguments</code>
<code class="emphasize">→[33]      r,←{⍵↑⍨¯1+⌊/⍵⍳' ;'}¨tfns                                   ⍝ Name of all trad fns</code>
<code> [34]  :EndIf</code>
<code class="emphasize">→[35]  :If 0&lt;≢bodies←'∇[^∇]*∇'⎕S{⍵.Match}⍠options⊣body                ⍝ Every trad fn must be investigated for any local dfns.</code>
<code class="emphasize">→[36]  :AndIf 0&lt;≢bodies←{(⎕UCS 10)~¨⍨(~(⎕UCS 13 10)⍷⍵)⊆⍵}¨bodies      ⍝ Split them one-by-one</code>
<code class="emphasize">→[37]      r,←{0=≢⍵:⍵ ⋄ ⊃,/⍵}EstablishDfns¨bodies                     ⍝ All dfns defined within tradfns</code>
<code> [38]  :EndIf</code>
<code class="emphasize">→[39]  body←'∇[^∇]*∇'⎕R''⍠options⊣body                                ⍝ Wipe out all trad fns</code>
<code class="emphasize">→[40]  body←(0&lt;≢¨body~¨' ')/body                                      ⍝ No empty lines</code>
<code> [41]       ⍝ --- Next two lines are future stuff</code>
<code> [42]       ⍝ dfns←EstablishDfns body                                      ⍝ Extract the dfns (and dops of course)</code>
<code> [43]       ⍝ r,←∪dfns                                                     ⍝ Those might well be variable assignment, therefore ∪!</code>
</div>
<code class="header" id="listing_139">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.GeterAndSetterNames &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←options GeterAndSetterNames body</code>
<code class="emphasize">→[1]  r←''</code>
<code class="emphasize">→[2]  body←1↓⊃,/(⎕UCS 10),¨body</code>
<code class="emphasize">→[3]  :If ∨/bool←':property'⍷⎕C body</code>
<code class="emphasize">→[4]      r,←⊃,/body∘{'set_' 'get_',¨⊂(1+≢':propert')↓{⍵↑⍨¯1+⍵⍳⎕UCS 10}⍵↓⍺}¨{⍵/⍳≢⍵}bool</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_140">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.RemoveToBeIgnored &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  data←data RemoveToBeIgnored ignore</code>
<code> [1]        ⍝ `ignore` is a nested vector with nanes. In case such a name identifies any APL object it is removed.\\</code>
<code> [2]        ⍝ However, if an ordinary namespace is part of `ignore` then it won't appear in `data`.</code>
<code> [3]        ⍝ Therefore we identify container names in a second step and remove everything that belongs to such a container.</code>
<code> [4]        ⍝ That means it works recursively.</code>
<code class="emphasize">→[5]   :If 0&lt;≢ignore</code>
<code class="emphasize">→[6]   :AndIf 0&lt;≢data←(~data[;1]∊ignore)⌿data</code>
<code class="emphasize">→[7]       bool←9=⊃∘⎕NC¨ignore</code>
<code class="emphasize">→[8]       data←(⊃∧/data∘{⍵∘≢¨(≢⍵)↑¨⍺[;1]}¨((bool/ignore),¨'.'))⌿data</code>
<code> [9]   :EndIf</code>
</div>
<code class="header" id="listing_141">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.FormatDateTime &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←FormatDateTime ts</code>
<code class="emphasize">→[1]  r←⊃'YYYY-MM-DD hh:mm:ss'(1200⌶)¯1 1 ⎕DT⊂ts</code>
</div>
<code class="header" id="listing_142">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CollectInformation &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←CollectInformation dummy</code>
<code> [1]     ⍝ Collects information about the current test run.</code>
<code class="emphasize">→[2]  ts←FormatDateTime ⎕TS</code>
<code class="emphasize">→[3]  version←⊃{⍺,' ⋄ ',⍵}/# ⎕WG'APLVersion'</code>
<code class="emphasize">→[4]  version,←' ⋄ ','Classic' 'Unicode'⊃⍨1+80=⎕DR' '</code>
<code class="emphasize">→[5]  r←1 3⍴ts version(' '~⍨,'K0G⊂ZZZ.ZZZ.ZZZ.ZZZ.ZZ9⊃'⎕FMT⌊⎕WA÷1024×1024) ⍝ MBs</code>
</div>
<code class="header" id="listing_143">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.ExchangeHtmlSpecialChars &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> txt←ExchangeHtmlSpecialChars txt</code>
<code> [1]     ⍝ &lt; =&gt; &amp;lt; ⋄ &gt; =&gt; &amp;gt; ⋄ &amp; =&gt; &amp;amp;</code>
<code class="emphasize">→[2]  txt←(,¨'&amp;&lt;&gt;')⎕R'\&amp;amp;' '\&amp;lt;' '\&amp;gt;'⊣txt</code>
</div>
<code class="header" id="listing_144">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.CompareCR &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  z←a CompareCR b</code>
<code> [1]        ⍝ compare two CRs taking into account that some symbols are replaced with ⎕Uxxxx when loaded into classic</code>
<code> [2]        ⍝ z=1: match, 0: did not match</code>
<code> [3]        ⍝--&gt; this means that the final run which creates the report must be run on a Unicode interpreter, otherwise</code>
<code> [4]        ⍝    it will crash with errors because it can't deal with these characters...</code>
<code class="emphasize">→[5]   :If {0::1 ⋄ 0⊣⎕UCS ⍵}8838  ⍝ do not even attempt to execute this on Classic!</code>
<code class="emphasize">→[6]       z←1</code>
<code class="emphasize">→[7]   :ElseIf a≠⍥≢b   ⍝ no of lines must match</code>
<code class="emphasize">→[8]       z←0</code>
<code> [9]   :Else</code>
<code class="emphasize">→[10]      args←{1=≡⍵:↓⍵ ⋄ ⍵}¨a b</code>
<code class="emphasize">→[11]      :For i :In ⍳2</code>
<code class="emphasize">→[12]          :For m :In ('(⎕u\d*)'⎕S 2⍠'IC' 1)i⊃args</code>
<code class="emphasize">→[13]              :If m≢0</code>
<code class="emphasize">→[14]                  l←(⎕IO+m)⊃i⊃args</code>
<code class="emphasize">→[15]                  l←('⎕u(\d*.)'⎕R{{(⎕UCS dec ¯1↓⍵),(' '≢⍥,¯1↑⍵)/¯1↑⍵}2↓⍵.Match}⍠'IC' 1)l</code>
<code class="emphasize">→[16]                  ((⎕IO+m)⊃i⊃args)←l</code>
<code> [17]              :EndIf</code>
<code> [18]          :EndFor</code>
<code> [19]      :EndFor</code>
<code class="emphasize">→[20]      z←≡/args</code>
<code> [21]  :EndIf</code>
</div>
<code class="header" id="listing_145">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.IsFile &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←IsFile filename</code>
<code class="emphasize">→[1]  r←0</code>
<code class="emphasize">→[2]  :Trap 22</code>
<code class="emphasize">→[3]      r←2=1 ⎕NINFO filename</code>
<code> [4]  :EndTrap</code>
</div>
<code class="header" id="listing_146">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.ASSETS &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ASSETS</code>
<code class="emphasize">→[1]  r←''</code>
</div>
<code class="header" id="listing_147">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.CONFIG &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←CONFIG</code>
<code class="emphasize">→[1]   r←'{</code>
<code class="emphasize">→[2]    api: "CodeCoverage",</code>
<code class="emphasize">→[3]    assets: "",</code>
<code class="emphasize">→[4]    date: 20240313.194252,</code>
<code class="emphasize">→[5]    description: "Monitors which parts of an application got actually executed",</code>
<code class="emphasize">→[6]    documentation: "",</code>
<code class="emphasize">→[7]    files: "",</code>
<code class="emphasize">→[8]    group: "aplteam",</code>
<code class="emphasize">→[9]    io: 1,</code>
<code class="emphasize">→[10]   license: "MIT",</code>
<code class="emphasize">→[11]   lx: "",</code>
<code class="emphasize">→[12]   maintainer: "kai@aplteam.com",</code>
<code class="emphasize">→[13]   minimumAplVersion: "18.0",</code>
<code class="emphasize">→[14]   ml: 1,</code>
<code class="emphasize">→[15]   name: "CodeCoverage",</code>
<code class="emphasize">→[16]   os_lin: 1,</code>
<code class="emphasize">→[17]   os_mac: 1,</code>
<code class="emphasize">→[18]   os_win: 1,</code>
<code class="emphasize">→[19]   project_url: "https://github.com/aplteam/CodeCoverage",</code>
<code class="emphasize">→[20]   source: "APLSource/CodeCoverage.aplc",</code>
<code class="emphasize">→[21]   tags: "code-coverage,test-framework,unit-tests",</code>
<code class="emphasize">→[22]   uri: "https://tatin.dev/",</code>
<code class="emphasize">→[23]   userCommandScript: "",</code>
<code class="emphasize">→[24]   version: "0.10.6+67",</code>
<code> [25] }'</code>
</div>
<code class="header" id="listing_148">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.DEPENDENCIES &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←DEPENDENCIES</code>
<code class="emphasize">→[1]  r←⍬</code>
</div>
<code class="header" id="listing_149">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.GetFullPath2AssetsFolder &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetFullPath2AssetsFolder</code>
<code class="emphasize">→[1]  :If 0&lt;≢r←ASSETS</code>
<code class="emphasize">→[2]  :AndIf 0&lt;≢HOME</code>
<code class="emphasize">→[3]  :AndIf ⎕NEXISTS HOME</code>
<code class="emphasize">→[4]      r←HOME,'/',ASSETS</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_150">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.HOME &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←HOME</code>
<code> [1]  ⍝ Returns folder package was loaded from or current directory or an empty vector if both are not valid</code>
<code class="emphasize">→[2]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[3]   r←'C:/T/Projects/APLTree/CodeCoverage/packages_dev/aplteam-CodeCoverage-0.10.6'   ⍝ Original source</code>
<code class="emphasize">→[4]   :If ~⎕NEXISTS r</code>
<code class="emphasize">→[5]       (dir name extension)←⎕NPARTS r</code>
<code class="emphasize">→[6]       r←(⊃1 ⎕NPARTS''),(2⊃⎕NPARTS ¯1↓dir),'/',name,extension ⍝ Try current dir</code>
<code class="emphasize">→[7]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[8]       r←(⊃1 ⎕NPARTS''),name,extension</code>
<code class="emphasize">→[9]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[10]      r←''</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_151">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.ID &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ID</code>
<code class="emphasize">→[1]  r←'aplteam-CodeCoverage-0.10.6+67'</code>
</div>
<code class="header" id="listing_152">#._tatin.aplteam_CodeCoverage_0_10_6.TatinVars.URI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←URI</code>
<code class="emphasize">→[1]  r←'https://tatin.dev/'</code>
</div>
<code class="header" id="listing_153">#._tatin.aplteam_CommTools_1_7_1.AskForNumber &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  value←{enforce}(CheckFn AskForNumber)question</code>
<code> [1]  ⍝ Operator asking a question and allowing the user to enter a number.\\</code>
<code> [2]  ⍝ By entering "`∘∘∘`" the user may interrupt `AskForNumber`: this activates a stop.\\</code>
<code> [3]  ⍝ `CheckFn` is supposed to be a function that gets the input as `⍵` and must return a Boolean</code>
<code> [4]  ⍝ with a 1 indicating that the input is okay and 0 that it is not. If you don't need/want</code>
<code> [5]  ⍝ a check function pass `{1}` as left operand.\\</code>
<code> [6]  ⍝ If the user refuses to enter a number an empty vector is returned.</code>
<code> [7]  ⍝ However, you might prevent this from happening by specifying a 1 as `⍺` (`enforce`), meaning that</code>
<code> [8]  ⍝ the user must enter a number in order to continue.</code>
<code class="emphasize">→[9]   enforce←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'enforce'</code>
<code class="emphasize">→[10]  value←⍬</code>
<code class="emphasize">→[11]  success←flag←0</code>
<code class="emphasize">→[12]  :If ~(≡question)∊0 1</code>
<code class="emphasize">→[13]      question←1↓⊃,/LF,¨question</code>
<code> [14]  :EndIf</code>
<code class="emphasize">→[15]  question←ReplaceCRbyLF question</code>
<code class="emphasize">→[16]  question←{⍵↓⍨+/∧\' '=⍵}question</code>
<code class="emphasize">→[17]  :Repeat</code>
<code class="emphasize">→[18]      firstPart←{⍵↑⍨⍵⍳LF}question</code>
<code class="emphasize">→[19]      :If 0&lt;⎕NC'AskForNumber_Answers'</code>
<code class="emphasize">→[20]          AskForNumber_Answers←(0&lt;≢¨' '~⍨¨AskForNumber_Answers[;1])⌿AskForNumber_Answers</code>
<code class="emphasize">→[21]          AskForNumber_Answers[;1]←{⍵↓⍨+/∧\' '=⍵}¨AskForNumber_Answers[;1]</code>
<code class="emphasize">→[22]      :AndIf 0&lt;≢AskForNumber_Answers</code>
<code class="emphasize">→[23]          :If AliasChar∊firstPart</code>
<code class="emphasize">→[24]              ind←firstPart⍳AliasChar</code>
<code class="emphasize">→[25]          :AndIf ∧/~(LF,' ')∊ind↑question</code>
<code class="emphasize">→[26]              (alias question)←ind{(⍺↑⍵)(⍺↓⍵)}firstPart</code>
<code class="emphasize">→[27]              flag←0&lt;+/bool←({⍵↑⍨⍵⍳AliasChar}¨AskForNumber_Answers[;1])≡¨⊂alias</code>
<code class="emphasize">→[28]          :ElseIf ~flag←0&lt;+/bool←AskForNumber_Answers[;1]≡¨⊂firstPart</code>
<code class="emphasize">→[29]              flag←0&lt;+/bool←firstPart∘{⍵≡(≢⍵)↑⍺}¨AskForNumber_Answers[;1]</code>
<code> [30]          :EndIf</code>
<code class="emphasize">→[31]          :If flag</code>
<code class="emphasize">→[32]              'Multiple pre-prepared answers qualify?!'Assert 1=+/bool</code>
<code class="emphasize">→[33]              input←⍕2⊃AskForNumber_Answers[bool⍳1;]</code>
<code> [34]          :EndIf</code>
<code> [35]      :Else</code>
<code class="emphasize">→[36]          :If (⌊/firstPart⍳' ',LF)&gt;firstPart⍳AliasChar</code>
<code class="emphasize">→[37]              question←{~AliasChar∊⍵:⍵ ⋄ ⍵↓⍨⍵⍳AliasChar}question</code>
<code> [38]          :EndIf</code>
<code> [39]      :EndIf</code>
<code class="emphasize">→[40]      :If ~flag</code>
<code class="emphasize">→[41]          input←⍞,0/⍞←question,': '</code>
<code class="emphasize">→[42]          :If '∘∘∘'≡¯3↑input</code>
<code class="emphasize">→[43]              (1+⊃⎕LC)⎕STOP⊃⎕SI</code>
<code class="emphasize">→[44]              ∘∘∘ ⍝ Deliberate stop caused by user input</code>
<code> [45]          :EndIf</code>
<code class="emphasize">→[46]          input←{⍵↑⍨1+-(⌽⍵)⍳':'}input</code>
<code> [47]      :EndIf</code>
<code class="emphasize">→[48]      :If 0=≢input~' '</code>
<code class="emphasize">→[49]      :AndIf ~enforce</code>
<code class="emphasize">→[50]          value←⍬</code>
<code class="emphasize">→[51]          :Return</code>
<code> [52]      :Else</code>
<code class="emphasize">→[53]          (valid value)←⎕VFI input</code>
<code class="emphasize">→[54]          :If 1≠≢valid</code>
<code class="emphasize">→[55]              ⎕←'Please enter precisely one number'</code>
<code class="emphasize">→[56]          :ElseIf valid</code>
<code class="emphasize">→[57]              success←CheckFn value</code>
<code class="emphasize">→[58]              value←⊃value</code>
<code> [59]          :Else</code>
<code class="emphasize">→[60]              ⎕←'You did not enter a valid number, please retry!'</code>
<code> [61]          :EndIf</code>
<code> [62]      :EndIf</code>
<code class="emphasize">→[63]  :Until success</code>
<code> [64] ⍝Done</code>
</div>
<code class="header" id="listing_154">#._tatin.aplteam_CommTools_1_7_1.AskForText &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  text←{x}(CheckFn AskForText)question</code>
<code> [1]  ⍝ Operator asking a question and allowing the user to enter text.\\</code>
<code> [2]  ⍝ By entering "`∘∘∘`" the user may interrupt `AskForText`: this activates a stop.\\</code>
<code> [3]  ⍝ `CheckFn` is supposed to be a function that gets the input as `⍵` and must return a Boolean</code>
<code> [4]  ⍝ with a 1 indicating that the input is okay and 0 that it is not. If you don't need/want</code>
<code> [5]  ⍝ a check function pass `{1}` as left operand.\\</code>
<code> [6]  ⍝ If the user refuses to enter anything an empty vector is returned.</code>
<code> [7]  ⍝ However, you might prevent this from happening by specifying a 1 as `⍺` (`enforce`), meaning that</code>
<code> [8]  ⍝ the user must enter something in order to continue.</code>
<code> [9]  ⍝ You can also specify a default as `⍺` by passing a character vector instead of a Boolean.</code>
<code> [10] ⍝ In case the user does not enter something that default is returned; that's why the Boolean would</code>
<code> [11] ⍝ not make a difference anyway.</code>
<code class="emphasize">→[12]  x←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'x'</code>
<code class="emphasize">→[13]  :If ' '=1↑0⍴x</code>
<code class="emphasize">→[14]      default←x</code>
<code class="emphasize">→[15]      enforce←0</code>
<code> [16]  :Else</code>
<code class="emphasize">→[17]      enforce←x</code>
<code class="emphasize">→[18]      default←''</code>
<code> [19]  :EndIf</code>
<code class="emphasize">→[20]  text←''</code>
<code class="emphasize">→[21]  success←flag←0</code>
<code class="emphasize">→[22]  :If ~(≡question)∊0 1</code>
<code class="emphasize">→[23]      question←1↓⊃,/LF,¨question</code>
<code> [24]  :EndIf</code>
<code class="emphasize">→[25]  question←ReplaceCRbyLF question</code>
<code class="emphasize">→[26]  question←{⍵↓⍨+/∧\' '=⍵}question</code>
<code class="emphasize">→[27]  :Repeat</code>
<code class="emphasize">→[28]      firstPart←{⍵↑⍨⍵⍳LF}question</code>
<code class="emphasize">→[29]      :If 0&lt;⎕NC'AskForText_Answers'</code>
<code class="emphasize">→[30]          AskForText_Answers←(0&lt;≢¨' '~⍨¨AskForText_Answers[;1])⌿AskForText_Answers</code>
<code class="emphasize">→[31]          AskForText_Answers[;1]←{⍵↓⍨+/∧\' '=⍵}¨AskForText_Answers[;1]</code>
<code class="emphasize">→[32]      :AndIf 0&lt;≢AskForText_Answers</code>
<code class="emphasize">→[33]          :If AliasChar∊question</code>
<code class="emphasize">→[34]              (alias question)←{l←⍵⍳AliasChar ⋄ (l↑⍵)(l↓⍵)}question</code>
<code class="emphasize">→[35]              flag←0&lt;+/bool←({⍵↑⍨⍵⍳AliasChar}¨AskForText_Answers[;1])≡¨⊂alias</code>
<code class="emphasize">→[36]          :ElseIf ~flag←0&lt;+/bool←AskForText_Answers[;1]≡¨⊂question</code>
<code class="emphasize">→[37]              flag←0&lt;+/bool←question∘{⍵≡(≢⍵)↑⍺}¨AskForText_Answers[;1]</code>
<code> [38]          :EndIf</code>
<code class="emphasize">→[39]          :If flag</code>
<code class="emphasize">→[40]              'Multiple pre-prepared answers qualify?!'Assert 1=+/bool</code>
<code class="emphasize">→[41]              text←2⊃AskForText_Answers[bool⍳1;]</code>
<code> [42]          :EndIf</code>
<code> [43]      :Else</code>
<code class="emphasize">→[44]          :If (⌊/firstPart⍳' ',LF)&gt;firstPart⍳AliasChar</code>
<code class="emphasize">→[45]              question←{~AliasChar∊⍵:⍵ ⋄ ⍵↓⍨⍵⍳AliasChar}question</code>
<code> [46]          :EndIf</code>
<code> [47]      :EndIf</code>
<code class="emphasize">→[48]      :If 0&lt;≢default</code>
<code class="emphasize">→[49]          question,←' [',default,']'</code>
<code> [50]      :EndIf</code>
<code class="emphasize">→[51]      :If ~flag</code>
<code class="emphasize">→[52]          text←⍞,0/⍞←question,': '</code>
<code class="emphasize">→[53]          :If '∘∘∘'≡¯3↑text</code>
<code class="emphasize">→[54]              (1+⊃⎕LC)⎕STOP⊃⎕SI</code>
<code class="emphasize">→[55]              ∘∘∘ ⍝ Deliberate stop caused by user input</code>
<code> [56]          :EndIf</code>
<code class="emphasize">→[57]          text←(≢{⍵↑⍨-¯1+(⌽⍵)⍳LF}question,': ')↓text</code>
<code class="emphasize">→[58]          :If 0=≢text</code>
<code class="emphasize">→[59]          :AndIf 0&lt;≢default</code>
<code class="emphasize">→[60]              text←default</code>
<code> [61]          :EndIf</code>
<code> [62]      :EndIf</code>
<code class="emphasize">→[63]      :If 0=≢text</code>
<code class="emphasize">→[64]          :If enforce</code>
<code class="emphasize">→[65]              ⎕←'You must enter something!'</code>
<code> [66]          :Else</code>
<code class="emphasize">→[67]              :Return</code>
<code> [68]          :EndIf</code>
<code> [69]      :Else</code>
<code class="emphasize">→[70]          success←CheckFn text</code>
<code> [71]      :EndIf</code>
<code class="emphasize">→[72]  :Until success</code>
<code> [73] ⍝Done</code>
</div>
<code class="header" id="listing_155">#._tatin.aplteam_CommTools_1_7_1.Cleanup &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Cleanup</code>
<code class="emphasize">→[1]  ⎕EX'Select_Choices'</code>
<code class="emphasize">→[2]  ⎕EX'YesOrNo_Answers'</code>
<code class="emphasize">→[3]  ⎕EX'NoPause'</code>
<code class="emphasize">→[4]  ⎕EX'AskForNumber_Answers'</code>
<code class="emphasize">→[5]  ⎕EX'AskForText_Answers'</code>
</div>
<code class="header" id="listing_156">#._tatin.aplteam_CommTools_1_7_1.Copyright &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Copyright</code>
<code class="emphasize">→[1]  r←'Copyright by Kai Jaeger ⋄ https://kai-jaeger.de ⋄ kai@aplteam.com'</code>
</div>
<code class="header" id="listing_157">#._tatin.aplteam_CommTools_1_7_1.ErrNo &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ErrNo</code>
<code class="emphasize">→[1]  r←811</code>
</div>
<code class="header" id="listing_158">#._tatin.aplteam_CommTools_1_7_1.Help &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Help</code>
<code class="emphasize">→[1]  ⎕SE.UCMD'ADOC ',⍕⎕THIS</code>
</div>
<code class="header" id="listing_159">#._tatin.aplteam_CommTools_1_7_1.LF &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←LF</code>
<code class="emphasize">→[1]  r←⎕UCS 10</code>
</div>
<code class="header" id="listing_160">#._tatin.aplteam_CommTools_1_7_1.Pause &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {flag}←{lineFlag}Pause msg</code>
<code> [1]   ⍝ Prints `msg` to he session and tells the user that she must press &lt;enter&gt; if she wants to continue.</code>
<code> [2]   ⍝ By entering "`∘∘∘`" the user may interrupt `Pause`: this activates a stop.\\</code>
<code> [3]   ⍝ The optional left argument `lineFlag` defaults to 0. If it's 1 then a line is printed. The length</code>
<code> [4]   ⍝ is defined by `⎕PW-1`.\\</code>
<code> [5]   ⍝ You can prevent `Pause` from displaying the message and requiring the user to press &lt;enter&gt;,</code>
<code> [6]   ⍝ refer to the documentation with ]ADoc CommTools\\</code>
<code> [7]   ⍝ The function will return 1 in case it did present the message and stopped, and 0 otherwise.</code>
<code class="emphasize">→[8]   lineFlag←{0=⎕NC ⍵:0 ⋄ ⍎⍵}'lineFlag'</code>
<code class="emphasize">→[9]   msg←⊃LF{⍺,⍺⍺,⍵}/⊆msg</code>
<code class="emphasize">→[10]  msg←ReplaceCRbyLF msg</code>
<code class="emphasize">→[11]  flag←1</code>
<code class="emphasize">→[12]  :If AliasChar∊msg</code>
<code class="emphasize">→[13]      :If 0&lt;⎕NC'NoPause'</code>
<code class="emphasize">→[14]          (alias msg)←{l←⍵⍳AliasChar ⋄ (l↑⍵)(l↓⍵)}msg</code>
<code class="emphasize">→[15]          flag←~∨/({⍵↑⍨⍵⍳AliasChar}¨⊆NoPause)≡¨⊂alias</code>
<code> [16]      :EndIf</code>
<code> [17]  :Else</code>
<code class="emphasize">→[18]      :If 0&lt;⎕NC'NoPause'</code>
<code class="emphasize">→[19]          :If NoPause≡1</code>
<code class="emphasize">→[20]          :OrIf ∨/(⊆NoPause)∊⊆msg</code>
<code class="emphasize">→[21]          :OrIf ∨/(NoPause/⍨~AliasChar∊¨NoPause){⍺≡¨(≢¨⍺)↑¨(≢⍺)⍴⊂⍵}{⍵↑⍨¯1+⍵⍳LF}msg</code>
<code class="emphasize">→[22]              flag←0</code>
<code> [23]          :EndIf</code>
<code> [24]      :EndIf</code>
<code> [25]  :EndIf</code>
<code class="emphasize">→[26]  :If flag</code>
<code class="emphasize">→[27]      :If lineFlag</code>
<code class="emphasize">→[28]          ⍞←((⎕PW-1)⍴'─'),LF</code>
<code> [29]      :EndIf</code>
<code class="emphasize">→[30]      :If AliasChar∊msg</code>
<code class="emphasize">→[31]          ind←msg⍳AliasChar</code>
<code class="emphasize">→[32]      :AndIf ∧/~(ind↑msg)∊' ',LF</code>
<code class="emphasize">→[33]          msg←ind↓msg</code>
<code> [34]      :EndIf</code>
<code class="emphasize">→[35]      input←⍞,0/⍞←({0=≢⍵:⍵ ⋄ ⍵,LF}msg),'In order to continue press &lt;enter&gt; '</code>
<code class="emphasize">→[36]      :If '∘∘∘'≡¯3↑input</code>
<code class="emphasize">→[37]          (1+⊃⎕LC)⎕STOP⊃⎕SI</code>
<code class="emphasize">→[38]          ∘∘∘ ⍝ Deliberate stop caused by user input</code>
<code> [39]      :EndIf</code>
<code> [40]  :EndIf</code>
<code> [41] ⍝Done</code>
</div>
<code class="header" id="listing_161">#._tatin.aplteam_CommTools_1_7_1.Public &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Public</code>
<code class="emphasize">→[1]  r←''</code>
<code class="emphasize">→[2]  r,←⊂'AskForText'</code>
<code class="emphasize">→[3]  r,←⊂'AskForNumber'</code>
<code class="emphasize">→[4]  r,←⊂'Select'</code>
<code class="emphasize">→[5]  r,←⊂'YesOrNo'</code>
<code class="emphasize">→[6]  r,←⊂'Pause'</code>
<code class="emphasize">→[7]  r,←⊂'Cleanup'</code>
<code class="emphasize">→[8]  r,←⊂'Help'</code>
</div>
<code class="header" id="listing_162">#._tatin.aplteam_CommTools_1_7_1.Select &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>   index←{x}Select choices</code>
<code> [1]   ⍝ Presents `choices` as a numbered list and allows the user to select either exactly one or multiple ones.</code>
<code> [2]   ⍝ Selecting just one is the default.\\</code>
<code> [3]   ⍝ The optional left argument allows you to specify multiple (positional) choices:</code>
<code> [4]   ⍝  * `caption` is shown above the choices; must be a simple character vector</code>
<code> [5]   ⍝  * `manyFlag` defaults to 0 (meaning just one item might be selected) or 1, in which case multiple items can be selected</code>
<code> [6]   ⍝  * `mustFlag` forces the user to select at least one option\\</code>
<code> [7]   ⍝ Notes:</code>
<code> [8]   ⍝  * `choices` must not have more than 999 items\\</code>
<code> [9]   ⍝  * By entering "`∘∘∘`" the user may interrupt `Select` by running onto a stop vector, overcoming the bug that ⍞ cannot be interrupted</code>
<code> [10]  ⍝  * If the user aborts by entering "q" (for "quit") `⍬` will be returned</code>
<code> [11]  ⍝ You can make `Select` select none, one or several choices automatically, refer to the documentation</code>
<code> [12]  ⍝ with ]ADoc CommTools\\</code>
<code class="emphasize">→[13]   x←{0&lt;⎕NC ⍵:⊆⍎⍵ ⋄ ''}'x'</code>
<code class="emphasize">→[14]   (caption manyFlag mustFlag)←x,(⍴,x)↓'' 0 0</code>
<code class="emphasize">→[15]   '"caption" must be a simple character vector'Assert 1=≡caption←,caption</code>
<code class="emphasize">→[16]   '"caption" must not contain line feeds (⎕UCS 10)'Assert~LF∊caption</code>
<code class="emphasize">→[17]   '"caption" must not contain carriage returns (⎕UCS 13)'Assert~(⎕UCS 13)∊caption</code>
<code class="emphasize">→[18]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[19]   'Invalid right argument; must be a vector of text vectors.'⎕SIGNAL ErrNo/⍨2≠|≡choices</code>
<code class="emphasize">→[20]   'Right argument has more than 999 items'⎕SIGNAL ErrNo/⍨999&lt;≢choices</code>
<code class="emphasize">→[21]   flag←0</code>
<code class="emphasize">→[22]   firstPart←{⍵↑⍨⍵⍳LF}caption</code>
<code class="emphasize">→[23]   :If 0&lt;⎕NC'Select_Choices'</code>
<code class="emphasize">→[24]       Select_Choices←(0&lt;≢¨Select_Choices[;1])⌿Select_Choices</code>
<code class="emphasize">→[25]   :AndIf 0&lt;≢Select_Choices</code>
<code class="emphasize">→[26]       :If AliasChar∊caption</code>
<code class="emphasize">→[27]           (alias caption)←{l←⍵⍳AliasChar ⋄ (l↑⍵)(l↓⍵)}caption</code>
<code class="emphasize">→[28]           flag←0&lt;+/bool←({⍵↑⍨(,⍵)⍳AliasChar}¨Select_Choices[;1])≡¨⊂alias</code>
<code> [29]       :Else</code>
<code class="emphasize">→[30]           :If 0=+/bool←Select_Choices[;1]≡¨⊂caption</code>
<code class="emphasize">→[31]               bool←caption∘{⍵≡⍺↑⍨≢⍵}¨Select_Choices[;1]</code>
<code> [32]           :EndIf</code>
<code class="emphasize">→[33]           flag←0&lt;+/bool</code>
<code> [34]       :EndIf</code>
<code class="emphasize">→[35]       :If flag</code>
<code class="emphasize">→[36]           'Multiple choices qualify?!'Assert 1=+/bool</code>
<code class="emphasize">→[37]           index←2⊃Select_Choices[bool⍳1;]</code>
<code class="emphasize">→[38]           :If (⊂index)∊0 ⍬</code>
<code class="emphasize">→[39]               index←⍬</code>
<code class="emphasize">→[40]           :ElseIf ' '=1↑0⍴∊index ⍝ Text?!</code>
<code class="emphasize">→[41]               :If '*'=¯1↑index</code>
<code class="emphasize">→[42]                   index←((¯1+≢index)↑¨{⍵↓⍨+/∧\' '=⍵}¨choices)⍳⊂(¯1↓index)</code>
<code class="emphasize">→[43]                   'Invalid selection'Assert index∊⍳≢choices</code>
<code class="emphasize">→[44]               :ElseIf (,'a')≡,index</code>
<code class="emphasize">→[45]                   index←⍳≢choices</code>
<code class="emphasize">→[46]               :ElseIf (,'q')≡,index</code>
<code class="emphasize">→[47]                   index←⍬</code>
<code class="emphasize">→[48]               :ElseIf 0&lt;≢buff←⍸index∘≡¨choices</code>
<code class="emphasize">→[49]                   index←buff</code>
<code class="emphasize">→[50]                   'Invalid selection'Assert index∊⍳≢choices</code>
<code class="emphasize">→[51]               :ElseIf 1=≢index←⍸index∘≡¨(≢index)↑¨{⍵↓⍨+/∧\' '=⍵}¨choices</code>
<code class="emphasize">→[52]                   index←⊃index</code>
<code class="emphasize">→[53]                   'Invalid selection'Assert index∊⍳≢choices</code>
<code> [54]               :Else</code>
<code class="emphasize">→[55]                   'Invalid selection'Assert 0</code>
<code> [56]               :EndIf</code>
<code> [57]           :Else</code>
<code class="emphasize">→[58]               'Invalid selection'Assert∧/index∊⍳≢choices</code>
<code> [59]           :EndIf</code>
<code> [60]       :EndIf</code>
<code> [61]   :EndIf</code>
<code class="emphasize">→[62]   :If ~flag</code>
<code class="emphasize">→[63]       flag2←0</code>
<code class="emphasize">→[64]       :Repeat</code>
<code class="emphasize">→[65]           blankFlag←0≠≢caption</code>
<code class="emphasize">→[66]           :If AliasChar∊caption</code>
<code class="emphasize">→[67]               :If (firstPart⍳' ')&gt;firstPart⍳AliasChar</code>
<code class="emphasize">→[68]                   caption←{~AliasChar∊⍵:⍵ ⋄ ⍵↓⍨⍵⍳AliasChar}caption</code>
<code> [69]               :EndIf</code>
<code> [70]           :EndIf</code>
<code class="emphasize">→[71]           ⎕←{⍵↑'---',(blankFlag/' '),caption,(blankFlag/' '),⍵⍴'-'}⎕PW-1</code>
<code class="emphasize">→[72]           ⎕←⍪{((⊂'. '),¨⍨(⊂3 0)⍕¨⍳≢⍵),¨⍵}choices</code>
<code class="emphasize">→[73]           ⎕←''</code>
<code class="emphasize">→[74]           question←'Select one ',(manyFlag/'or more '),'item',((manyFlag)/'s'),' '</code>
<code class="emphasize">→[75]           question,←((manyFlag∨~mustFlag)/'('),((~mustFlag)/'q=quit'),((manyFlag∧~mustFlag)/', '),(manyFlag/'a=all'),((manyFlag∨~mustFlag)/')'),' :'</code>
<code class="emphasize">→[76]           :If 0&lt;≢answer←⍞,0/⍞←question</code>
<code class="emphasize">→[77]               answer←(⍴question)↓answer</code>
<code class="emphasize">→[78]               :If '∘∘∘'≡¯3↑answer</code>
<code class="emphasize">→[79]                   (1+⊃⎕LC)⎕STOP⊃⎕SI</code>
<code class="emphasize">→[80]                   ∘∘∘ ⍝ Deliberate stop caused by user input</code>
<code> [81]               :EndIf</code>
<code class="emphasize">→[82]               :If 1=≢answer</code>
<code class="emphasize">→[83]               :AndIf answer∊'Qq',manyFlag/'Aa'</code>
<code class="emphasize">→[84]                   :If answer∊'Qq'</code>
<code class="emphasize">→[85]                       :If 0=mustFlag</code>
<code class="emphasize">→[86]                           index←⍬</code>
<code class="emphasize">→[87]                           flag2←1</code>
<code> [88]                       :EndIf</code>
<code> [89]                   :Else</code>
<code class="emphasize">→[90]                       index←⍳≢choices</code>
<code class="emphasize">→[91]                       flag2←1</code>
<code> [92]                   :EndIf</code>
<code> [93]               :Else</code>
<code class="emphasize">→[94]                   (bool value)←⎕VFI answer</code>
<code class="emphasize">→[95]                   :If ∧/bool</code>
<code class="emphasize">→[96]                   :AndIf manyFlag∨1=+/bool</code>
<code class="emphasize">→[97]                       value←bool/value</code>
<code class="emphasize">→[98]                   :AndIf ∧/value∊⍳⍴choices</code>
<code class="emphasize">→[99]                       index←value</code>
<code class="emphasize">→[100]                      flag2←0≠≢index</code>
<code> [101]                  :EndIf</code>
<code> [102]              :EndIf</code>
<code> [103]          :EndIf</code>
<code class="emphasize">→[104]      :Until flag2</code>
<code class="emphasize">→[105]      index←{1&lt;≢⍵:⍵ ⋄ ⊃⍵}⍣(⍬≢index)⊣index</code>
<code> [106]  :EndIf</code>
<code> [107] ⍝Done</code>
</div>
<code class="header" id="listing_163">#._tatin.aplteam_CommTools_1_7_1.Version &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Version</code>
<code> [1] ⍝ See also `History`</code>
<code class="emphasize">→[2]  r←'CommTools' '1.7.1' '2023-11-04'</code>
</div>
<code class="header" id="listing_164">#._tatin.aplteam_CommTools_1_7_1.YesOrNo &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>   yesOrNo←{default}YesOrNo question</code>
<code> [1]    ⍝ Asks a simple question and allows just "Y" (or "y") or "N" (or "n") as answers.\\</code>
<code> [2]    ⍝ The question may be a simple character vector, possibly with `⎕UCS 10` in between,</code>
<code> [3]    ⍝ or a vector of simple character vectors.\\</code>
<code> [4]    ⍝ You may specify a default via the optional left argument which when specified</code>
<code> [5]    ⍝ rules what happens when the user just presses &lt;enter&gt;.</code>
<code> [6]    ⍝ `default` must be either 1 (yes) or 0 (no).\\</code>
<code> [7]    ⍝ By entering "`∘∘∘`" the user may interrupt `YesOrNo`: this activates a stop.\\</code>
<code> [8]    ⍝ You can make `YesOrNo` answer the question automatically, refer to the documentation</code>
<code> [9]    ⍝ with ]ADoc CommTools\\</code>
<code> [10]   ⍝ Note that this function does **not** work as intended when traced!</code>
<code class="emphasize">→[11]   isOkay←0</code>
<code class="emphasize">→[12]   default←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ''}'default'</code>
<code class="emphasize">→[13]   isOkay←0</code>
<code class="emphasize">→[14]   :If ~(≡question)∊0 1</code>
<code class="emphasize">→[15]       question←1↓⊃,/LF,¨question</code>
<code> [16]   :EndIf</code>
<code class="emphasize">→[17]   question←ReplaceCRbyLF question</code>
<code class="emphasize">→[18]   question←{⍵↓⍨+/∧\' '=⍵}question</code>
<code class="emphasize">→[19]   :If 0≠≢default</code>
<code class="emphasize">→[20]       'Left argument must be a scalar'⎕SIGNAL 11/⍨1≠≢default</code>
<code class="emphasize">→[21]   :AndIf ~default∊0 1</code>
<code class="emphasize">→[22]       'The left argument. if specified, must be a Boolean or empty'⎕SIGNAL 11</code>
<code> [23]   :EndIf</code>
<code class="emphasize">→[24]   flag←1</code>
<code class="emphasize">→[25]   firstPart←{⍵↑⍨⍵⍳LF}question</code>
<code class="emphasize">→[26]   :If 0&lt;⎕NC'YesOrNo_Answers'</code>
<code class="emphasize">→[27]       YesOrNo_Answers←(0&lt;≢¨' '~⍨¨YesOrNo_Answers[;1])⌿YesOrNo_Answers</code>
<code class="emphasize">→[28]   :AndIf 0&lt;≢YesOrNo_Answers</code>
<code class="emphasize">→[29]       :If AliasChar∊firstPart</code>
<code class="emphasize">→[30]           ind←firstPart⍳AliasChar</code>
<code class="emphasize">→[31]           (alias question)←ind{(⍺↑⍵)(⍺↓⍵)}firstPart</code>
<code class="emphasize">→[32]           flag←0&lt;+/bool←({⍵↑⍨⍵⍳AliasChar}¨YesOrNo_Answers[;1])≡¨⊂alias</code>
<code class="emphasize">→[33]       :ElseIf ~flag←0&lt;+/bool←YesOrNo_Answers[;1]≡¨⊂question</code>
<code class="emphasize">→[34]       :AndIf ~flag←0&lt;+/bool←question∘{⍵≡(≢⍵)↑⍺}¨YesOrNo_Answers[;1]</code>
<code class="emphasize">→[35]       :AndIf LF∊question</code>
<code class="emphasize">→[36]           buff←{⍵↓⍨+/∧\' '=⍵}⊃¯1↑LF(≠⊆⊢)question</code>
<code class="emphasize">→[37]           flag←0&lt;+/bool←YesOrNo_Answers[;1]≡¨⊂buff</code>
<code> [38]       :EndIf</code>
<code class="emphasize">→[39]       :If flag</code>
<code class="emphasize">→[40]           'Multiple pre-prepared answers qualify?!'Assert 1=+/bool</code>
<code class="emphasize">→[41]           answer←2⊃YesOrNo_Answers[bool⍳1;]</code>
<code class="emphasize">→[42]           :If 0=≢answer</code>
<code class="emphasize">→[43]               yesOrNo←default</code>
<code> [44]           :Else</code>
<code class="emphasize">→[45]               ('Invalid answer: ',answer)Assert answer∊'YyNn'</code>
<code class="emphasize">→[46]               yesOrNo←answer∊'Yy'</code>
<code> [47]           :EndIf</code>
<code> [48]       :EndIf</code>
<code> [49]   :Else</code>
<code class="emphasize">→[50]       flag←0</code>
<code> [51]   :EndIf</code>
<code class="emphasize">→[52]   :If ~flag</code>
<code class="emphasize">→[53]       :If 0=≢default</code>
<code class="emphasize">→[54]           add←' (y/n) '</code>
<code> [55]       :Else</code>
<code class="emphasize">→[56]           :If default</code>
<code class="emphasize">→[57]               add←' (Y/n) '</code>
<code> [58]           :Else</code>
<code class="emphasize">→[59]               add←' (y/N) '</code>
<code> [60]           :EndIf</code>
<code> [61]       :EndIf</code>
<code class="emphasize">→[62]       :If 1&lt;≡question</code>
<code class="emphasize">→[63]           question←1↓⊃,/LF,¨question</code>
<code> [64]       :EndIf</code>
<code class="emphasize">→[65]       :If (⌊/firstPart⍳' ',LF)&gt;firstPart⍳AliasChar</code>
<code class="emphasize">→[66]           question←{~AliasChar∊⍵:⍵ ⋄ ⍵↓⍨⍵⍳AliasChar}question,add</code>
<code> [67]       :Else</code>
<code class="emphasize">→[68]           question,←add</code>
<code> [69]       :EndIf</code>
<code class="emphasize">→[70]       :Repeat</code>
<code class="emphasize">→[71]           ⎕←''</code>
<code class="emphasize">→[72]           ⍞←question</code>
<code class="emphasize">→[73]           answer←⍞</code>
<code class="emphasize">→[74]           :If answer≡question ⍝ Did ...  (since version 18.0 trailing blanks are not removed anymore)</code>
<code class="emphasize">→[75]           :OrIf (≢answer)=¯1+≢question ⍝ ... the ...</code>
<code class="emphasize">→[76]           :OrIf 0=≢answer                                                          ⍝ ... user ...</code>
<code class="emphasize">→[77]           :OrIf question≡(-≢question)↑answer                                       ⍝ ... just ...</code>
<code class="emphasize">→[78]               dtb←{⍵↓⍨-+/∧\' '=⌽⍵}</code>
<code class="emphasize">→[79]               answer2←dtb answer</code>
<code class="emphasize">→[80]           :OrIf answer2≡((-≢answer2)↑LF{~⍺∊⍵:⍵ ⋄ ' ',dtb ⍺{⌽⍵↑⍨1+⍵⍳⍺}⌽⍵}question)  ⍝ ... press ...</code>
<code class="emphasize">→[81]           :OrIf answer≡{1↓⊃¯1↑(⍵=LF)⊂⍵}LF,question                                 ⍝ ... &lt;enter&gt;?</code>
<code class="emphasize">→[82]               :If 0≠≢default</code>
<code class="emphasize">→[83]                   yesOrNo←default</code>
<code class="emphasize">→[84]                   isOkay←1</code>
<code> [85]               :EndIf</code>
<code> [86]           :Else</code>
<code class="emphasize">→[87]               :If '∘∘∘'≡¯3↑answer</code>
<code class="emphasize">→[88]                   (1+⊃⎕LC)⎕STOP⊃⎕SI</code>
<code class="emphasize">→[89]                   ∘∘∘ ⍝ Deliberate stop caused by user input</code>
<code> [90]               :EndIf</code>
<code class="emphasize">→[91]               answer←¯1↑{⍵↓⍨-+/∧\' '=⌽⍵}answer</code>
<code class="emphasize">→[92]               :If answer∊'YyNn'</code>
<code class="emphasize">→[93]                   isOkay←1</code>
<code class="emphasize">→[94]                   yesOrNo←answer∊'Yy'</code>
<code> [95]               :EndIf</code>
<code> [96]           :EndIf</code>
<code class="emphasize">→[97]       :Until isOkay</code>
<code> [98]   :EndIf</code>
<code> [99]  ⍝Done</code>
</div>
<code class="header" id="listing_165">#._tatin.aplteam_CommTools_1_7_1.TatinVars.ASSETS &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ASSETS</code>
<code class="emphasize">→[1]  r←''</code>
</div>
<code class="header" id="listing_166">#._tatin.aplteam_CommTools_1_7_1.TatinVars.CONFIG &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←CONFIG</code>
<code class="emphasize">→[1]   r←'{</code>
<code class="emphasize">→[2]    api: "",</code>
<code class="emphasize">→[3]    assets: "",</code>
<code class="emphasize">→[4]    date: 20231104.11033,</code>
<code class="emphasize">→[5]    description: "Communication tools for interactions in the session: YesOrNo and Select",</code>
<code class="emphasize">→[6]    documentation: "",</code>
<code class="emphasize">→[7]    files: "",</code>
<code class="emphasize">→[8]    group: "aplteam",</code>
<code class="emphasize">→[9]    io: 1,</code>
<code class="emphasize">→[10]   license: "MIT",</code>
<code class="emphasize">→[11]   lx: "",</code>
<code class="emphasize">→[12]   maintainer: "kai@aplteam.com",</code>
<code class="emphasize">→[13]   minimumAplVersion: "18.0",</code>
<code class="emphasize">→[14]   ml: 1,</code>
<code class="emphasize">→[15]   name: "CommTools",</code>
<code class="emphasize">→[16]   os_lin: 1,</code>
<code class="emphasize">→[17]   os_mac: 1,</code>
<code class="emphasize">→[18]   os_win: 1,</code>
<code class="emphasize">→[19]   project_url: "https://github.com/aplteam/CommTools",</code>
<code class="emphasize">→[20]   source: "APLSource/CommTools",</code>
<code class="emphasize">→[21]   tags: "communication-tools,yes-or-no,select-tool",</code>
<code class="emphasize">→[22]   uri: "https://tatin.dev/",</code>
<code class="emphasize">→[23]   userCommandScript: "",</code>
<code class="emphasize">→[24]   version: "1.7.1+62",</code>
<code> [25] }'</code>
</div>
<code class="header" id="listing_167">#._tatin.aplteam_CommTools_1_7_1.TatinVars.DEPENDENCIES &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←DEPENDENCIES</code>
<code class="emphasize">→[1]  r←⍬</code>
</div>
<code class="header" id="listing_168">#._tatin.aplteam_CommTools_1_7_1.TatinVars.GetFullPath2AssetsFolder &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetFullPath2AssetsFolder</code>
<code class="emphasize">→[1]  :If 0&lt;≢r←ASSETS</code>
<code class="emphasize">→[2]  :AndIf 0&lt;≢HOME</code>
<code class="emphasize">→[3]  :AndIf ⎕NEXISTS HOME</code>
<code class="emphasize">→[4]      r←HOME,'/',ASSETS</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_169">#._tatin.aplteam_CommTools_1_7_1.TatinVars.HOME &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←HOME</code>
<code> [1]  ⍝ Returns folder package was loaded from or current directory or an empty vector if both are not valid</code>
<code class="emphasize">→[2]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[3]   r←'C:/T/Projects/APLTree/CodeCoverage/packages_dev/aplteam-CommTools-1.7.1'   ⍝ Original source</code>
<code class="emphasize">→[4]   :If ~⎕NEXISTS r</code>
<code class="emphasize">→[5]       (dir name extension)←⎕NPARTS r</code>
<code class="emphasize">→[6]       r←(⊃1 ⎕NPARTS''),(2⊃⎕NPARTS ¯1↓dir),'/',name,extension ⍝ Try current dir</code>
<code class="emphasize">→[7]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[8]       r←(⊃1 ⎕NPARTS''),name,extension</code>
<code class="emphasize">→[9]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[10]      r←''</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_170">#._tatin.aplteam_CommTools_1_7_1.TatinVars.ID &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ID</code>
<code class="emphasize">→[1]  r←'aplteam-CommTools-1.7.1+62'</code>
</div>
<code class="header" id="listing_171">#._tatin.aplteam_CommTools_1_7_1.TatinVars.URI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←URI</code>
<code class="emphasize">→[1]  r←'https://tatin.dev/'</code>
</div>
<code class="header" id="listing_172">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_IniFilename &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_IniFilename</code>
<code class="emphasize">→[1]  r←{0∊⍴⍵:1⊃⍵ ⋄ ↑{⍺,';',⍵}/⍵}_IniFilename</code>
</div>
<code class="header" id="listing_173">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_Default &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_Default arg</code>
<code class="emphasize">→[1]  _default←arg.NewValue</code>
</div>
<code class="header" id="listing_174">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_Default &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_Default</code>
<code class="emphasize">→[1]  ⍎'No default defined!'Signal 6/⍨0=⎕NC'_default'</code>
<code class="emphasize">→[2]  r←_default</code>
</div>
<code class="header" id="listing_175">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_OldStyleFlag &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_OldStyleFlag</code>
<code class="emphasize">→[1]  r←_oldStyleFlag</code>
</div>
<code class="header" id="listing_176">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_EstablishedAt &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_EstablishedAt</code>
<code class="emphasize">→[1]  r←_EstablishedAt</code>
</div>
<code class="header" id="listing_177">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_Changed &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_Changed</code>
<code class="emphasize">→[1]  r←_changed</code>
</div>
<code class="header" id="listing_178">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Version &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Version</code>
<code> [1]  :Access Public Shared</code>
<code class="emphasize">→[2]  r←'IniFiles' '5.0.3+22' '2022-04-13'</code>
</div>
<code class="header" id="listing_179">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.GetSections &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetSections</code>
<code> [1]     ⍝ Returns a vector of strings with sections names.</code>
<code> [2]  :Access Public Instance</code>
<code class="emphasize">→[3]  r←1 ⎕C 1↓¨_Sections</code>
</div>
<code class="header" id="listing_180">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.GetIniFiles &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←GetIniFiles filename</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ Returns a list of INI files.\\</code>
<code> [3]      ⍝ Let's assume that "foo.ini" ←→ filename. Let's also assume that the current computer's name is "JohnDoe".</code>
<code> [4]      ⍝ Finally let's assume that there are two INI files in the current directory:</code>
<code> [5]      ⍝ * foo.ini</code>
<code> [6]      ⍝ * foo_johndoe.ini\\</code>
<code> [7]      ⍝ Then `GetIniFiles` returns:\\</code>
<code> [8]      ⍝ `'foo.ini' 'foo_johndoe,ini' ← #.IniFiles.GetIniFiles`\\</code>
<code> [9]      ⍝ If there is no file foo_johndoe.ini however then the result is:\\</code>
<code> [10]     ⍝ `'foo.ini' ← #.IniFiles.GetIniFiles`</code>
<code class="emphasize">→[11]  A←(⊃⊃⎕CLASS ⎕THIS).##.⍎'APLTreeUtils2'</code>
<code class="emphasize">→[12]  (p fn)←{('\'∊⍵):A.SplitPath ⍵ ⋄ ''⍵}filename</code>
<code class="emphasize">→[13]  (fn ext)←{('.'∊⍵):'.'A.SplitPath ⍵ ⋄ (⍵,'.')'ini'}fn</code>
<code class="emphasize">→[14]  f1←⎕NEXISTS fn1←p,fn,ext</code>
<code class="emphasize">→[15]  f2←⎕NEXISTS fn2←p,(¯1↓fn),'_',GetComputerName,'.',ext</code>
<code class="emphasize">→[16]  ⍎('Could not find ',fn1)Signal 6/⍨f1=0</code>
<code class="emphasize">→[17]  r←(f1/⊂fn1),f2/⊂fn2</code>
</div>
<code class="header" id="listing_181">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Import &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  (r data allRemarks)←Import(data allRemarks)</code>
<code class="emphasize">→[1]   bool←∨/¨'!Import'∘⍷¨data                  ⍝ Where are the files to be imported?</code>
<code class="emphasize">→[2]   lnos←⍳⍴data                               ⍝ Create Line Numbers</code>
<code class="emphasize">→[3]   il←bool⌿data                              ⍝ Create it (Import List)</code>
<code class="emphasize">→[4]   ilRemarks←bool/allRemarks                 ⍝ Remarks belonging to !Import</code>
<code class="emphasize">→[5]   ⍎'!Import statement must not have a remark'Signal 911/⍨0∨.&lt;≢¨ilRemarks</code>
<code class="emphasize">→[6]   data←(~bool)/data                         ⍝ Remove the "!Import" lines from "data" numbers</code>
<code class="emphasize">→[7]   lnos←bool/lnos                            ⍝ Remove the "!Import" lines from the line numbers</code>
<code class="emphasize">→[8]   allRemarks←(~bool)/allRemarks             ⍝ Remove the "!Import" lines from "allRemarks"</code>
<code class="emphasize">→[9]   il←(+/∧\' '=↑il)↓¨il                      ⍝ Drop any leading blanks</code>
<code class="emphasize">→[10]  il←⎕C¨(il⍳¨' ')↓¨il                       ⍝ Drop method name, leaving the filenames</code>
<code class="emphasize">→[11]  refToIniFile←⊃1⊃⎕CLASS ⎕THIS              ⍝ Ref to itself</code>
<code class="emphasize">→[12]  r←0 3⍴⊂''</code>
<code class="emphasize">→[13]  :For this :In il</code>
<code class="emphasize">→[14]      :If (~':'∊this)∧~(1⍴this)∊'/\'        ⍝ Does not start with / and has no drive letter?</code>
<code class="emphasize">→[15]          fullName←(⊃1 ⎕NPARTS''),'\',this  ⍝ Then make it absolute</code>
<code> [16]      :Else</code>
<code class="emphasize">→[17]          fullName←this                     ⍝ Is already absolute</code>
<code> [18]      :EndIf</code>
<code class="emphasize">→[19]      fullName←⊃,/1 ⎕NPARTS fullName</code>
<code class="emphasize">→[20]      'Tries to import itself'⎕SIGNAL 11/⍨(⊂⎕C fullName)∊⎕C _IniFilename</code>
<code class="emphasize">→[21]      temp←(⎕NEW refToIniFile(fullName _debugFlag)).Convert ⎕NS''  ⍝ Create an instance</code>
<code class="emphasize">→[22]      buff←temp.List''</code>
<code class="emphasize">→[23]      buff[;3]←DoubleCurlies¨buff[;3]</code>
<code class="emphasize">→[24]      r⍪←buff</code>
<code> [25]  :EndFor</code>
<code class="emphasize">→[26]  _import←0&lt;1⊃⍴r</code>
</div>
<code class="header" id="listing_182">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.make0 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> make0</code>
<code> [1]       ⍝ No parameter: Creates a new INI file by definition</code>
<code> [2]  :Implements Constructor</code>
<code> [3]  :Access Public</code>
<code class="emphasize">→[4]  Init ⍬</code>
<code class="emphasize">→[5]  CallCreate''</code>
</div>
<code class="header" id="listing_183">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.make1 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> make1(IniFilename)</code>
<code> [1]       ⍝ Takes the name of one or more INI files to be processed as parameter.</code>
<code> [2]  :Implements Constructor</code>
<code> [3]  :Access Public</code>
<code class="emphasize">→[4]  Init ⍬</code>
<code class="emphasize">→[5]  CallCreate IniFilename</code>
</div>
<code class="header" id="listing_184">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.make2 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  make2(IniFilename debugFlag)</code>
<code> [1]   :Implements Constructor</code>
<code> [2]   :Access Public</code>
<code> [3]        ⍝ Takes the name of the INI file and what originally was supposed</code>
<code> [4]        ⍝ to be a reference to the `UnicodeFile` class as parameters.\\</code>
<code> [5]        ⍝ However, that property is not needed any longer (since version 1.6),</code>
<code> [6]        ⍝ and for that reason the argument `debugFlag` is ignored when it is</code>
<code> [7]        ⍝ a string. If it is a Boolean then however it is treated as a debug</code>
<code> [8]        ⍝ flag. It default is 0 but one can specify a 1.</code>
<code> [9]        ⍝</code>
<code> [10]       ⍝ Setting it to 1 has two effects:</code>
<code> [11]       ⍝ * All error trapping is deactivated.</code>
<code> [12]       ⍝ * Instead of signalling an error the program stops.</code>
<code class="emphasize">→[13]  Init ⍬</code>
<code class="emphasize">→[14]  _debugFlag←{((⊂⍵)∊0 1):⍵ ⋄ 0}debugFlag</code>
<code class="emphasize">→[15]  'Invalid parameter: "debugFlag"; not a boolean'⎕SIGNAL 11/⍨∨/~_debugFlag∊0 1</code>
<code class="emphasize">→[16]  CallCreate IniFilename</code>
</div>
<code class="header" id="listing_185">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Init &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Init dummy</code>
<code class="emphasize">→[1]  ⎕ML←1 ⋄ ⎕IO←1</code>
<code class="emphasize">→[2]  _import←0</code>
<code class="emphasize">→[3]  _debugFlag←0</code>
<code class="emphasize">→[4]  _EN←⍬</code>
<code class="emphasize">→[5]  _EstablishedAt←Timestamp2Float ⎕TS</code>
<code class="emphasize">→[6]  A←(⊃⊃⎕CLASS ⎕THIS).##.APLTreeUtils2</code>
</div>
<code class="header" id="listing_186">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Create &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  Create IniFilename</code>
<code> [1]       ⍝ Called by the official constructors</code>
<code class="emphasize">→[2]   _changed←_oldStyleFlag←0</code>
<code class="emphasize">→[3]   _Sections←''</code>
<code class="emphasize">→[4]   ⎕TRAP←(1+_debugFlag)⊃((0 'C' '_EN←⎕en ⋄ (⎕IO⊃⎕DM)⎕signal 911'))((0 1000)'S')</code>
<code class="emphasize">→[5]   :If 0≠≢_IniFilename←IniFilename</code>
<code class="emphasize">→[6]       _IniFilename←CheckExtension¨_IniFilename</code>
<code class="emphasize">→[7]       (data _oldStyleFlag allRemarks)←EvaluateINIs _IniFilename</code>
<code class="emphasize">→[8]       import←''</code>
<code class="emphasize">→[9]       :If 0&lt;+/∨/¨'!Import'∘⍷¨data</code>
<code class="emphasize">→[10]          :Trap 911</code>
<code class="emphasize">→[11]              (import data allRemarks)←Import data allRemarks</code>
<code> [12]          :Else</code>
<code class="emphasize">→[13]              ⍎911 Signal⍨1⊃⎕DM</code>
<code> [14]          :EndTrap</code>
<code> [15]      :EndIf</code>
<code class="emphasize">→[16]      :Trap 911</code>
<code class="emphasize">→[17]          (data locals allRemarks)←GetLocals data allRemarks</code>
<code> [18]      :Else</code>
<code class="emphasize">→[19]          ⍎911 Signal⍨1⊃⎕DM</code>
<code> [20]      :EndTrap</code>
<code class="emphasize">→[21]      data←{(0=≢⍵):⍵ ⋄ ⊃,/SortSection¨⍵}SplitSections data</code>
<code class="emphasize">→[22]      :If 0≠≢import</code>
<code class="emphasize">→[23]          (data allRemarks)←MergeImport import data allRemarks</code>
<code> [24]      :EndIf</code>
<code class="emphasize">→[25]      :If 0≠≢data</code>
<code class="emphasize">→[26]          sep←+\'['=⊃¨data</code>
<code class="emphasize">→[27]          (data allRemarks)←sep∘{⎕ML←3 ⋄ ⍺⊂⍵}¨data allRemarks</code>
<code class="emphasize">→[28]          :If ∨/invalid←(' '∊¨~∘'[]'∘⊃¨data)∨¯1=⊃∘⎕NC¨~∘'[ ]'∘⊃¨data</code>
<code class="emphasize">→[29]              ⍎11 Signal⍨'Invalid section name(s): ',⊃{⍺,', ',⍵}/invalid/⊃¨data</code>
<code> [30]          :EndIf</code>
<code class="emphasize">→[31]      :AndIf 0≠≢_Sections←'_',¨∪~∘'[ ]'∘⊃¨data</code>
<code class="emphasize">→[32]          ⎕NS∘''¨sec←1 ⎕C _Sections</code>
<code class="emphasize">→[33]          (⍎¨sec)._Data←⊂0 5⍴''</code>
<code class="emphasize">→[34]          ProcessSections data allRemarks</code>
<code> [35]      :EndIf</code>
<code> [36]  :EndIf</code>
<code class="emphasize">→[37]  ⎕DF(⍕⎕THIS),' on &lt;',({0∊⍴⍵:⍵ ⋄ ↑{⍺,';',⍵}/⍵}_IniFilename),'&gt;'</code>
</div>
<code class="header" id="listing_187">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.ProcessSections &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  ProcessSections(data allRemarks)</code>
<code class="emphasize">→[1]   :For thisSection sectionRemarks :In ↓⍉↑data allRemarks</code>
<code class="emphasize">→[2]       this←'_','[ ]'~⍨1⊃thisSection</code>
<code class="emphasize">→[3]       ref←⍎1 ⎕C this</code>
<code class="emphasize">→[4]       ref.generalRemarks←⊂{⍵↓⍨+/∧\' '=⍵}1⊃sectionRemarks</code>
<code class="emphasize">→[5]       buffer←{i←⍵⍳'=' ⋄ ((i-1)↑⍵)(i↓⍵)}¨1↓thisSection</code>
<code class="emphasize">→[6]       :If OldStyleFlag</code>
<code class="emphasize">→[7]       :AndIf ∨/(0&lt;≢¨∊¨buffer)∧¯1=⊃∘⎕NC¨(⊃¨buffer)~¨' '</code>
<code class="emphasize">→[8]           ⍎11 Signal⍨'Check value names: ',↑{⍺,',',⍵}/{(⊃¨⍵)/⍨(0&lt;≢¨∊¨⍵)∧¯1=⊃∘⎕NC¨⊃¨⍵}buffer</code>
<code> [9]       :EndIf</code>
<code class="emphasize">→[10]      :If ∨/' '∊¨A.DLB A.DTB','~¨⍨⊃¨buffer</code>
<code class="emphasize">→[11]          ⍎11 Signal⍨'Invalid value name(s): ',⊃{⍺,', ',⍵}/{⍵/⍨' '∊¨⍵}⊃¨buffer</code>
<code> [12]      :EndIf</code>
<code class="emphasize">→[13]      toc←' '~¨⍨1⊃¨buffer</code>
<code class="emphasize">→[14]      TOC←1 ⎕C toc</code>
<code class="emphasize">→[15]      buffer←2⊃¨{2↑⍵,'' ''}¨buffer</code>
<code class="emphasize">→[16]      EstablishValuesInSection(TOC toc buffer)</code>
<code class="emphasize">→[17]      :If 0=≢ref._Data</code>
<code class="emphasize">→[18]          ref.Remarks←''</code>
<code> [19]      :Else</code>
<code class="emphasize">→[20]          ref.Remarks←sectionRemarks~↑,/{2=|≡⍵:⍵ ⋄ ⊂⍵}¨ref._Data[;4]  ⍝ ⊃ ←→ ↑ ?!</code>
<code> [21]      :EndIf</code>
<code> [22]  :EndFor</code>
</div>
<code class="header" id="listing_188">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.EstablishValuesInSection &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  EstablishValuesInSection(TOC toc buffer)</code>
<code class="emphasize">→[1]   :For i :In ⍳⍴,toc</code>
<code class="emphasize">→[2]       (NAME name)←i⊃¨TOC toc</code>
<code class="emphasize">→[3]       value←i⊃buffer</code>
<code class="emphasize">→[4]       remark←{⍵↓⍨+/∧\' '=⍵}(1+i)⊃sectionRemarks ⍝ first one is the section</code>
<code class="emphasize">→[5]       :If 0∊⍴name</code>
<code class="emphasize">→[6]           ref._Data⍪←'' '' ''remark''</code>
<code> [7]       :Else</code>
<code class="emphasize">→[8]           :If 0∊⍴value</code>
<code class="emphasize">→[9]           :AndIf 0=_oldStyleFlag</code>
<code class="emphasize">→[10]              ⍎911 Signal⍨'Invalid line: ',i⊃toc</code>
<code class="emphasize">→[11]          :ElseIf ∧/'{}'∊value</code>
<code class="emphasize">→[12]          :AndIf ~OldStyleFlag</code>
<code class="emphasize">→[13]              :Trap 0</code>
<code class="emphasize">→[14]                  value2←⍎ReplaceCurlies(ref._Data[;5],TOC~¨',')value</code>
<code> [15]              :Else</code>
<code class="emphasize">→[16]                  ⍎911 Signal⍨'Invalid value: ',name</code>
<code> [17]              :EndTrap</code>
<code> [18]          :Else</code>
<code class="emphasize">→[19]              :If _oldStyleFlag</code>
<code class="emphasize">→[20]                  :If ''''∧.=2↑¯1⌽value2←value</code>
<code class="emphasize">→[21]                      :Trap 2 11</code>
<code class="emphasize">→[22]                          value2←⍎value2</code>
<code> [23]                      :Else</code>
<code class="emphasize">→[24]                          ⎕EN ⎕SIGNAL⍨'Invalid definition, check: ',value2</code>
<code> [25]                      :EndTrap</code>
<code> [26]                  :EndIf</code>
<code> [27]              :Else</code>
<code class="emphasize">→[28]                  :Trap 2 11</code>
<code class="emphasize">→[29]                      value2←⍎value</code>
<code> [30]                  :Else</code>
<code class="emphasize">→[31]                      ⎕EN ⎕SIGNAL⍨'Invalid definition, check: ',value</code>
<code> [32]                  :EndTrap</code>
<code> [33]              :EndIf</code>
<code class="emphasize">→[34]              :If ~0∊⍴value2</code>
<code class="emphasize">→[35]                  ⍎('Invalid definition: ',name)Signal 911/⍨~0 1∊⍨≡value2</code>
<code> [36]              :EndIf</code>
<code> [37]          :EndIf</code>
<code class="emphasize">→[38]          where←ref._Data[;5]⍳⊂NAME~','</code>
<code class="emphasize">→[39]          :If where&gt;≢ref._Data</code>
<code class="emphasize">→[40]              ref._Data⍪←name value2 value remark NAME</code>
<code class="emphasize">→[41]          :ElseIf ','∊name</code>
<code class="emphasize">→[42]              :If 0=≢2⊃ref._Data[where;] ⍝ Is it the first time?</code>
<code class="emphasize">→[43]                  ref._Data[where;4]←⊂¨ref._Data[where;4]</code>
<code class="emphasize">→[44]                  ref._Data[where;3]←⊂''</code>
<code> [45]              :EndIf</code>
<code class="emphasize">→[46]              ref._Data[where;2]←⊂(2⊃ref._Data[where;]),⊂value2</code>
<code class="emphasize">→[47]              ref._Data[where;3]←⊂(3⊃ref._Data[where;]),⊂value</code>
<code class="emphasize">→[48]              ref._Data[where;4]←⊂(4⊃ref._Data[where;]),⊂remark</code>
<code> [49]          :Else</code>
<code class="emphasize">→[50]              ref._Data[where;2 3 4]←value2 value remark</code>
<code> [51]          :EndIf</code>
<code> [52]      :EndIf</code>
<code> [53]  :EndFor</code>
</div>
<code class="header" id="listing_189">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Convert &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{type}Convert r</code>
<code> [1]   :Access Public</code>
<code> [2]      ⍝ Takes a ref to a (typically empty) namespace and populates it with the values</code>
<code> [3]      ⍝ defined by the INI file entries.\\</code>
<code> [4]      ⍝ If the optional left argument is "flat", sections are ignored and every entry</code>
<code> [5]      ⍝ gets a simple variable.\\</code>
<code> [6]      ⍝ If it's not "flat" then section names are used as names for sub-namespaces.\\</code>
<code> [7]      ⍝ Note that `Convert` will fail if the names used for sections and values</code>
<code> [8]      ⍝ are not proper APL names.\\</code>
<code> [9]      ⍝ `Convert` injects a method `List` into the resulting namespace which</code>
<code> [10]     ⍝ prints a matrix to the session with all names and values.</code>
<code class="emphasize">→[11]  type←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ''}'type'</code>
<code class="emphasize">→[12]  ⍎'Left argument must be either empty or "flat"'Signal 11/⍨~(0∊⍴type)∨'flat'≡type</code>
<code class="emphasize">→[13]  data←Get ⍬ ⍬</code>
<code class="emphasize">→[14]  :If 'flat'≡type</code>
<code class="emphasize">→[15]      :If 0≠≢data←(0&lt;≢¨data[;2])⌿data                   ⍝ Isolate pure data</code>
<code class="emphasize">→[16]          (theseNames theseValues)←↓⍉data[;2 3]         ⍝ All the names and values</code>
<code class="emphasize">→[17]          theseNames r.{⍎⍺,'←⍵'}¨theseValues            ⍝ Assign the values to the names</code>
<code> [18]      :EndIf</code>
<code class="emphasize">→[19]      r.⎕FX'r←List;⎕IO;⎕ML' '(⎕IO ⎕ML)←0 3' 'r←{⍵,[.5]⍎¨⍵}⎕nl -2'  ⍝ Establish method "List"</code>
<code> [20]  :Else</code>
<code class="emphasize">→[21]      allValues←data[;3]</code>
<code class="emphasize">→[22]      :For thisSection :In data[;1]~⊂''                 ⍝ Loop over sections</code>
<code class="emphasize">→[23]          s←data[;1]⍳⊂thisSection                       ⍝ Where does the section start?</code>
<code class="emphasize">→[24]          :If 0&lt;noOf←{+/∧\0=≢¨⍵}s↓data[;1]              ⍝ How many entries has the section?</code>
<code class="emphasize">→[25]              rf←⍎'r.',thisSection,'←⎕NS'''''           ⍝ Create a namespace name after the section</code>
<code class="emphasize">→[26]              rf.⎕DF thisSection                        ⍝ Set the display format</code>
<code class="emphasize">→[27]              theseNames←noOf↑s↓data[;2]                ⍝ All the names and ...</code>
<code class="emphasize">→[28]              theseValues←noOf↑s↓allValues              ⍝ ... values of this section</code>
<code class="emphasize">→[29]              :If ¯1∊⊃∘⎕NC¨theseNames</code>
<code class="emphasize">→[30]                  ⍎11 Signal⍨'Invalid value name(s): ',{⊃{⍺,', ',⍵}/⍵/⍨¯1=⊃∘⎕NC¨⍵}theseNames</code>
<code> [31]              :EndIf</code>
<code class="emphasize">→[32]              theseNames rf.{⍎⍺,'←⍵'}¨theseValues       ⍝ Assign values to names inside that namespace</code>
<code> [33]          :EndIf</code>
<code> [34]      :EndFor</code>
<code class="emphasize">→[35]      code←''</code>
<code class="emphasize">→[36]      code,←⊂' r←List section;toc;section_U;ind'</code>
<code class="emphasize">→[37]      code,←⊂'⍝ If "section" is empty or "*", all sections are returned'</code>
<code class="emphasize">→[38]      code,←⊂' ⎕IO←1 ⋄ ⎕ML←1'</code>
<code class="emphasize">→[39]      code,←⊂' r←'''''</code>
<code class="emphasize">→[40]      code,←⊂' :If (0∊⍴section)∨(,''*'')≡,section'</code>
<code class="emphasize">→[41]      code,←⊂'     :If ~0∊⍴⎕NL-9'</code>
<code class="emphasize">→[42]      code,←⊂'         r←↑⍪/{⍵,⍵.{{⎕IO←0 ⋄ ⎕ML←3 ⋄ ⍵,[0.5]⍎¨⍵}⎕NL-2}⍵}¨⍎¨⎕NL-9'</code>
<code class="emphasize">→[43]      code,←⊂'     :EndIf'</code>
<code class="emphasize">→[44]      code,←⊂' :Else'</code>
<code class="emphasize">→[45]      code,←⊂'     ''Invalid right argument''⎕SIGNAL 11/⍨~(≡section)∊0 1'</code>
<code class="emphasize">→[46]      code,←⊂'     toc←⎕NL-9'</code>
<code class="emphasize">→[47]      code,←⊂'     section_U←1(819⌶)section'</code>
<code class="emphasize">→[48]      code,←⊂'     :If (⊂section_U)∊toc'</code>
<code class="emphasize">→[49]      code,←⊂'         ind←toc⍳⊂section_U'</code>
<code class="emphasize">→[50]      code,←⊂'         r←{⍵.{{⎕IO←0 ⋄ ⎕ML←3 ⋄ ⍵,[0.5]⍎¨⍵}⎕NL-2}⍵}⍎ind⊃toc'</code>
<code class="emphasize">→[51]      code,←⊂'     :EndIf'</code>
<code class="emphasize">→[52]      code,←⊂' :EndIf'</code>
<code class="emphasize">→[53]      r.⎕FX code                                        ⍝ Establish method "List"</code>
<code> [54]  :EndIf</code>
</div>
<code class="header" id="listing_190">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Get_ &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{default}Get_ name</code>
<code> [1]   :Access Public</code>
<code class="emphasize">→[2]   :If 0 1∊⍨≡name</code>
<code class="emphasize">→[3]       (section key)←{∨/b←':'=⍵:⍵{((¯1+⍵)↑⍺)(⍵↓⍺)}b⍳1 ⋄ ⍵}name</code>
<code> [4]   :Else</code>
<code class="emphasize">→[5]       (section key)←name</code>
<code> [6]   :EndIf</code>
<code class="emphasize">→[7]   ⍎'Invalid syntax!'Signal 11/⍨∧/2=¨≡¨section key</code>
<code class="emphasize">→[8]   section←{0∊⍴⍵:⍵ ⋄ '_',⍵}section</code>
<code class="emphasize">→[9]   :If ⍬≡section</code>
<code class="emphasize">→[10]      section←''</code>
<code> [11]  :EndIf</code>
<code class="emphasize">→[12]  SECTION←1 ⎕C section</code>
<code class="emphasize">→[13]  :If ((⊂section)∊''⍬)∧(⊂key)∊''⍬</code>
<code class="emphasize">→[14]      r←0 3⍴''</code>
<code class="emphasize">→[15]      :For thisSection :In _SECTIONS</code>
<code class="emphasize">→[16]          r⍪←(⊂1↓thisSection),'' ''</code>
<code class="emphasize">→[17]          r⍪←(⊂''),thisSection⍎'_Data[;1 2]'</code>
<code> [18]      :EndFor</code>
<code class="emphasize">→[19]  :ElseIf (⊂key)∊''⍬</code>
<code class="emphasize">→[20]      :If (1⊃⍴_Sections)≥where←_SECTIONS⍳⊂SECTION</code>
<code class="emphasize">→[21]          r←(where⊃_SECTIONS)⍎'_Data[;1 2]'</code>
<code> [22]      :Else</code>
<code class="emphasize">→[23]          ⍎6 Signal⍨'Unknown: "',(⍕∊section),'"'</code>
<code> [24]      :EndIf</code>
<code> [25]  :Else</code>
<code class="emphasize">→[26]      :If 0=≢section</code>
<code class="emphasize">→[27]          r←⊃⍪/{⍵{(⊂⍺),⍵._Data}⍎⍵}¨_Sections</code>
<code> [28]      :Else</code>
<code class="emphasize">→[29]          row←_SECTIONS⍳⊂SECTION</code>
<code class="emphasize">→[30]          :If (1⊃⍴_Sections)&lt;row</code>
<code class="emphasize">→[31]              ⍎6 Signal⍨'Unknown section'</code>
<code> [32]          :EndIf</code>
<code> [33]      :EndIf</code>
<code class="emphasize">→[34]      this←row⊃_Sections</code>
<code class="emphasize">→[35]      ref←⍎row⊃_SECTIONS</code>
<code class="emphasize">→[36]      :If 0=≢key</code>
<code class="emphasize">→[37]          r←ref._Data</code>
<code> [38]      :Else</code>
<code class="emphasize">→[39]          key←{0 1∊⍨≡⍵:⊂⍵ ⋄ ⍵}key</code>
<code class="emphasize">→[40]          subRow←ref._Data[;5]⍳1 ⎕C key</code>
<code class="emphasize">→[41]          :If ∨/bool←(⊃⍴ref._Data)&lt;subRow</code>
<code class="emphasize">→[42]              :If 0=⎕NC'default'</code>
<code class="emphasize">→[43]                  :If 0=⎕NC'Default'</code>
<code class="emphasize">→[44]                      ⍎6 Signal⍨'Value Error: "',(↑{⍺,',',⍵}/bool/key),'"'</code>
<code> [45]                  :Else</code>
<code class="emphasize">→[46]                      :Trap 6</code>
<code class="emphasize">→[47]                          r←(ref._Data[;2],⊂Default)[subRow]</code>
<code> [48]                      :Else</code>
<code class="emphasize">→[49]                          ⍎(1⊃⎕DM)Signal ⎕EN</code>
<code> [50]                      :EndTrap</code>
<code> [51]                  :EndIf</code>
<code> [52]              :Else</code>
<code class="emphasize">→[53]                  r←(ref._Data[;2],⊂default)[subRow]</code>
<code> [54]              :EndIf</code>
<code> [55]          :Else</code>
<code class="emphasize">→[56]              r←ref._Data[subRow;2]</code>
<code> [57]          :EndIf</code>
<code> [58]      :EndIf</code>
<code> [59]  :EndIf</code>
<code class="emphasize">→[60]  :If 2=⍴⍴r</code>
<code class="emphasize">→[61]      :Select 2⊃⍴r</code>
<code class="emphasize">→[62]      :Case 2</code>
<code class="emphasize">→[63]          r⌿⍨←0&lt;≢¨r[;1]</code>
<code class="emphasize">→[64]      :Case 3</code>
<code class="emphasize">→[65]          r⌿⍨←0∨.≠⍨≢¨r</code>
<code> [66]      :EndSelect</code>
<code> [67]  :EndIf</code>
</div>
<code class="header" id="listing_191">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Get &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{default}Get name</code>
<code> [1]      ⍝ Returns the (enclosed) value for a single value or a vector of values</code>
<code> [2]      ⍝ if more than one key was provided.\\</code>
<code> [3]      ⍝ `name` might be one of:</code>
<code> [4]      ⍝ * `('sectionName' 'key')`</code>
<code> [5]      ⍝ * `(('sectionName' 'key1')('sectionName' 'key2'))`</code>
<code> [6]      ⍝ * `'sectionName:key'`</code>
<code> [7]      ⍝ * `('sectionName:key1' 'sectionName:key2')`</code>
<code> [8]      ⍝</code>
<code> [9]      ⍝ Note that mixed syntax is not supported:</code>
<code> [10]     ⍝ ~~~</code>
<code> [11]     ⍝ ('sectionName' ('key1' 'key2')) ⍝  invalid!</code>
<code> [12]     ⍝ ('sectionName' 'key1') 'sectionName:key2' ⍝  invalid!</code>
<code> [13]     ⍝ ~~~</code>
<code> [14]     ⍝ If "key" is empty, **all** values of that sections are returned.\\</code>
<code> [15]     ⍝ If a requested value is not available, "default" (the left argument)</code>
<code> [16]     ⍝ is returned if specified, otherwise the property "Default" is returned</code>
<code> [17]     ⍝ if specified; otherwise an interrupt is signalled.</code>
<code> [18]  :Access Public</code>
<code class="emphasize">→[19]  :If 0=⎕NC'default'</code>
<code class="emphasize">→[20]      r←Get_ name</code>
<code> [21]  :Else</code>
<code class="emphasize">→[22]      r←default Get_ name</code>
<code> [23]  :EndIf</code>
</div>
<code class="header" id="listing_192">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Put &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←data Put name</code>
<code> [1]      ⍝ Set `name` to `data`.\\</code>
<code> [2]      ⍝ Note that `name` can be:</code>
<code> [3]      ⍝ * A simple string. Must provide both, a "section" and a `name`,</code>
<code> [4]      ⍝   separated by a colon as in "section:key"</code>
<code> [5]      ⍝ * A nested vector of length 2.</code>
<code> [6]      ⍝</code>
<code> [7]      ⍝ Examples for the latter:</code>
<code> [8]      ⍝ ~~~</code>
<code> [9]      ⍝ `1⊃name ←→ section name`</code>
<code> [10]     ⍝ `2⊃name ←→ key (or entry name)`</code>
<code> [11]     ⍝ ~~~</code>
<code> [12]  :Access Public</code>
<code class="emphasize">→[13]  r←⍬</code>
<code class="emphasize">→[14]  data Put_ name</code>
</div>
<code class="header" id="listing_193">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Put_ &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  data Put_ name</code>
<code class="emphasize">→[1]   :If 0 1∊⍨≡name</code>
<code class="emphasize">→[2]       ⍎'Must be specified as "sectionName:key"'Signal 11/⍨~':'∊name</code>
<code class="emphasize">→[3]       (section key)←{a←⍵⍳':' ⋄ (⍵↑⍨a-1)(a↓⍵)}name</code>
<code> [4]   :Else</code>
<code class="emphasize">→[5]       (section key)←name</code>
<code> [6]   :EndIf</code>
<code class="emphasize">→[7]   section←'_',section</code>
<code class="emphasize">→[8]   (SECTION KEY)←1 ⎕C(section key)</code>
<code class="emphasize">→[9]   :If (⊂SECTION)∊_SECTIONS</code>
<code class="emphasize">→[10]      where←_SECTIONS⍳⊂SECTION</code>
<code class="emphasize">→[11]      ref←⍎SECTION</code>
<code> [12]  :Else</code>
<code class="emphasize">→[13]      ⍎6 Signal⍨'Unkown section; (consider executing "AddSection")'</code>
<code> [14]  :EndIf</code>
<code class="emphasize">→[15]  KEYS←ref._Data[;5]</code>
<code class="emphasize">→[16]  :If (⎕DR data)∊11 83 645</code>
<code class="emphasize">→[17]      buffer←data(⍕data)</code>
<code> [18]  :Else</code>
<code class="emphasize">→[19]      :If 2=|≡data</code>
<code class="emphasize">→[20]          buffer←({ReplaceCurlies KEYS ⍵}¨data)({'''',⍵,''''}¨,data)</code>
<code> [21]      :Else</code>
<code class="emphasize">→[22]          buffer←(ReplaceCurlies KEYS data)('''',data,'''')</code>
<code> [23]      :EndIf</code>
<code> [24]  :EndIf</code>
<code class="emphasize">→[25]  :If (⊂KEY)∊KEYS</code>
<code class="emphasize">→[26]      where←KEYS⍳⊂KEY</code>
<code class="emphasize">→[27]      :If ~_changed</code>
<code class="emphasize">→[28]          _changed←data≢2⊃ref._Data[where;]</code>
<code> [29]      :EndIf</code>
<code class="emphasize">→[30]      ref._Data[where;2 3]←buffer</code>
<code> [31]  :Else</code>
<code class="emphasize">→[32]      ref._Data⍪←(⊂key),buffer,(⊂''),⊂1 ⎕C key</code>
<code class="emphasize">→[33]      _changed←1</code>
<code> [34]  :EndIf</code>
</div>
<code class="header" id="listing_194">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Delete &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←Delete name</code>
<code> [1]   :Access Public</code>
<code> [2]      ⍝ Delete a key or a section. Returns 1 if there was something to delete.</code>
<code> [3]      ⍝</code>
<code> [4]      ⍝ To delete "myKey" from "MySection":</code>
<code> [5]      ⍝ ~~~</code>
<code> [6]      ⍝ `('MySection' 'MyKey')`</code>
<code> [7]      ⍝ ~~~</code>
<code> [8]      ⍝ "name" can also be a nested vector:</code>
<code> [9]      ⍝ ~~~</code>
<code> [10]     ⍝ `(('SectionA' 'key1') ('SectionA' 'key2'))`</code>
<code> [11]     ⍝ ~~~</code>
<code> [12]     ⍝ or a full name like:</code>
<code> [13]     ⍝ ~~~</code>
<code> [14]     ⍝ `('section:key') or (('section:key1') ('section:key1'))`</code>
<code> [15]     ⍝ ~~~</code>
<code> [16]     ⍝ Note that `('section' ('key1' 'key2'))` is **not** a valid syntax.</code>
<code> [17]     ⍝</code>
<code> [18]     ⍝ To delete an entire section:</code>
<code> [19]     ⍝ ~~~</code>
<code> [20]     ⍝ `Delete 'foo:'`</code>
<code> [21]     ⍝ ~~~</code>
<code> [22]     ⍝ If `name` is a vector of names, `Delete` calls itself recursively.</code>
<code> [23]     ⍝ Mixed syntax is **not** supported, so use one of:</code>
<code> [24]     ⍝ ~~~</code>
<code> [25]     ⍝ Delete ('sectiona' 'key1')('otherSection' 'key2')('thirdSection' '')</code>
<code> [26]     ⍝ Delete ('sectiona:key1' 'otherSection:key2' 'thirdSection:')</code>
<code> [27]     ⍝ ~~~</code>
<code class="emphasize">→[28]  r←0</code>
<code class="emphasize">→[29]  :If 0 1∊⍨≡name</code>
<code class="emphasize">→[30]      ⍎'Invalid right argument'Signal 11/⍨1≠':'+.=name</code>
<code class="emphasize">→[31]      (section key)←' '~¨⍨2↑1 ⎕C':'(≠⊆⊢)name</code>
<code class="emphasize">→[32]      section←'_',section</code>
<code class="emphasize">→[33]      :If 0=≢key</code>
<code class="emphasize">→[34]          :If 9=⎕NC section</code>
<code class="emphasize">→[35]              ⎕EX section</code>
<code class="emphasize">→[36]              _Sections←(_SECTIONS≢¨⊂section)/_Sections</code>
<code class="emphasize">→[37]              r←_changed←1</code>
<code> [38]          :EndIf</code>
<code> [39]      :Else</code>
<code> [40]               ⍝key←{⍵∧.=' ':'' ⋄ ⍵}key</code>
<code class="emphasize">→[41]          (section key)←1 ⎕C':'(≠⊆⊢)name</code>
<code class="emphasize">→[42]          section←'_',section</code>
<code class="emphasize">→[43]          :If (⊂section)∊_SECTIONS</code>
<code class="emphasize">→[44]              TOC←{⍵._Data[;5]}ref←⍎section</code>
<code class="emphasize">→[45]          :AndIf r←0&lt;+/bool←(⊂key)≡¨TOC</code>
<code class="emphasize">→[46]              ref._Data⌿⍨←~bool</code>
<code class="emphasize">→[47]              r←_changed←1</code>
<code> [48]          :EndIf</code>
<code> [49]      :EndIf</code>
<code> [50]  :Else</code>
<code class="emphasize">→[51]      :If 0 1∊⍨≡2⊃name</code>
<code class="emphasize">→[52]          :If 2=|≡name</code>
<code class="emphasize">→[53]          :AndIf ~':'∊1⊃,name</code>
<code class="emphasize">→[54]              r←Delete⊃{⍺,':',⍵}/name</code>
<code> [55]          :Else</code>
<code class="emphasize">→[56]              r←Delete¨name</code>
<code> [57]          :EndIf</code>
<code> [58]      :Else</code>
<code class="emphasize">→[59]          :If 3=|≡name</code>
<code class="emphasize">→[60]          :AndIf 1 2≡≡¨name</code>
<code class="emphasize">→[61]              r←Delete¨(⊂name[1]),¨⊂¨2⊃name</code>
<code> [62]          :Else</code>
<code class="emphasize">→[63]              r←⍬</code>
<code class="emphasize">→[64]              :For this :In name</code>
<code class="emphasize">→[65]                  r,←Delete this</code>
<code> [66]              :EndFor</code>
<code> [67]          :EndIf</code>
<code> [68]      :EndIf</code>
<code> [69]  :EndIf</code>
</div>
<code class="header" id="listing_195">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Exist &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←Exist name</code>
<code> [1]   :Access Public</code>
<code> [2]      ⍝ Returns 1 if `name` exists. `name` can be either a nested vector like</code>
<code> [3]      ⍝ ~~~</code>
<code> [4]      ⍝ ('Section' 'key')</code>
<code> [5]      ⍝ ~~~</code>
<code> [6]      ⍝ or</code>
<code> [7]      ⍝ ~~~</code>
<code> [8]      ⍝ (('Section' 'key1') ('Section' 'key2'))</code>
<code> [9]      ⍝ ~~~</code>
<code> [10]     ⍝ or a full name like</code>
<code> [11]     ⍝ ~~~</code>
<code> [12]     ⍝ ('section:key')</code>
<code> [13]     ⍝ ~~~</code>
<code> [14]     ⍝  or</code>
<code> [15]     ⍝ ~~~</code>
<code> [16]     ⍝ (('section:key1') ('section:key1'))</code>
<code> [17]     ⍝ ~~~</code>
<code> [18]     ⍝ Note that `('section' ('key1' 'key2'))` is **not** a valid syntax.</code>
<code> [19]     ⍝</code>
<code> [20]     ⍝ To check the existence of a section use</code>
<code> [21]     ⍝ ~~~</code>
<code> [22]     ⍝ Exist 'foo:'</code>
<code> [23]     ⍝ ~~~</code>
<code> [24]     ⍝ If `name` is a vector of names, `Exist` calls itself recursively.</code>
<code> [25]     ⍝</code>
<code> [26]     ⍝ Mixed syntax is **not** supported, so use one of:</code>
<code> [27]     ⍝ ~~~</code>
<code> [28]     ⍝ Exist ('section' 'key1')('otherSection' 'key2')('thirdSection' '')</code>
<code> [29]     ⍝ Exist ('section:key1' 'otherSection:key2' 'thirdSection:')</code>
<code> [30]     ⍝ ~~~</code>
<code class="emphasize">→[31]  :If 0 1∊⍨≡name</code>
<code class="emphasize">→[32]      (section key)←' '~¨⍨1 ⎕C 2↑':'(≠⊆⊢)name</code>
<code class="emphasize">→[33]      section←'_',section</code>
<code class="emphasize">→[34]      :If 0∊⍴key</code>
<code class="emphasize">→[35]          r←⊃9=⎕NC section</code>
<code> [36]      :Else</code>
<code class="emphasize">→[37]          key←{⍵∧.=' ':'' ⋄ ⍵}key</code>
<code class="emphasize">→[38]          :If 0∊⍴key</code>
<code class="emphasize">→[39]              r←(⊂section)∊_SECTIONS</code>
<code> [40]          :Else</code>
<code class="emphasize">→[41]              :If r←(⊂section)∊_SECTIONS</code>
<code class="emphasize">→[42]                  ref←⍎section</code>
<code class="emphasize">→[43]                  r←(⊂key)∊ref._Data[;5]</code>
<code> [44]              :EndIf</code>
<code> [45]          :EndIf</code>
<code> [46]      :EndIf</code>
<code> [47]  :Else</code>
<code class="emphasize">→[48]      :If ∧/':'∊¨name</code>
<code class="emphasize">→[49]          r←Exist¨name</code>
<code> [50]      :Else</code>
<code class="emphasize">→[51]          :If 3=|≡name</code>
<code class="emphasize">→[52]              ⍎'Mixed syntax not eligible'Signal 11/⍨(∨/':'∊¨name)∧(∨/2=|≡¨name)</code>
<code class="emphasize">→[53]              r←Exist¨name</code>
<code> [54]          :Else</code>
<code class="emphasize">→[55]              r←Exist⊃{⍺,':',⍵}/name</code>
<code> [56]          :EndIf</code>
<code> [57]      :EndIf</code>
<code> [58]  :EndIf</code>
</div>
<code class="header" id="listing_196">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.AddSection &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←AddSection name</code>
<code> [1]   ⍝ Adds a new section to the INI file.</code>
<code> [2]   ⍝</code>
<code> [3]   ⍝ Return a 1 if a section was added. A 0 is rerturned in case the section already exists.</code>
<code> [4]   :Access Public</code>
<code class="emphasize">→[5]   NAME←1 ⎕C name←'_',name</code>
<code class="emphasize">→[6]   ⍎'Section name must be a valid APL name'Signal 11/⍨¯1=⎕NC NAME</code>
<code class="emphasize">→[7]   :If r←0=⎕NC NAME</code>
<code class="emphasize">→[8]       NAME ⎕NS''</code>
<code class="emphasize">→[9]       ref←⍎NAME</code>
<code class="emphasize">→[10]      ref._Data←0 5⍴''</code>
<code class="emphasize">→[11]      _Sections,←⊂name</code>
<code class="emphasize">→[12]      _changed←1</code>
<code> [13]  :EndIf</code>
</div>
<code class="header" id="listing_197">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.HasInifileChanged &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> boolean←HasInifileChanged</code>
<code> [1]    ⍝ Returns a 1 in case the (any) ini file has changed since the instance was created.\\</code>
<code> [2]    ⍝ See also the `Changed` property.</code>
<code> [3]  :Access Public Instance</code>
<code class="emphasize">→[4]  ts←{↑3 ⎕NINFO ⍵}¨_IniFilename</code>
<code class="emphasize">→[5]  boolean←_EstablishedAt∨.&lt;Timestamp2Float¨ts</code>
</div>
<code class="header" id="listing_198">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Save &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {oldFilename}←Save filename</code>
<code> [1]   :Access Public</code>
<code> [2]      ⍝ If `filename` is empty the INI is saved into the same file it originally came from.</code>
<code> [3]      ⍝</code>
<code> [4]      ⍝ Note that `Save` will throw a SYNTAX ERROR in case...</code>
<code> [5]      ⍝ * the instance was defined by more than one INI file.</code>
<code> [6]      ⍝ * another INI file was imported.</code>
<code class="emphasize">→[7]   ⍎'An INI file with !Import statement cannot be saved'Signal 11/⍨_import</code>
<code class="emphasize">→[8]   :If 1&lt;⍴_IniFilename</code>
<code class="emphasize">→[9]       ⍎11 Signal⍨'This INI instance was defined by more than one INI file; it therefore cannot be saved.'</code>
<code> [10]  :EndIf</code>
<code class="emphasize">→[11]  oldFilename←_IniFilename</code>
<code class="emphasize">→[12]  :If ~0∊⍴filename</code>
<code class="emphasize">→[13]      _IniFilename←,⊂filename</code>
<code> [14]  :EndIf</code>
<code class="emphasize">→[15]  _IniFilename←CheckExtension¨_IniFilename</code>
<code class="emphasize">→[16]  :If 0=⎕NC'locals'</code>
<code class="emphasize">→[17]  :OrIf 0∊⍴locals</code>
<code class="emphasize">→[18]      data←''</code>
<code> [19]  :Else</code>
<code class="emphasize">→[20]      bool←∧\0=≢¨locals[;1]</code>
<code class="emphasize">→[21]      data←'; '∘,¨{⍵↓⍨+/∧\' '=⍵}¨bool⌿locals[;4]</code>
<code class="emphasize">→[22]      :For thisKey thisData origValue thisRemark thisKEY :In ↓(~bool)⌿locals</code>
<code class="emphasize">→[23]          buffer←(thisKey{0∊⍴⍺:⍺ ⋄ ⍺,⍵}'='),{0=1↑0⍴⍵:⍕⍵ ⋄ '''',(DoubleQuotes ⍵),''''}thisData</code>
<code class="emphasize">→[24]          :If ~0∊⍴thisRemark</code>
<code class="emphasize">→[25]              :If ''''''≡buffer</code>
<code class="emphasize">→[26]                  buffer←thisKey{⍵,⍨(~0∊⍴⍺)/(⎕UCS 9)}'; ',thisRemark</code>
<code> [27]              :Else</code>
<code class="emphasize">→[28]                  buffer,←thisKey{⍵,⍨(~0∊⍴⍺)/(⎕UCS 9)}'; ',thisRemark</code>
<code> [29]              :EndIf</code>
<code> [30]          :EndIf</code>
<code class="emphasize">→[31]          data,←⊂buffer</code>
<code> [32]      :EndFor</code>
<code> [33]  :EndIf</code>
<code class="emphasize">→[34]  :For thisSection :In _Sections</code>
<code class="emphasize">→[35]      thisSection←1↓thisSection</code>
<code class="emphasize">→[36]      THISSECTION←1 ⎕C thisSection</code>
<code class="emphasize">→[37]      ref←⍎'_',THISSECTION</code>
<code class="emphasize">→[38]      :If 0=⎕NC'ref.generalRemarks'  ⍝ might not exist if the original filename was empty</code>
<code class="emphasize">→[39]          data,←⊂'[',THISSECTION,']'</code>
<code> [40]      :Else</code>
<code class="emphasize">→[41]          data,←⊂'[',(THISSECTION),']',{⍵,⍨(~0∊⍴⍵)/(⎕UCS 9),'; '}1⊃1↑ref.generalRemarks</code>
<code class="emphasize">→[42]          data,←{⍵,⍨(~0∊⍴⍵)/'; '}¨1↓ref.generalRemarks</code>
<code> [43]      :EndIf</code>
<code class="emphasize">→[44]      :For thisKey thisData origValue thisRemark :In ↓4↑[2]ref._Data</code>
<code class="emphasize">→[45]          buffer←''</code>
<code class="emphasize">→[46]          :If 0 1∊⍨≡thisData</code>
<code class="emphasize">→[47]              :If '{'∊origValue</code>
<code class="emphasize">→[48]                  buffer←thisKey,'=''',(DoubleQuotes⍎origValue),''''</code>
<code> [49]              :Else</code>
<code class="emphasize">→[50]                  :If ''''''≡buffer←(thisKey{0∊⍴⍺:⍺ ⋄ ⍺,⍵}'='),{0=1↑0⍴⍵:⍕⍵ ⋄ '''',(DoubleQuotes ⍵),''''}thisData</code>
<code class="emphasize">→[51]                      buffer←''</code>
<code> [52]                  :EndIf</code>
<code> [53]              :EndIf</code>
<code class="emphasize">→[54]              :If ~0∊⍴thisRemark</code>
<code class="emphasize">→[55]                  buffer,←thisKey{⍵,⍨(~0∊⍴⍺)/(⎕UCS 9)}'; ',thisRemark</code>
<code> [56]              :EndIf</code>
<code class="emphasize">→[57]              data,←⊂buffer</code>
<code> [58]          :Else</code>
<code class="emphasize">→[59]              buffer←(⊂thisKey,'='''''),(⊂thisKey,',='),¨{0=1↑0⍴⍵:⍕⍵ ⋄ '''',(DoubleQuotes ⍵),''''}¨⍎¨origValue</code>
<code class="emphasize">→[60]              :If ~0∊⍴thisRemark</code>
<code class="emphasize">→[61]                  buffer,¨←{⍵,⍨(~0∊⍴⍵)/(⎕UCS 9),'; '}¨thisRemark</code>
<code> [62]              :EndIf</code>
<code class="emphasize">→[63]              data,←buffer</code>
<code> [64]          :EndIf</code>
<code> [65]      :EndFor</code>
<code> [66]  :EndFor</code>
<code class="emphasize">→[67]  bool←(';'≠⊃¨1⍴¨data)∧(⎕UCS 9)∊¨data</code>
<code class="emphasize">→[68]  where←bool\{⍵⍳(⎕UCS 9)}¨bool/data</code>
<code class="emphasize">→[69]  buffer←(⎕UCS 9)⍴¨⍨{⍵-⍨⌈/1+⍵}⌊4÷⍨≢¨(where-1)↑¨data</code>
<code class="emphasize">→[70]  :For i :In ⍳⍴,data</code>
<code class="emphasize">→[71]      :If i⊃bool</code>
<code class="emphasize">→[72]          this←i⊃data</code>
<code class="emphasize">→[73]          this[where[i]]←⊂i⊃buffer</code>
<code class="emphasize">→[74]          this←∊this</code>
<code class="emphasize">→[75]          (i⊃data)←this</code>
<code> [76]      :EndIf</code>
<code> [77]  :EndFor</code>
<code class="emphasize">→[78]  (⊂data)⎕NPUT(1⊃_IniFilename)1</code>
</div>
<code class="header" id="listing_199">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.DeleteDefault &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←DeleteDefault</code>
<code> [1]     ⍝ As soon as the `Default` property is set, one can get rid of it only be calling</code>
<code> [2]     ⍝ this method. Returns a 1 if there was a default, otherwise 0.</code>
<code> [3]  :Access Public</code>
<code class="emphasize">→[4]  r←2=⎕NC'_default'</code>
<code class="emphasize">→[5]  ⎕EX'_default'</code>
</div>
<code class="header" id="listing_200">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Help &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←Help</code>
<code> [1]   :Access Public shared</code>
<code class="emphasize">→[2]   this←⊃¯1↑'.'##.APLTreeUtils2.Split⍕⎕THIS</code>
<code class="emphasize">→[3]   r←''</code>
<code class="emphasize">→[4]   r,←⊂'To provide a list of methods and properties use'</code>
<code class="emphasize">→[5]   r,←⊂'  ]ADOC -summary ',⍕this</code>
<code class="emphasize">→[6]   r,←⊂'To provide a full list of methods and properties use'</code>
<code class="emphasize">→[7]   r,←⊂'  ]ADOC  -summary=full',⍕this</code>
<code class="emphasize">→[8]   r,←⊂'To provide more details about methods and properties use'</code>
<code class="emphasize">→[9]   r,←⊂'  ]ADOC ',⍕this</code>
<code class="emphasize">→[10]  r,←⊂'A fully-fledged documentation is available at:'</code>
<code class="emphasize">→[11]  r,←⊂'http://aplwiki.com/IniFiles'</code>
<code class="emphasize">→[12]  r←↑r</code>
</div>
<code class="header" id="listing_201">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.CheckExtension &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←{extension}CheckExtension r</code>
<code> [1]     ⍝ Add extension if there is no extension. Default is "ini"</code>
<code class="emphasize">→[2]  extension←{2=⎕NC ⍵:⍎⍵ ⋄ 'ini'}'extension'</code>
<code class="emphasize">→[3]  r←r,(~'.'∊{⍵↑⍨-⌊/'\/'⍳⍨⌽⍵}r)/'.',extension</code>
</div>
<code class="header" id="listing_202">#._tatin.aplteam_IniFiles_5_0_3.IniFiles._SECTIONS &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←_SECTIONS</code>
<code class="emphasize">→[1]  r←1 ⎕C _Sections</code>
</div>
<code class="header" id="listing_203">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.ReplaceCurlies &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  value←ReplaceCurlies(toc value)</code>
<code> [1]      ⍝ Replace `{foo}` with real data, if there are any curlies.</code>
<code class="emphasize">→[2]   value←ExchangeDoubleCourlies value'{'(⎕UCS 0)</code>
<code class="emphasize">→[3]   value←ExchangeDoubleCourlies value'}'(⎕UCS 1)</code>
<code class="emphasize">→[4]   :If ∧/'{}'∊value</code>
<code class="emphasize">→[5]       bool←{{⍵∨≠\⍵}⍵∊'{}'}value</code>
<code class="emphasize">→[6]       names←1 ⎕C bool/value</code>
<code class="emphasize">→[7]       names←'}'~⍨¨'{'A.Split names</code>
<code class="emphasize">→[8]       names←(0&lt;≢¨names)/names</code>
<code class="emphasize">→[9]       :For name :In names</code>
<code class="emphasize">→[10]          :Trap 0</code>
<code class="emphasize">→[11]              where←toc⍳⊂name</code>
<code class="emphasize">→[12]              :If (⍴toc)∨.&lt;where</code>
<code class="emphasize">→[13]                  where←(1 ⎕C locals[;1])⍳⊂name</code>
<code class="emphasize">→[14]                  ⍎('Invalid references found in INI file, check "',name,'"')Signal 6/⍨where∨.&gt;1⊃⍴locals</code>
<code class="emphasize">→[15]                  val2←DoubleQuotes⊃locals[where;2]</code>
<code> [16]              :Else</code>
<code class="emphasize">→[17]                  val2←DoubleQuotes 2⊃ref._Data[where;]</code>
<code> [18]              :EndIf</code>
<code> [19]          :Else</code>
<code class="emphasize">→[20]              ⍎6 Signal⍨'Invalid references found in INI file, check "',name,'"'</code>
<code> [21]          :EndTrap</code>
<code class="emphasize">→[22]          noOf←¯1+value⍳'{'</code>
<code class="emphasize">→[23]          value←(-noOf)⌽(⍕val2),({⍵↓⍨⍵⍳'}'}noOf⌽value)</code>
<code> [24]      :EndFor</code>
<code class="emphasize">→[25]      value←'''',(1↓¯1↓value),''''</code>
<code> [26]  :EndIf</code>
<code class="emphasize">→[27]  value←RestoreCurlies value</code>
</div>
<code class="header" id="listing_204">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.GetLocals &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  (data locals allRemarks)←GetLocals(data allRemarks)</code>
<code> [1]      ⍝ Extract any "local" variabels.</code>
<code> [2]      ⍝ Locals are defined as those assigned above the first section</code>
<code class="emphasize">→[3]   locals←0 5⍴''                                     ⍝ Initialize the main result</code>
<code class="emphasize">→[4]   :If '['∊⊃¨data</code>
<code class="emphasize">→[5]       :If 0&lt;where←¯1+'['⍳⍨⊃¨data                    ⍝ Where starts the first section</code>
<code class="emphasize">→[6]           data2←where↑data                          ⍝ Take eveything above the first section</code>
<code class="emphasize">→[7]           data2←(+/∧\' '=↑data2)↓¨data2             ⍝ Drop any leading blanks</code>
<code class="emphasize">→[8]           data2/⍨←'!Import'{((⍴⍺)↑[2]↑⍵)∨.≠⍺}data2  ⍝ Remove all "!Import" directives</code>
<code class="emphasize">→[9]           data2←'='A.Split¨data2     ⍝ Split remaining items at "=" (assignment)</code>
<code class="emphasize">→[10]          toc←' '~¨⍨1⊃¨data2                        ⍝ First part = names</code>
<code class="emphasize">→[11]          data2←2⊃¨{2↑⍵,'' ''}¨data2                ⍝ Second part = data</code>
<code class="emphasize">→[12]          allRemarks2←where↑allRemarks              ⍝</code>
<code class="emphasize">→[13]          :For i :In ⍳⍴,toc</code>
<code class="emphasize">→[14]              name←i⊃toc</code>
<code class="emphasize">→[15]              value←i⊃data2</code>
<code class="emphasize">→[16]              remark←i⊃allRemarks2</code>
<code class="emphasize">→[17]              :If 0∊⍴name</code>
<code class="emphasize">→[18]                  locals⍪←'' '' ''remark''</code>
<code> [19]              :Else</code>
<code class="emphasize">→[20]                  :If ∧/'{}'∊value</code>
<code class="emphasize">→[21]                      value2←⍎ReplaceCurlies((1 ⎕C toc)value)</code>
<code> [22]                  :Else</code>
<code class="emphasize">→[23]                      :If _oldStyleFlag</code>
<code class="emphasize">→[24]                          value2←value</code>
<code class="emphasize">→[25]                          value←'''',value,''''</code>
<code> [26]                      :Else</code>
<code class="emphasize">→[27]                          value2←⍎value</code>
<code> [28]                      :EndIf</code>
<code> [29]                  :EndIf</code>
<code class="emphasize">→[30]                  itemNo←locals[;5]⍳⊂NAME←1 ⎕C name~','</code>
<code class="emphasize">→[31]                  :If itemNo&gt;1⊃⍴locals</code>
<code class="emphasize">→[32]                      locals⍪←name value2 value remark NAME</code>
<code class="emphasize">→[33]                  :ElseIf ','∊name</code>
<code class="emphasize">→[34]                      ⍎911 Signal⍨'Invalid syntax: nested values are not supported for "local" variables'</code>
<code> [35]                  :Else</code>
<code class="emphasize">→[36]                      locals[itemNo;2 3 4]←value2 value remark</code>
<code> [37]                  :EndIf</code>
<code> [38]              :EndIf</code>
<code> [39]          :EndFor</code>
<code class="emphasize">→[40]          locals[;4]←{2=|≡⍵:↑,/⍵ ⋄ ⍵}¨locals[;4]</code>
<code class="emphasize">→[41]          data←where↓data</code>
<code class="emphasize">→[42]          allRemarks←where↓allRemarks</code>
<code> [43]      :EndIf</code>
<code> [44]  :EndIf</code>
</div>
<code class="header" id="listing_205">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.CheckValues &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  (oldStyleFlag DM EN)←CheckValues(data filename)</code>
<code> [1]       ⍝ Returns either ({boolean} '' ⍬) or ({Boolean} 'Error msg' {number}) with</code>
<code> [2]       ⍝ Boolean being OldStyleFlag.</code>
<code> [3]       ⍝</code>
<code> [4]       ⍝ Therefore the result can be used for a ⎕SIGNAL statement.</code>
<code> [5]       ⍝</code>
<code> [6]       ⍝ We don't have to worry about comments and trailing blanks: handled by now.</code>
<code> [7]       ⍝</code>
<code> [8]       ⍝ Side effect: sets global /_oldStyleFlag</code>
<code class="emphasize">→[9]   (oldStyleFlag DM EN)←¯1 '' 0      ⍝ ¯1: not decided yet. As soon it is something else the case is settled</code>
<code class="emphasize">→[10]  bool←0&lt;≢¨A.DLB data</code>
<code class="emphasize">→[11]  lnos←bool/⍳⍴data                  ⍝ Create line numbers</code>
<code class="emphasize">→[12]  data←bool/data                    ⍝ Drop empty lines</code>
<code class="emphasize">→[13]  bool←';'≠⊃¨data                   ⍝ Pure comment lines</code>
<code class="emphasize">→[14]  (data lnos)←bool∘/¨data lnos      ⍝ Get rid of all comment lines from data &amp; lnos</code>
<code class="emphasize">→[15]  :If ∨/b←'!'=⊃¨data</code>
<code class="emphasize">→[16]  :AndIf ∨/b←b\'!IMPORT'∘{⍺≡1 ⎕C(⍴⍺)↑⍵}¨b/data</code>
<code class="emphasize">→[17]      oldStyleFlag←0                ⍝ Now we know it's not an old-style file.</code>
<code class="emphasize">→[18]      (data lnos)←(⊂~b)/¨data lnos</code>
<code> [19]  :EndIf</code>
<code class="emphasize">→[20]  :If ¯1=oldStyleFlag</code>
<code class="emphasize">→[21]  :AndIf ~0∊⍴(¯1+(⊃¨data)⍳'[')↑data ⍝ Local variables?!</code>
<code class="emphasize">→[22]      oldStyleFlag←0                ⍝ Now we know it's not an old-style file.</code>
<code class="emphasize">→[23]      bool←~∧\'['≠⊃¨data            ⍝ Where does the real stuff starts (first section)?</code>
<code class="emphasize">→[24]      (data lnos)←bool∘/¨data lnos  ⍝ Remove the local variables</code>
<code> [25]  :EndIf</code>
<code class="emphasize">→[26]  bool←'['≠⊃¨data                   ⍝ Which are not sections?</code>
<code class="emphasize">→[27]  (data lnos)←bool∘/¨data lnos      ⍝ Get rid of them</code>
<code class="emphasize">→[28]  :If ∨/b←~'='∊¨{⍵↑⍨¯1+⍵⍳''''}data</code>
<code class="emphasize">→[29]      DM←'Check line',((1≠+/b)/'s'),' ',(⊃{⍺,',',⍵}/⍕¨b/lnos),' of ',filename</code>
<code class="emphasize">→[30]      EN←11</code>
<code class="emphasize">→[31]      :Return</code>
<code> [32]  :EndIf</code>
<code class="emphasize">→[33]  vals←A.DLB{⍵↓⍨⍵⍳'='}¨data           ⍝ Remove the assigment as such.</code>
<code class="emphasize">→[34]  swq←''''=⊃¨vals                   ⍝ Start With Quote</code>
<code class="emphasize">→[35]  ewq←''''=⊃¨¯1⌽¨vals               ⍝ Ends with quotes</code>
<code class="emphasize">→[36]  in←{∧/{⍵↑⍨1⌈⍴⍵}1⊃⎕VFI ⍵}¨vals     ⍝ "Is Numeric" flag</code>
<code class="emphasize">→[37]  emptyFlag←0=⊃∘⍴¨vals              ⍝ Empty is allowed only in old-style</code>
<code class="emphasize">→[38]  :If ¯1=oldStyleFlag</code>
<code class="emphasize">→[39]      :If 2=⍴∪(~in)/swq+ewq</code>
<code class="emphasize">→[40]          DM←filename,' is inconsistent - neither old-style nor new-style; check line(s) ',⍕⍸bool\in⍱swq∧ewq</code>
<code class="emphasize">→[41]          EN←11</code>
<code class="emphasize">→[42]          :Return</code>
<code> [43]      :Else</code>
<code class="emphasize">→[44]          oldStyleFlag←~(0∊⍴data)∨∧/in∨2=swq+ewq   ⍝ Locals only? All fine?!</code>
<code> [45]      :EndIf</code>
<code> [46]  :EndIf</code>
<code class="emphasize">→[47]  :If ¯1=oldStyleFlag</code>
<code class="emphasize">→[48]      oldStyleFlag←0                ⍝ We don't know otherwise, so we assume "no"</code>
<code> [49]  :EndIf</code>
<code class="emphasize">→[50]  :If oldStyleFlag</code>
<code class="emphasize">→[51]      :If ∨/b←~(swq+ewq)∊0 2</code>
<code class="emphasize">→[52]          DM←filename,' is invalid: ',⊃,/{⍺,',',⍵}/b/data~¨'''' ⋄ EN←11</code>
<code> [53]      :EndIf</code>
<code> [54]  :Else</code>
<code class="emphasize">→[55]      :If ∨/b←(~in)∧2≠swq+ewq</code>
<code class="emphasize">→[56]          DM←filename,' is inconsistent: ',⊃,/{⍺,',',⍵}/b/data ⋄ EN←11</code>
<code class="emphasize">→[57]      :ElseIf ∨/emptyFlag</code>
<code class="emphasize">→[58]          DM←filename,' is inconsistent: ',⊃,/{⍺,',',⍵}/emptyFlag/data ⋄ EN←11</code>
<code> [59]      :EndIf</code>
<code> [60]  :EndIf</code>
</div>
<code class="header" id="listing_206">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.MergeImport &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  (data remarks)←MergeImport(import data remarks)</code>
<code class="emphasize">→[1]   data←{(+\'['=⊃¨⍵)⊂⍵}data</code>
<code class="emphasize">→[2]   secList←⊃¨data</code>
<code class="emphasize">→[3]   :For section name value :In ↓import</code>
<code class="emphasize">→[4]       secName←'[',(⍕section),']'</code>
<code class="emphasize">→[5]       :If (⍴secList)&lt;ind←secList⍳⊂secName</code>
<code class="emphasize">→[6]           data,←⊂⊂secName</code>
<code class="emphasize">→[7]           secList,←⊂secName</code>
<code class="emphasize">→[8]           remarks,←⊂''</code>
<code> [9]       :EndIf</code>
<code class="emphasize">→[10]      ind←secList⍳⊂secName</code>
<code class="emphasize">→[11]      :If 2=|≡value</code>
<code class="emphasize">→[12]          (ind⊃data),←⊂name,'='''''</code>
<code class="emphasize">→[13]          (ind⊃data),←(⊂name,',='),¨Pack¨value</code>
<code> [14]      :Else</code>
<code class="emphasize">→[15]          (ind⊃data),←⊂name,'=',Pack value</code>
<code> [16]      :EndIf</code>
<code> [17]  :EndFor</code>
<code class="emphasize">→[18]  data←⊃,/SortSection¨data</code>
<code class="emphasize">→[19]  remarks←(⍴data)↑remarks,(⍴data)⍴⊂''</code>
</div>
<code class="header" id="listing_207">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.ExchangeDoubleCourlies &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ExchangeDoubleCourlies(r what new)</code>
<code> [1]     ⍝ Typical:</code>
<code> [2]     ⍝ data ← RestoreCurlies ExchangeDoubleCourlies '{{abc}}' '{' (⎕UCS 0)</code>
<code> [3]     ⍝ data ← RestoreCurlies ExchangeDoubleCourlies data '}' (⎕UCS 1)</code>
<code> [4]     ⍝ '{abc}' ←→ RestoreCurlies data</code>
<code class="emphasize">→[5]  :While ∨/b←(2⍴what)⍷r</code>
<code class="emphasize">→[6]      ind←⊃⍸b</code>
<code class="emphasize">→[7]      r←(-ind-1)⌽new,2↓(ind-1)⌽r</code>
<code> [8]  :EndWhile</code>
</div>
<code class="header" id="listing_208">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.EvaluateINIs &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  (data oldStyleFlag remarks)←EvaluateINIs filenames</code>
<code class="emphasize">→[1]   data←'' ⋄ oldStyleFlag←⍬ ⋄ remarks←''</code>
<code class="emphasize">→[2]   :For this :In filenames</code>
<code class="emphasize">→[3]       :If 0=≢buffer←⊃⎕NGET this 1</code>
<code class="emphasize">→[4]           :Return</code>
<code> [5]       :EndIf</code>
<code class="emphasize">→[6]       buffer←(,∘⊂⍣(⊃1=|≡buffer))buffer</code>
<code class="emphasize">→[7]       buffer←{(0=+/b←(⎕UCS 9)=w←⍵):w ⋄ (b/w)←' ' ⋄ w}¨buffer    ⍝ Transform TAB into blanks</code>
<code class="emphasize">→[8]       buffer~¨←⎕UCS 10                                          ⍝ Remove any LF characters</code>
<code class="emphasize">→[9]       buffer←{0 1∊⍨≡⍵:⊂⍵ ⋄ ⍵}buffer</code>
<code> [10]          ⍝buffer←{(0&lt;∊⍴∘,¨⍵)⌿⍵}buffer  ⍝ No: in order to report line numbers we can't do this</code>
<code class="emphasize">→[11]      buffer2←↑,buffer</code>
<code class="emphasize">→[12]      bool←{a∨≠\a←⍵=''''}buffer2</code>
<code class="emphasize">→[13]      ((,bool)/,buffer2)←' '</code>
<code class="emphasize">→[14]      remarks2←(';'⍳⍨¨⊂[2]buffer2)↓¨buffer</code>
<code class="emphasize">→[15]      buffer←(¯1+';'⍳⍨¨⊂[2]buffer2)↑¨buffer</code>
<code class="emphasize">→[16]      buffer←RemoveInBetweenBlanks¨A.DLB A.DTB buffer</code>
<code class="emphasize">→[17]      (flag dm en)←CheckValues buffer this</code>
<code class="emphasize">→[18]      ⍎dm Signal en</code>
<code class="emphasize">→[19]      data,←buffer</code>
<code class="emphasize">→[20]      remarks,←remarks2</code>
<code class="emphasize">→[21]      oldStyleFlag,←flag</code>
<code> [22]  :EndFor</code>
<code class="emphasize">→[23]  oldStyleFlag←∨/oldStyleFlag</code>
</div>
<code class="header" id="listing_209">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.CallCreate &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  CallCreate IniFilename</code>
<code class="emphasize">→[1]   :If 0 1∊⍨≡IniFilename</code>
<code class="emphasize">→[2]   :AndIf 0≠≢IniFilename</code>
<code class="emphasize">→[3]       IniFilename←,⊂IniFilename</code>
<code> [4]   :EndIf</code>
<code class="emphasize">→[5]   :Trap (~_debugFlag)/911</code>
<code class="emphasize">→[6]       Create IniFilename</code>
<code> [7]   :Else</code>
<code class="emphasize">→[8]       ⍎({(911≡⍵)∨⍬≡⍵:11 ⋄ ⍵}_EN)Signal⍨1⊃⎕DM</code>
<code> [9]   :EndTrap</code>
</div>
<code class="header" id="listing_210">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.GetComputerName &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetComputerName</code>
<code class="emphasize">→[1]  :If 'Win'≡A.GetOperatingSystem ⍬</code>
<code class="emphasize">→[2]      r←2 ⎕NQ'#' 'GetEnvironment' 'Computername'</code>
<code> [3]  :Else</code>
<code class="emphasize">→[4]      r←⊃⎕SH'uname -n'</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_211">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.Timestamp2Float &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Timestamp2Float ts</code>
<code> [1]     ⍝ yyyymmdd.hhmmss←Timestamp2Float ⎕TS</code>
<code class="emphasize">→[2]  r←{1E¯9×0 100 100 100 100 100 1000⊥7↑⍵}ts</code>
</div>
<code class="header" id="listing_212">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.ASSETS &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ASSETS</code>
<code class="emphasize">→[1]  r←''</code>
</div>
<code class="header" id="listing_213">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.CONFIG &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←CONFIG</code>
<code class="emphasize">→[1]   r←'{</code>
<code class="emphasize">→[2]    api: "IniFiles",</code>
<code class="emphasize">→[3]    assets: "",</code>
<code class="emphasize">→[4]    date: 20220413.144352,</code>
<code class="emphasize">→[5]    description: "Allows instantiating good old INI files in APL; comes with extended syntax supporting APL-like data structures",</code>
<code class="emphasize">→[6]    documentation: "",</code>
<code class="emphasize">→[7]    files: "",</code>
<code class="emphasize">→[8]    group: "aplteam",</code>
<code class="emphasize">→[9]    io: 1,</code>
<code class="emphasize">→[10]   license: "MIT",</code>
<code class="emphasize">→[11]   lx: "",</code>
<code class="emphasize">→[12]   maintainer: "Kai Jaeger &lt;kai@aplteam.com&gt;",</code>
<code class="emphasize">→[13]   minimumAplVersion: "18.0",</code>
<code class="emphasize">→[14]   ml: 1,</code>
<code class="emphasize">→[15]   name: "IniFiles",</code>
<code class="emphasize">→[16]   os_lin: 1,</code>
<code class="emphasize">→[17]   os_mac: 1,</code>
<code class="emphasize">→[18]   os_win: 1,</code>
<code class="emphasize">→[19]   project_url: "https://github.com/aplteam/IniFiles",</code>
<code class="emphasize">→[20]   source: "IniFiles.aplc",</code>
<code class="emphasize">→[21]   tags: "ini-files,config-files",</code>
<code class="emphasize">→[22]   uri: "https://tatin.dev/",</code>
<code class="emphasize">→[23]   userCommandScript: "",</code>
<code class="emphasize">→[24]   version: "5.0.3+22",</code>
<code> [25] }'</code>
</div>
<code class="header" id="listing_214">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.DEPENDENCIES &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←DEPENDENCIES</code>
<code class="emphasize">→[1]  r←,⊆'aplteam-APLTreeUtils2-1.1.3'</code>
</div>
<code class="header" id="listing_215">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.GetFullPath2AssetsFolder &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetFullPath2AssetsFolder</code>
<code class="emphasize">→[1]  :If 0&lt;≢r←ASSETS</code>
<code class="emphasize">→[2]  :AndIf 0&lt;≢HOME</code>
<code class="emphasize">→[3]  :AndIf ⎕NEXISTS HOME</code>
<code class="emphasize">→[4]      r←HOME,'/',ASSETS</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_216">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.HOME &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←HOME</code>
<code> [1]  ⍝ Returns folder package was loaded from or current directory or an empty vector if both are not valid</code>
<code class="emphasize">→[2]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[3]   r←'C:/T/Projects/APLTree/CodeCoverage/packages_dev/aplteam-IniFiles-5.0.3'   ⍝ Original source</code>
<code class="emphasize">→[4]   :If ~⎕NEXISTS r</code>
<code class="emphasize">→[5]       (dir name extension)←⎕NPARTS r</code>
<code class="emphasize">→[6]       r←(⊃1 ⎕NPARTS''),(2⊃⎕NPARTS ¯1↓dir),'/',name,extension ⍝ Try current dir</code>
<code class="emphasize">→[7]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[8]       r←(⊃1 ⎕NPARTS''),name,extension</code>
<code class="emphasize">→[9]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[10]      r←''</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_217">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.ID &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ID</code>
<code class="emphasize">→[1]  r←'aplteam-IniFiles-5.0.3+22'</code>
</div>
<code class="header" id="listing_218">#._tatin.aplteam_IniFiles_5_0_3.TatinVars.URI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←URI</code>
<code class="emphasize">→[1]  r←'https://tatin.dev/'</code>
</div>
<code class="header" id="listing_219">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_1 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_1 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/1 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_1←msg</code>
</div>
<code class="header" id="listing_220">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_2 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_2 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/2 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_2←msg</code>
</div>
<code class="header" id="listing_221">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_2 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_2</code>
<code class="emphasize">→[1]  r←_custom_2</code>
</div>
<code class="header" id="listing_222">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_3 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_3 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/3 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_3←msg</code>
</div>
<code class="header" id="listing_223">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_3 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_3</code>
<code class="emphasize">→[1]  r←_custom_3</code>
</div>
<code class="header" id="listing_224">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_4 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_4 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/4 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_4←msg</code>
</div>
<code class="header" id="listing_225">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_4 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_4</code>
<code class="emphasize">→[1]  r←_custom_4</code>
</div>
<code class="header" id="listing_226">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_5 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_5 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/5 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_5←msg</code>
</div>
<code class="header" id="listing_227">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_5 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_5</code>
<code class="emphasize">→[1]  r←_custom_5</code>
</div>
<code class="header" id="listing_228">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_6 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_6 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/6 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_6←msg</code>
</div>
<code class="header" id="listing_229">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_6 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_6</code>
<code class="emphasize">→[1]  r←_custom_6</code>
</div>
<code class="header" id="listing_230">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_7 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_7 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/7 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_7←msg</code>
</div>
<code class="header" id="listing_231">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_7 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_7</code>
<code class="emphasize">→[1]  r←_custom_7</code>
</div>
<code class="header" id="listing_232">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_8 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_8 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/8 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_8←msg</code>
</div>
<code class="header" id="listing_233">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_8 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_8</code>
<code class="emphasize">→[1]  r←_custom_8</code>
</div>
<code class="header" id="listing_234">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_custom_9 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_custom_9 arg</code>
<code class="emphasize">→[1]  msg←arg.NewValue</code>
<code class="emphasize">→[2]  ⎕SIGNAL/9 CheckCustomDef msg</code>
<code class="emphasize">→[3]  _custom_9←msg</code>
</div>
<code class="header" id="listing_235">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_9 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_9</code>
<code class="emphasize">→[1]  r←_custom_9</code>
</div>
<code class="header" id="listing_236">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_codeCoverage &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_codeCoverage value</code>
<code class="emphasize">→[1]  'Is not an instance of the "CodeCoverage" class'Assert∨/'[CodeCoverage]'⍷⍕value.NewValue</code>
<code class="emphasize">→[2]  :If 0&lt;≢value.NewValue</code>
<code class="emphasize">→[3]      _codeCoverage←value.NewValue</code>
<code> [4]  :Else</code>
<code class="emphasize">→[5]      _codeCoverage←''</code>
<code> [6]  :EndIf</code>
</div>
<code class="header" id="listing_237">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_codeCoverage &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_codeCoverage</code>
<code class="emphasize">→[1]  r←_codeCoverage</code>
</div>
<code class="header" id="listing_238">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_IniFolder &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_IniFolder arg</code>
<code class="emphasize">→[1]  :If 0&lt;≢arg.NewValue</code>
<code class="emphasize">→[2]      'Must be a simple character vector'Assert 1=≡arg.NewValue</code>
<code class="emphasize">→[3]      'Must be a simple character vector'Assert 0≠1↑0⍴∊arg.NewValue</code>
<code class="emphasize">→[4]      'Must be a simple character vector'Assert 1=⍴⍴arg.NewValue</code>
<code class="emphasize">→[5]      'Does not exist'Assert 0≠⎕NEXISTS arg.NewValue</code>
<code class="emphasize">→[6]      'Is not a folder'Assert 1=1 ⎕NINFO arg.NewValue</code>
<code> [7]  :EndIf</code>
<code class="emphasize">→[8]  _IniFolder←arg.NewValue</code>
</div>
<code class="header" id="listing_239">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_IniFolder &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_IniFolder</code>
<code class="emphasize">→[1]  r←_IniFolder</code>
</div>
<code class="header" id="listing_240">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_exec_before_each_test &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_exec_before_each_test arg</code>
<code class="emphasize">→[1]  'Must be fully qualified name of a function'Assert' '=1↑0⍴∊arg.NewValue</code>
<code class="emphasize">→[2]  'Must be fully qualified name of a function'Assert 3=⎕NC arg.NewValue</code>
<code class="emphasize">→[3]  _exec_before_each_test←arg.NewValue</code>
</div>
<code class="header" id="listing_241">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_exec_before_each_test &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_exec_before_each_test</code>
<code class="emphasize">→[1]  r←_exec_before_each_test</code>
</div>
<code class="header" id="listing_242">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_exec_after_each_test &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> set_exec_after_each_test arg</code>
<code class="emphasize">→[1]  'Must be fully qualified name of a function'Assert' '=1↑0⍴∊arg.NewValue</code>
<code class="emphasize">→[2]  'Must be fully qualified name of a function'Assert 3=⎕NC arg.NewValue</code>
<code class="emphasize">→[3]  _exec_after_each_test←arg.NewValue</code>
</div>
<code class="header" id="listing_243">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_exec_after_each_test &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_exec_after_each_test</code>
<code class="emphasize">→[1]  r←_exec_after_each_test</code>
</div>
<code class="header" id="listing_244">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_INI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_INI</code>
<code class="emphasize">→[1]  r←_INI</code>
</div>
<code class="header" id="listing_245">#._tatin.aplteam_Tester2_3_7_0.Tester2.Version &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Version</code>
<code> [1]  :Access Public shared</code>
<code class="emphasize">→[2]  r←'Tester2' '3.7.0+5' '2024-03-02'</code>
</div>
<code class="header" id="listing_246">#._tatin.aplteam_Tester2_3_7_0.Tester2.History &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←History</code>
<code> [1]   :Access Public shared</code>
<code> [2]        ⍝ * 3.7.0 ⋄ 2024-03-02</code>
<code> [3]        ⍝   * The restriction that "," and "*" cannot go together has been lifted.</code>
<code> [4]        ⍝   * The restriction that `~` could only be used at the beginning has been lifted</code>
<code> [5]        ⍝   * Bug fixes</code>
<code> [6]        ⍝     *</code>
<code> [7]        ⍝ * 3.6.0 ⋄ 2024-01-11</code>
<code> [8]        ⍝   * Any a general `Initial` function as well as any group-specific one can now return a text vector</code>
<code> [9]        ⍝     rather than a Boolean. Empty=success, otherwise it is treated as an error msg and reported.</code>
<code> [10]       ⍝   * So far, in case a test suite was executed in batch mode, there was no information provided which</code>
<code> [11]       ⍝     line did cause a test case to fail.</code>
<code> [12]       ⍝   * Shared method `Help` added that provides a full documentation of Tester2.</code>
<code> [13]       ⍝ * 3.5.0 ⋄ 2023-04-28</code>
<code> [14]       ⍝   * Helpers updated</code>
<code> [15]       ⍝\\</code>
<code> [16]       ⍝ For a full history (including older versions) see &lt;https://github.com/aplteam/Tester2/releases&gt;</code>
<code class="emphasize">→[17]  r←↑{⍵↓⍨+/∧\∧⌿(↑⍵)=' '}{⍵↓⍨⍵⍳'⍝'}¨{⍵/⍨'⍝'=⊃¨⍵}{⍵↓⍨+/∧\(↑⍵)=' '}¨1↓⎕NR⊃⎕SI</code>
</div>
<code class="header" id="listing_247">#._tatin.aplteam_Tester2_3_7_0.Tester2.make1 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  make1 ref</code>
<code> [1]      ⍝ Requires a reference as the right argument which points to the namespace that hosts the test cases .\\</code>
<code> [2]      ⍝ All instance methods will use that reference in order to find the test cases.</code>
<code> [3]   :Access Public Instance</code>
<code> [4]   :Implements Constructor</code>
<code class="emphasize">→[5]   A←(⊃⊃⎕CLASS ⎕THIS).##.APLTreeUtils2</code>
<code class="emphasize">→[6]   _ref←ref</code>
<code class="emphasize">→[7]   _ref2GUI←⍬</code>
<code class="emphasize">→[8]   _parms←CreateParms ⍬</code>
<code class="emphasize">→[9]   _INI←⍬</code>
<code class="emphasize">→[10]  _custom_1←_custom_2←_custom_3←_custom_4←_custom_5←_custom_6←_custom_7←_custom_8←_custom_9←⍬''</code>
<code class="emphasize">→[11]  _exec_before_each_test←_exec_after_each_test←''</code>
<code class="emphasize">→[12]  _codeCoverage←''</code>
<code class="emphasize">→[13]  :If 0&lt;≢parent←'AcreConfig'{⍵∊# ⎕SE:'' ⋄ 0&lt;⍵.⎕NC ⍺:⍵ ⋄ ⍺ ∇ ⍵.##}_ref</code>
<code class="emphasize">→[14]      _IniFolder←parent.AcreConfig.ProjectFolder</code>
<code class="emphasize">→[15]  :ElseIf 9=_ref.⎕NC'CiderConfig'</code>
<code class="emphasize">→[16]      _IniFolder←_ref.CiderConfig.HOME</code>
<code class="emphasize">→[17]  :ElseIf 9=_ref.##.⎕NC'CiderConfig'</code>
<code class="emphasize">→[18]      _IniFolder←_ref.##.CiderConfig.HOME</code>
<code> [19]  :Else</code>
<code class="emphasize">→[20]      _IniFolder←''</code>
<code> [21]  :EndIf</code>
</div>
<code class="header" id="listing_248">#._tatin.aplteam_Tester2_3_7_0.Tester2.Cleanup &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Cleanup</code>
<code> [1]     ⍝ Closes the GUI</code>
<code> [2]  :Implements Destructor</code>
<code class="emphasize">→[3]  CloseGUI</code>
</div>
<code class="header" id="listing_249">#._tatin.aplteam_Tester2_3_7_0.Tester2.Run &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {(rc log)}←{stopFlag}Run debugFlag</code>
<code> [1]      ⍝ Runs _all_ test cases, by default with error trapping.\\</code>
<code> [2]      ⍝ The Boolean right argument decides whether with (0) or without (1) error trapping.\\</code>
<code> [3]      ⍝ In addition you may specify an optional left argument which will make `Run` stop in certain circumstances:</code>
<code> [4]      ⍝ * 1=stop just before any test case is about to be executed</code>
<code> [5]      ⍝ * 2=stop in all `Initial*` functions</code>
<code> [6]      ⍝ * 4=stop in all `Cleanup*` functions\\</code>
<code> [7]      ⍝ You may also specify a sum of them, like 3, 5, 6 or 7</code>
<code> [8]      ⍝ DO NOT localyze `_parms` in this function!</code>
<code> [9]   :Access Public Instance</code>
<code class="emphasize">→[10]  stopFlag←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'stopFlag'</code>
<code class="emphasize">→[11]  'Invalid left argument 'Assert 1=≡,stopFlag</code>
<code class="emphasize">→[12]  'Invalid left argument 'Assert 1=≢stopFlag</code>
<code class="emphasize">→[13]  'Invalid left argument 'Assert 83=⎕DR stopFlag</code>
<code class="emphasize">→[14]  'Invalid right argument 'Assert(⊂debugFlag)∊0 1</code>
<code class="emphasize">→[15]  _parms←CreateParms ⍬</code>
<code class="emphasize">→[16]  _parms.debugFlag←debugFlag</code>
<code class="emphasize">→[17]  _parms.stopFlag←stopFlag</code>
<code class="emphasize">→[18]  _parms.trapFlag←~debugFlag</code>
<code class="emphasize">→[19]  (rc log)←Run__ _parms</code>
<code> [20]      ⍝Done</code>
</div>
<code class="header" id="listing_250">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunGUI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {(rc log)}←{parms}RunGUI these</code>
<code> [1]      ⍝ Runs `these` test cases, which defaults to _all_ in case `these` is empty.\\</code>
<code> [2]      ⍝ The user can set all sorts of parameters via the GUI.\\</code>
<code> [3]      ⍝ Note that this is a Windows-only feature.\\</code>
<code> [4]      ⍝ The left argument is useful only for defining defaults on the GUI.\\</code>
<code> [5]      ⍝ See also `Run` which does vasically the same but without a GUI.\\</code>
<code> [6]      ⍝ DO NOT localyze `_parms` in this function!</code>
<code> [7]   :Access Public Instance</code>
<code class="emphasize">→[8]   :If 'Win'≡A.GetOperatingSystem''</code>
<code class="emphasize">→[9]       _parms←{0&lt;⎕NC ⍵:⍎⍵ ⋄ CreateParms ⍬}'parms'</code>
<code class="emphasize">→[10]      CloseGUI</code>
<code class="emphasize">→[11]      _parms.testCaseNos←these</code>
<code class="emphasize">→[12]      _parms.guiFlag←1</code>
<code class="emphasize">→[13]      _parms.testCaseNos←these</code>
<code class="emphasize">→[14]      (rc log)←Run__ _parms</code>
<code> [15]  :Else</code>
<code class="emphasize">→[16]      'RunGUI is Windows-only'⎕SIGNAL 11</code>
<code> [17]  :EndIf</code>
</div>
<code class="header" id="listing_251">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunThese &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {(rc log)}←{stopFlag}RunThese these</code>
<code> [1]      ⍝ Run just the specified tests.</code>
<code> [2]      ⍝ `these` can be one of:</code>
<code> [3]      ⍝ * A scalar or vector of numbers identifying ungrouped test cases.</code>
<code> [4]      ⍝ * A text string that uniquily identifies a group.</code>
<code> [5]      ⍝ * A text string that ends with an asterisk (`*`) identifying one or more test groups.</code>
<code> [6]      ⍝ * A two-item vector with:</code>
<code> [7]      ⍝   * A text string identifying one or more groups (with the wildcard syntax, **not** by specifying more than one).</code>
<code> [8]      ⍝   * An integer vector identifying test cases within that group.\\</code>
<code> [9]      ⍝ In addition you may specify an optional left argument which will make `RunThese` stop in certain circumstances:</code>
<code> [10]     ⍝ * 1=stop just before any test case is about to be executed</code>
<code> [11]     ⍝ * 2=stop in all `Initial*` functions</code>
<code> [12]     ⍝ * 4=stop in all `Cleanup*` functions\\</code>
<code> [13]     ⍝ You may also specify a sum of them, like 3, 5, 6 or 7.\\</code>
<code> [14]     ⍝ The result:</code>
<code> [15]     ⍝ 1. A return code. 0 means all test cases passed successfully.</code>
<code> [16]     ⍝ 2. A vector of text vectors with the log. The log contains detailed information about what was carried out.</code>
<code> [17]     ⍝ DO NOT localyze `_parms` in this function!</code>
<code> [18]  :Access Public Instance</code>
<code class="emphasize">→[19]  stopFlag←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'stopFlag'</code>
<code class="emphasize">→[20]  'Invalid left argument 'Assert(⊂stopFlag)∊0 1 2 4 3 5 6 7</code>
<code class="emphasize">→[21]  _parms←CreateParms ⍬</code>
<code class="emphasize">→[22]  _parms.testCaseNos←these</code>
<code class="emphasize">→[23]  _parms.debugFlag←1</code>
<code class="emphasize">→[24]  _parms.trapFlag←0</code>
<code class="emphasize">→[25]  _parms.stopFlag←stopFlag</code>
<code class="emphasize">→[26]  (rc log)←Run__ _parms</code>
</div>
<code class="header" id="listing_252">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunBatchTests &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {(rc log)}←{stopFlag}RunBatchTests debugFlag</code>
<code> [1]      ⍝ Runs all test cases but tells the test functions that this is a batch run, meaning that test cases in need</code>
<code> [2]      ⍝ for any human being for interaction should abort themselves and return `_NoBatchTest` instead.\\</code>
<code> [3]      ⍝ By default any errors are trapped.</code>
<code> [4]      ⍝ In addition you can specify an optional left argument which will make `RunBatchTests` stop in certain circumstances:</code>
<code> [5]      ⍝ * 1=stop just before any test case is about to be executed</code>
<code> [6]      ⍝ * 2=stop in all `Initial*` functions</code>
<code> [7]      ⍝ * 4=stop in all `Cleanup*` functions\\</code>
<code> [8]      ⍝ You may also specify a sum of them, like 3, 5, 6 or 7.\\</code>
<code> [9]      ⍝ This function does not trap errors in case `debugFlag` is 1.\\</code>
<code> [10]     ⍝ Returns 0 for okay or a 1 as `rc` in case one or more test cases are broken or failed.\\</code>
<code> [11]     ⍝ DO NOT localyze `_parms` in this function!</code>
<code> [12]  :Access Public Instance</code>
<code class="emphasize">→[13]  stopFlag←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'stopFlag'</code>
<code class="emphasize">→[14]  'Invalid left argument 'Assert(⊂stopFlag)∊0 1 2 4 3 5 6 7</code>
<code class="emphasize">→[15]  'Invalid right argument 'Assert(⊂debugFlag)∊0 1</code>
<code class="emphasize">→[16]  _parms←CreateParms ⍬</code>
<code class="emphasize">→[17]  _parms.debugFlag←debugFlag</code>
<code class="emphasize">→[18]  _parms.stopFlag←stopFlag</code>
<code class="emphasize">→[19]  _parms.batchFlag←1</code>
<code class="emphasize">→[20]  _parms.trapFlag←0=debugFlag</code>
<code class="emphasize">→[21]  _parms.testCaseNos←⍬</code>
<code class="emphasize">→[22]  (rc log)←Run__ _parms</code>
</div>
<code class="header" id="listing_253">#._tatin.aplteam_Tester2_3_7_0.Tester2.Help &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←Help</code>
<code> [1]  :Access Public Shared</code>
<code class="emphasize">→[2]  r←']open ',##.TatinVars.GetFullPath2AssetsFolder,'Tester2-Reference.html'</code>
</div>
<code class="header" id="listing_254">#._tatin.aplteam_Tester2_3_7_0.Tester2.CreateParms &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←CreateParms dummy</code>
<code> [1]     ⍝ Creates a parameter space to be consumed by `Run__` and therefore by any of the `Run*` functions</code>
<code> [2]     ⍝ that do call `Run__`. The namespace is populated with defaults.\\</code>
<code> [3]     ⍝ 1. `trapFlag`: controls error trapping:</code>
<code> [4]     ⍝    * 1 = failing test cases are reported, then the next one is executed.</code>
<code> [5]     ⍝    * 0 = program halts in case of an error - use this for investigation.</code>
<code> [6]     ⍝ 2. `debugFlag`: if it is 1 failing tests stop for investigation (stop on error).</code>
<code> [7]     ⍝ 3. `batchFlag`: a 1 would mean that the test should quit itself if for example it</code>
<code> [8]     ⍝     needs a human being in front of the monitor. Such test cases are supposed to</code>
<code> [9]     ⍝     do nothing but return `_NoBatchTest` when this flag is on.</code>
<code> [10]    ⍝ 4. `stopFlag`: is treated as "stop just before the next test case is going to be executed" when 1.\\</code>
<code> [11]    ⍝     Since version 2.4 this accepts also an integer that can be the sum of:</code>
<code> [12]    ⍝     * 1=stop just before any test case is executed</code>
<code> [13]    ⍝     * 2=stop in all `Initial*` functions</code>
<code> [14]    ⍝     * 4=stop in all `Cleanup*` functions</code>
<code> [15]    ⍝ 5. `testCaseNos`: the test cases to be executed (IDs or group or a mixture of both)</code>
<code> [16]    ⍝ 6. `guiFlag`: is 0 when no GUI is required an 1 otherwise.</code>
<code> [17]  :Access Public Instance</code>
<code class="emphasize">→[18]  r←⎕NS''</code>
<code class="emphasize">→[19]  r.trapFlag←1</code>
<code class="emphasize">→[20]  r.debugFlag←0</code>
<code class="emphasize">→[21]  r.batchFlag←0</code>
<code class="emphasize">→[22]  r.stopFlag←0</code>
<code class="emphasize">→[23]  r.guiFlag←0</code>
<code class="emphasize">→[24]  r.testCaseNos←⍬</code>
<code class="emphasize">→[25]  r.⎕FX'r←List' 'r←↑{⍵(⍎⍵)}¨'' ''~¨⍨↓⎕NL 2'</code>
</div>
<code class="header" id="listing_255">#._tatin.aplteam_Tester2_3_7_0.Tester2.Run__ &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>   {(rc log)}←Run__ ps</code>
<code> [1]           ⍝ Run all test cases to be found in `_ref`.\\</code>
<code> [2]           ⍝ The right argument is a parameter space, typically created by calling `CreateParms ⍬`.\\</code>
<code> [3]           ⍝ The shy explicit result is a two-element vector:</code>
<code> [4]           ⍝ 1. `r ←→  0 &lt;log&gt;`  when all tests got executed succesfully.\\</code>
<code> [5]           ⍝    `r ←→  1 &lt;log&gt;`  when at least one test failed</code>
<code> [6]           ⍝    `r ←→  2 &lt;log&gt;   when `Initial` prevented any test case to be executed.\\</code>
<code> [7]           ⍝ 2. Nested vector with the log information</code>
<code> [8]    :Access Public Instance</code>
<code class="emphasize">→[9]    ⎕TRAP←(QuitEvent'C' '→∆GetOutOfHere')(PassEvent'C'('⎕SIGNAL ',⍕PassEvent))((0 1000)'N')</code>
<code class="emphasize">→[10]   _ref.Stop←ps.stopFlag    ⍝ "Stop" is honored by "FailsIf" &amp; "PassesIf"</code>
<code class="emphasize">→[11]   _INI←⍬                   ⍝ Flatten any leftovers</code>
<code class="emphasize">→[12]   ps.(log errCounter failedCounter totalCounter)←'' 0 0 0</code>
<code class="emphasize">→[13]   ps.guiFlag∧←'Win'≡A.GetOperatingSystem ⍬  ⍝ Windows only, if at all</code>
<code class="emphasize">→[14]   :If ps.guiFlag</code>
<code class="emphasize">→[15]       _parms.ref2Gui←ps.ref2Gui←ps CreateGui ⍬</code>
<code> [16]   :EndIf</code>
<code class="emphasize">→[17]   ShowLog{'--- Test framework "Tester2" version ',(2⊃⍵),' from ',(3⊃⍵),' ----'}Version</code>
<code class="emphasize">→[18]   _ref←ProcessIniFiles _ref ps</code>
<code class="emphasize">→[19]   ps.returnCodes←⍬</code>
<code class="emphasize">→[20]   initialFlag←0 ⍝ Tells whether `Initial was executed or not</code>
<code class="emphasize">→[21]   :If 0=≢ps.list←{⍵[;1]}ListTestFunctions''</code>
<code class="emphasize">→[22]       →∆GetOutOfHere,rc←0</code>
<code> [23]   :EndIf</code>
<code class="emphasize">→[24]   ProcessGroupAndTestCaseNumbers(_ref ps)</code>
<code class="emphasize">→[25]   :If 0=≢ps.list</code>
<code class="emphasize">→[26]       →∆GetOutOfHere,rc←0</code>
<code> [27]   :EndIf</code>
<code class="emphasize">→[28]   →(0=≢ps.list)/∆GetOutOfHere</code>
<code class="emphasize">→[29]   :If ps.guiFlag</code>
<code class="emphasize">→[30]       :If 0&lt;≢ps.list</code>
<code class="emphasize">→[31]           ps.ref2Gui.∆n.Grid.Values[⍳≢ps.list;2]←(≢'Test_')↓¨ps.list</code>
<code class="emphasize">→[32]           ps.ref2Gui.∆n.Grid.Values[⍳≢ps.list;3]←2↓¨_ref GetFirstCommentLine¨ps.list</code>
<code class="emphasize">→[33]           {2 ⎕NQ ps.ref2Gui.∆n.Grid'SetColSize'⍵ ¯3}¨2 3</code>
<code> [34]       :EndIf</code>
<code class="emphasize">→[35]       {}{_←⎕DQ ⍵ ⋄ ⎕DL 0.1}⍣(0=TestFlag)⊣ps.ref2Gui.∆n.Form</code>
<code class="emphasize">→[36]       :If ps.ref2Gui.∆n.∆Closed</code>
<code class="emphasize">→[37]           (rc log)←0 ''</code>
<code class="emphasize">→[38]           :Return</code>
<code> [39]       :EndIf</code>
<code class="emphasize">→[40]       ps←CopyGUI2Parms ps</code>
<code> [41]   :EndIf</code>
<code class="emphasize">→[42]   :If initialFlag←0&lt;≢ps.list</code>
<code class="emphasize">→[43]       :If 0=ExecuteInitial _ref ps</code>
<code class="emphasize">→[44]           :If ~CR∊⊃¯1↑ps.log</code>
<code class="emphasize">→[45]               ShowLog'*** "Initial" could not initialize'</code>
<code> [46]           :EndIf</code>
<code class="emphasize">→[47]           ps.errCounter←1</code>
<code class="emphasize">→[48]           rc←2</code>
<code class="emphasize">→[49]           ps.list←''</code>
<code class="emphasize">→[50]           →∆GetOutOfHere</code>
<code> [51]       :Else</code>
<code class="emphasize">→[52]           rc←0</code>
<code> [53]       :EndIf</code>
<code> [54]   :EndIf</code>
<code class="emphasize">→[55]   ps.returnCodes←⍬</code>
<code class="emphasize">→[56]   ps.processedGroups←''</code>
<code class="emphasize">→[57]   ShowLog(,'--- Tests started at ',A.FormatDateTime ⎕TS),' on ',(⍕_ref),' ---'</code>
<code class="emphasize">→[58]   buff←⌽(8⍴2)⊤ps.stopFlag</code>
<code class="emphasize">→[59]   buff[1]∨←¯1∊×ps.testCaseNos</code>
<code class="emphasize">→[60]   ps.stopFlag←2⊥⌽buff</code>
<code class="emphasize">→[61]   ProcessTestCases _ref ps</code>
<code class="emphasize">→[62]  ∆GetOutOfHere:</code>
<code class="emphasize">→[63]   :If 0&lt;⎕NC'∆TRAPS_IN_SESSION'</code>
<code class="emphasize">→[64]       {}600⌶∆TRAPS_IN_SESSION ⍝ Restore former setting</code>
<code class="emphasize">→[65]       ⎕EX'∆TRAPS_IN_SESSION'</code>
<code> [66]   :EndIf</code>
<code class="emphasize">→[67]   :If ps.guiFlag</code>
<code class="emphasize">→[68]   :AndIf {6::1 ⋄ 0⊣⍵.Type}ps.ref2Gui.∆n.Form</code>
<code class="emphasize">→[69]       ⎕←'*** Tests cancelled'</code>
<code class="emphasize">→[70]       log←ps.log</code>
<code class="emphasize">→[71]       →0</code>
<code> [72]   :EndIf</code>
<code class="emphasize">→[73]   _INI←⍬                    ⍝ Flatten any leftovers</code>
<code class="emphasize">→[74]   :If 0&lt;ps.⎕NC'list'        ⍝ Then no test cases got executed, probably because `Initial` failed.</code>
<code class="emphasize">→[75]   :AndIf 0&lt;≢ps.list</code>
<code class="emphasize">→[76]       (rc2 log)←ReportTestResults ps</code>
<code class="emphasize">→[77]       :If rc2≠2</code>
<code class="emphasize">→[78]           rc←rc2</code>
<code> [79]       :EndIf</code>
<code class="emphasize">→[80]       _ref.TestCasesExecutedAt←A.FormatDateTime ⎕TS</code>
<code class="emphasize">→[81]       ShowLog'Time of execution recorded on variable ',(⍕_ref),'.TestCasesExecutedAt as: ',_ref.TestCasesExecutedAt</code>
<code> [82]   :EndIf</code>
<code class="emphasize">→[83]   :If initialFlag</code>
<code class="emphasize">→[84]       {}ExecuteCleanup _ref ps</code>
<code> [85]   :EndIf</code>
<code class="emphasize">→[86]   :If 0&lt;≢_codeCoverage</code>
<code class="emphasize">→[87]       :If 0=≢res←_codeCoverage.Finalise 1</code>
<code class="emphasize">→[88]           ⎕←'Coverage report: nothing to report'</code>
<code> [89]       :Else</code>
<code class="emphasize">→[90]           ShowLog'Coverage report: ',res</code>
<code> [91]       :EndIf</code>
<code> [92]   :EndIf</code>
<code class="emphasize">→[93]   ShowLog'*** Tests done'</code>
<code class="emphasize">→[94]   log←ps.log</code>
<code class="emphasize">→[95]   :If ps.guiFlag</code>
<code class="emphasize">→[96]       _ref2GUI←ps.ref2Gui</code>
<code class="emphasize">→[97]       :If ps.ref2Gui.∆n.∆Closed   ⍝ The user has clicked the "Close" box but the GUI is still around</code>
<code class="emphasize">→[98]           CloseGUI</code>
<code> [99]       :Else</code>
<code class="emphasize">→[100]          ps.ref2Gui.∆n.(TrapErrors Debug StopFlag StartBtn PauseBtn).Active←0</code>
<code> [101]      :EndIf</code>
<code> [102]  :EndIf</code>
</div>
<code class="header" id="listing_256">#._tatin.aplteam_Tester2_3_7_0.Tester2.CloseGUI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←CloseGUI</code>
<code> [1]      ⍝ In case the global parameters carry a valid ref pointing to the GUI that GUI is closed.</code>
<code> [2]      ⍝ Errors are trapped.\\</code>
<code> [3]      ⍝ Always returns ⍬.</code>
<code> [4]   :Access Public Instance</code>
<code class="emphasize">→[5]   r←⍬</code>
<code class="emphasize">→[6]   :If 0&lt;⎕NC'_ref2GUI'</code>
<code class="emphasize">→[7]   :AndIf ⍬≢_ref2GUI</code>
<code class="emphasize">→[8]       :Trap 6 11</code>
<code class="emphasize">→[9]           2 ⎕NQ _parms.ref2Gui'Close'</code>
<code class="emphasize">→[10]          _ref2GUI←⍬</code>
<code> [11]      :EndTrap</code>
<code> [12]  :EndIf</code>
</div>
<code class="header" id="listing_257">#._tatin.aplteam_Tester2_3_7_0.Tester2.Getref2Gui &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> ref2Gui←Getref2Gui</code>
<code> [1]     ⍝ Returns either a ref to `Tester2`'s GUI (if there is any) or ⍬.</code>
<code> [2]  :Access Public Instance</code>
<code class="emphasize">→[3]  ref2Gui←⍬</code>
<code class="emphasize">→[4]  :If 0&lt;_parms.⎕NC'ref2Gui'</code>
<code class="emphasize">→[5]  :AndIf ~(⊂_parms.ref2Gui)∊''⍬</code>
<code class="emphasize">→[6]      ref2Gui←_parms.ref2Gui</code>
<code> [7]  :EndIf</code>
</div>
<code class="header" id="listing_258">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessIniFiles &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  ref←ProcessIniFiles(ref ps)</code>
<code class="emphasize">→[1]   iniFilenames←''</code>
<code class="emphasize">→[2]   iniFilename←_IniFolder,((0&lt;≢_IniFolder)/'/'),'Testcases.ini'</code>
<code class="emphasize">→[3]   report←,⊂'Searching for INI file ',iniFilename</code>
<code class="emphasize">→[4]   :If ⎕NEXISTS iniFilename</code>
<code class="emphasize">→[5]       iniFilenames,←⊂iniFilename</code>
<code class="emphasize">→[6]       report[≢report]←⊂((≢report)⊃report),': found'</code>
<code> [7]   :Else</code>
<code class="emphasize">→[8]       report[≢report]←⊂((≢report)⊃report),': not found'</code>
<code> [9]   :EndIf</code>
<code class="emphasize">→[10]  :If 'Win'≡A.GetOperatingSystem ⍬</code>
<code class="emphasize">→[11]      cn←2 ⎕NQ'#' 'GetEnvironment' 'Computername'</code>
<code> [12]  :Else</code>
<code class="emphasize">→[13]      cn←⊃⎕SH'uname -n'</code>
<code> [14]  :EndIf</code>
<code class="emphasize">→[15]  iniFilename←_IniFolder,((0&lt;≢_IniFolder)/'/'),'Testcases-',cn,'.ini'</code>
<code class="emphasize">→[16]  report,←⊂'Searching for INI file ',iniFilename</code>
<code class="emphasize">→[17]  :If ⎕NEXISTS iniFilename</code>
<code class="emphasize">→[18]      iniFilenames,←⊂iniFilename</code>
<code class="emphasize">→[19]      report[≢report]←⊂((≢report)⊃report),': found'</code>
<code> [20]  :Else</code>
<code class="emphasize">→[21]      report[≢report]←⊂((≢report)⊃report),': not found'</code>
<code> [22]  :EndIf</code>
<code class="emphasize">→[23]  ShowLog¨report</code>
<code class="emphasize">→[24]  :If 0≠≢iniFilenames</code>
<code class="emphasize">→[25]      :Trap 6</code>
<code class="emphasize">→[26]          _INI←'flat'(⎕NEW((⊃⊃⎕CLASS ⎕THIS).##.IniFiles)(iniFilenames 1)).Convert ⎕NS''</code>
<code class="emphasize">→[27]          ShowLog'  INI file(s) "',(⊃{⍺,',',⍵}/iniFilenames),'" found and instantiated as INI'</code>
<code class="emphasize">→[28]          ShowLog(⍕≢iniFilenames),' INI file',((1&lt;≢iniFilenames)/'s'),' instantiated'</code>
<code> [29]      :Else</code>
<code class="emphasize">→[30]          'The class "IniFiles" is needed but missing'⎕SIGNAL 6</code>
<code> [31]      :EndTrap</code>
<code> [32]  :EndIf</code>
</div>
<code class="header" id="listing_259">#._tatin.aplteam_Tester2_3_7_0.Tester2.ExecuteInitial &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {success}←ExecuteInitial(ref ps)</code>
<code class="emphasize">→[1]   success←1</code>
<code class="emphasize">→[2]   report←'Looking for a function "Initial": '</code>
<code class="emphasize">→[3]   initMsg←''</code>
<code class="emphasize">→[4]   :If 3=ref.⎕NC'Initial'</code>
<code class="emphasize">→[5]       :If 2⊃⌽(8⍴2)⊤ps.stopFlag</code>
<code class="emphasize">→[6]           (∪(⎕STOP 1⊃⎕SI),∆stop1,∆stop2,∆stop3,∆stop4)⎕STOP 1⊃⎕SI</code>
<code> [7]       :Else</code>
<code class="emphasize">→[8]           ((⎕STOP 1⊃⎕SI)~,∆stop1,∆stop2,∆stop3,∆stop4)⎕STOP 1⊃⎕SI</code>
<code> [9]       :EndIf</code>
<code class="emphasize">→[10]      :Select ⊃(⎕IO+1)⊃1 ref.⎕AT'Initial'</code>
<code class="emphasize">→[11]      :Case 0</code>
<code class="emphasize">→[12]          :If 0=⊃⊃ref.⎕AT'Initial'</code>
<code class="emphasize">→[13] ∆stop1:      ref.Initial</code>
<code> [14]          :Else</code>
<code class="emphasize">→[15] ∆stop2:      buff←ref.Initial</code>
<code class="emphasize">→[16]              :If ' '=1↑0⍴buff</code>
<code class="emphasize">→[17]                  success←0=≢buff</code>
<code class="emphasize">→[18]                  :If 0&lt;≢buff</code>
<code class="emphasize">→[19]                      initMsg←buff</code>
<code> [20]                  :EndIf</code>
<code> [21]              :Else</code>
<code class="emphasize">→[22]                  success←buff</code>
<code> [23]              :EndIf</code>
<code> [24]          :EndIf</code>
<code class="emphasize">→[25]      :Case 1</code>
<code class="emphasize">→[26]          :If 0=⊃⊃ref.⎕AT'Initial'</code>
<code class="emphasize">→[27] ∆stop3:      ref.Initial ps</code>
<code> [28]          :Else</code>
<code class="emphasize">→[29] ∆stop4:      buff←ref.Initial ps</code>
<code class="emphasize">→[30]              :If ' '=1↑0⍴buff</code>
<code class="emphasize">→[31]                  success←0=≢buff</code>
<code class="emphasize">→[32]                  :If 0&lt;≢buff</code>
<code class="emphasize">→[33]                      initMsg←buff</code>
<code> [34]                  :EndIf</code>
<code> [35]              :Else</code>
<code class="emphasize">→[36]                  success←buff</code>
<code> [37]              :EndIf</code>
<code> [38]          :EndIf</code>
<code> [39]      :Else</code>
<code class="emphasize">→[40]          11 ⎕SIGNAL⍨'The "Initial" function in ',(⍕ref),' has an invalid signature: it''s neither monadic nor niladic'</code>
<code> [41]      :EndSelect</code>
<code class="emphasize">→[42]      :If success</code>
<code class="emphasize">→[43]          report,←'found and successfully executed'</code>
<code> [44]      :Else</code>
<code class="emphasize">→[45]          report,←'found and executed but it signalled failure'</code>
<code class="emphasize">→[46]          :If 0&lt;≢initMsg</code>
<code class="emphasize">→[47]              report,←':',CR,initMsg</code>
<code> [48]          :EndIf</code>
<code> [49]      :EndIf</code>
<code> [50]  :Else</code>
<code class="emphasize">→[51]      report,←'not found'</code>
<code> [52]  :EndIf</code>
<code class="emphasize">→[53]  ShowLog report</code>
</div>
<code class="header" id="listing_260">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessGroupAndTestCaseNumbers &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  ProcessGroupAndTestCaseNumbers(ref ps)</code>
<code class="emphasize">→[1]   ps.group←''</code>
<code class="emphasize">→[2]   :If 0≠≢ps.testCaseNos</code>
<code class="emphasize">→[3]       :If ' '=1↑0⍴∊ps.testCaseNos</code>
<code class="emphasize">→[4]           :If 0 1∊⍨≡ps.testCaseNos</code>
<code class="emphasize">→[5]               ps.group←ps.testCaseNos</code>
<code class="emphasize">→[6]               ps.testCaseNos←⍬</code>
<code> [7]           :Else</code>
<code class="emphasize">→[8]               ps.group←1⊃ps.testCaseNos</code>
<code class="emphasize">→[9]               'Group definition must not carry "," or "~" in case test case number were specified'Assert~∨/',~'∊ps.group</code>
<code class="emphasize">→[10]              ps.testCaseNos←∊1↓ps.testCaseNos</code>
<code class="emphasize">→[11]              'Test case number(s) must be numeric'Assert~∨/~{⊃0=1↑0⍴⍵}¨ps.testCaseNos</code>
<code> [12]          :EndIf</code>
<code> [13]      :EndIf</code>
<code class="emphasize">→[14]      :If 0≠≢ps.group</code>
<code class="emphasize">→[15]          :If ','∊ps.group</code>
<code class="emphasize">→[16]              ps.group←','(≠⊆⊢)ps.group</code>
<code> [17]          :Else</code>
<code class="emphasize">→[18]              ps.group←,⊆ps.group</code>
<code> [19]          :EndIf</code>
<code class="emphasize">→[20]          ref ProcessGroup ps</code>
<code> [21]      :EndIf</code>
<code> [22]  :EndIf</code>
<code class="emphasize">→[23]  :If 0=≢ps.list</code>
<code class="emphasize">→[24]      rc←0</code>
<code class="emphasize">→[25]      :Return</code>
<code> [26]  :EndIf</code>
<code class="emphasize">→[27]  :If (,0)≡,ps.testCaseNos</code>
<code class="emphasize">→[28]      ps.testCaseNos←¯1</code>
<code> [29]  :Else</code>
<code class="emphasize">→[30]      :If 0≠≢ps.testCaseNos</code>
<code class="emphasize">→[31]          :If 0=≢ps.group</code>
<code class="emphasize">→[32]              :If 0=≢ps.list←(1={'_'+.=⍵}¨ps.list)/ps.list</code>
<code class="emphasize">→[33]                  rc←0</code>
<code class="emphasize">→[34]                  :Return</code>
<code> [35]              :EndIf</code>
<code> [36]          :EndIf</code>
<code class="emphasize">→[37]          ps.list←((⊃¨GetTestNo¨ps.list)∊|ps.testCaseNos)/ps.list   ⍝ Now select the numbers</code>
<code class="emphasize">→[38]          :If 0=≢ps.list</code>
<code class="emphasize">→[39]              rc←0</code>
<code class="emphasize">→[40]              :Return</code>
<code> [41]          :EndIf</code>
<code> [42]      :EndIf</code>
<code> [43]  :EndIf</code>
<code class="emphasize">→[44]  ps.groups←∪GetGroupName¨{⍵/⍨'_'∊¨⍵}ps.list</code>
<code class="emphasize">→[45]  ps.group←ps.group[⍋ps.group]</code>
<code class="emphasize">→[46]  ps.list←ps.list[⍋ps.list]</code>
<code> [47]      ⍝Done</code>
</div>
<code class="header" id="listing_261">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessGroup &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←ref ProcessGroup ps</code>
<code> [1]      ⍝ `def` is a group definition or a specific test case.</code>
<code> [2]      ⍝ This function</code>
<code class="emphasize">→[3]   r←⍬</code>
<code class="emphasize">→[4]   ps.group←ps.group[⍋'~'=⊃¨ps.group]    ⍝ Make sure "without" is handled at the very end</code>
<code class="emphasize">→[5]   list←Remove∆Test_¨ps.list             ⍝ All</code>
<code class="emphasize">→[6]   groups←Remove∆Test_¨ps.group</code>
<code class="emphasize">→[7]   collect←''</code>
<code class="emphasize">→[8]   :If 1=≢groups</code>
<code class="emphasize">→[9]   :AndIf '~'=⊃⊃groups</code>
<code class="emphasize">→[10]      collect←(≢'Test_')↓¨' '~⍨¨↓'Test_'{⍵⌿⍨((≢⍺)↑[2]⍵)∧.=⍺}'T'ref.⎕NL 3  ⍝ All</code>
<code> [11]  :Else</code>
<code class="emphasize">→[12]      :For grp :In groups                   ⍝ Loops over group definitions and collect hits</code>
<code class="emphasize">→[13]          :If '~'=1⍴grp</code>
<code class="emphasize">→[14]              :Leave</code>
<code> [15]          :EndIf</code>
<code class="emphasize">→[16]          :If '*'∊grp</code>
<code class="emphasize">→[17]              collect,←(list{(↑⍺)[;⍳≢⍵]∧.=⍵}grp~'*')/list</code>
<code class="emphasize">→[18]          :ElseIf ∧/grp∊⎕D                  ⍝ Specific test case rather than group?</code>
<code class="emphasize">→[19]              collect,←((↑list)[;⍳≢grp]∧.=grp)/list</code>
<code class="emphasize">→[20]          :ElseIf '_'∊grp</code>
<code class="emphasize">→[21]          :AndIf ∧/({⍵↓⍨⍵⍳'_'}grp)∊⎕D</code>
<code class="emphasize">→[22]              collect,←(list≡¨⊂grp)/list</code>
<code> [23]          :Else</code>
<code class="emphasize">→[24]              collect,←(({~'_'∊⍵:'' ⋄ ⍵↑⍨¯1+⍵⍳'_'}¨list)≡¨⊂grp)/list</code>
<code> [25]          :EndIf</code>
<code> [26]      :EndFor</code>
<code> [27]  :EndIf</code>
<code class="emphasize">→[28]  without←{⍵/⍨'~'=⊃¨⍵}groups</code>
<code class="emphasize">→[29]  :If 0&lt;≢collect</code>
<code class="emphasize">→[30]      :For grp :In without                  ⍝ Loops over "without" definitions and removes stuff</code>
<code class="emphasize">→[31]          :If '*'∊grp</code>
<code class="emphasize">→[32]              collect←(~collect{(↑⍺)[;⍳≢⍵]∧.=⍵}grp~'~*')/collect</code>
<code> [33]          :EndIf</code>
<code class="emphasize">→[34]          collect←((~collect{((≢⍵)↑[2](↑⍺))∧.=⍵}1↓grp))/collect</code>
<code> [35]      :EndFor</code>
<code> [36]  :EndIf</code>
<code class="emphasize">→[37]  ps.list←'Test_'∘,¨∪collect</code>
</div>
<code class="header" id="listing_262">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessTestCases &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>   ProcessTestCases(ref ps)</code>
<code class="emphasize">→[1]    cw←≢max←⍕noOf←≢ps.list</code>
<code class="emphasize">→[2]    length←2+⌈/≢¨ps.list</code>
<code class="emphasize">→[3]    length2←length+≢'(',max,'/',max,')  '</code>
<code class="emphasize">→[4]    :If ps.guiFlag</code>
<code class="emphasize">→[5]        :If 0&lt;≢ps.list</code>
<code class="emphasize">→[6]            ps.ref2Gui.∆n.Grid.Values←(noOf,1↓⍴ps.ref2Gui.∆n.Grid.Values)⍴ps.ref2Gui.∆n.Grid.Values</code>
<code class="emphasize">→[7]            ps.ref2Gui.∆n.Grid.CellTypes←(noOf,1↓⍴ps.ref2Gui.∆n.Grid.Values)⍴ps.ref2Gui.∆n.Grid.CellTypes</code>
<code class="emphasize">→[8]            2 ⎕NQ ps.ref2Gui.∆n.Form'Flush'</code>
<code> [9]        :EndIf</code>
<code class="emphasize">→[10]       :If ps.ref2Gui.∆n.∆Closed</code>
<code class="emphasize">→[11]           ⎕SIGNAL QuitEvent</code>
<code> [12]       :EndIf</code>
<code class="emphasize">→[13]       ps.ref2Gui.∆n.Form.on9998←0</code>
<code class="emphasize">→[14]       ps.ref2Gui.∆n.StartBtn.Active←0</code>
<code class="emphasize">→[15]       ps.stopFlag←⊃{⍵≡(≢⍵)↑1:0 ⋄ ⍵/0 1 2 4 3 5 7 6}ps.ref2Gui.∆n.StopFlag.SelItems</code>
<code class="emphasize">→[16]       ps.trapFlag←ps.ref2Gui.∆n.TrapErrors.State</code>
<code class="emphasize">→[17]       {2 ⎕NQ ps.ref2Gui.∆n.Grid'SetColSize'⍵ ¯3}¨¯1↓3↓⍳2⊃⍴ps.ref2Gui.∆n.Grid.Values</code>
<code> [18]   :EndIf</code>
<code class="emphasize">→[19]   i←0</code>
<code class="emphasize">→[20]   :Repeat</code>
<code class="emphasize">→[21]       i+←1</code>
<code class="emphasize">→[22]       testFns←i⊃ps.list</code>
<code class="emphasize">→[23]       currentGroup←GetGroupName Remove∆Test_ testFns</code>
<code class="emphasize">→[24]       currentGroup←(~∧/currentGroup∊⎕D)/currentGroup  ⍝ If it's just digits its a number rather than a group name</code>
<code class="emphasize">→[25]       testNo←GetTestNo testFns</code>
<code class="emphasize">→[26]       :Trap QuitEvent,ps.trapFlag/0</code>
<code class="emphasize">→[27]           :If ps.guiFlag</code>
<code class="emphasize">→[28]           :AndIf ps.ref2Gui.∆n.PauseBtn.State</code>
<code class="emphasize">→[29]               ps.ref2Gui.∆n.Info.Text←'PAUSING'</code>
<code class="emphasize">→[30]               {0=⍵.ref2Gui.∆n.PauseBtn.State:shy←1 ⋄ _←⎕DL 0.3 ⋄ ∇ ⍵}ps</code>
<code> [31]           :EndIf</code>
<code class="emphasize">→[32]           ¯1 ShowLog(length2↑(length↑testFns),' (',(cw 0⍕i),'/',max,')')</code>
<code class="emphasize">→[33]           i AddToGui(length2↑(length↑'  ',testFns),' (',(cw 0⍕i),'/',max,')')</code>
<code class="emphasize">→[34]           (continueFlag i noOf)←HandleInitialize(ref ps currentGroup i noOf)</code>
<code class="emphasize">→[35]           :If continueFlag</code>
<code class="emphasize">→[36]               HandleCleanup ref ps currentGroup i</code>
<code class="emphasize">→[37]               :Continue</code>
<code> [38]           :EndIf</code>
<code class="emphasize">→[39]           rc←ExecuteTestFunction ref ps testNo testFns</code>
<code class="emphasize">→[40]           :If ' '=1↑0⍴rc   ⍝ Custom message?</code>
<code class="emphasize">→[41]               :If (⊂rc)∊ListCustomMessages[;2]                      ⍝ Is it a valid custom message?</code>
<code class="emphasize">→[42]                   rc←-⍎¯1↑ListSymbolicNames{⊃⍺[1⍳⍨⍺[;2]≡¨⊂⍵;]}rc    ⍝ Translate custom msg into return code</code>
<code> [43]               :Else</code>
<code class="emphasize">→[44]                   ⎕←'Current test function (',testFns,')'</code>
<code class="emphasize">→[45]                   ⎕←'returned an invalid result: neither a valid numeric code (symbolic name) nor a custom message'</code>
<code class="emphasize">→[46]                   ∘∘∘</code>
<code> [47]               :EndIf</code>
<code> [48]           :EndIf</code>
<code class="emphasize">→[49]           ps.totalCounter+←1</code>
<code class="emphasize">→[50]           ps.failedCounter+←rc=1</code>
<code class="emphasize">→[51]           :If 0&gt;rc</code>
<code class="emphasize">→[52]               ps.returnCodes,←rc</code>
<code> [53]           :EndIf</code>
<code class="emphasize">→[54]           ps AddReturnCodeToGrid rc i</code>
<code class="emphasize">→[55]           comment←2↓ref GetFirstCommentLine testFns</code>
<code class="emphasize">→[56]           desc←(⎕PW-length2){⍺&lt;≢⍵:'...',⍨⍵↑⍨⍺-4 ⋄ ⍵}⍣(~ps.guiFlag)⊢comment</code>
<code class="emphasize">→[57]           :If rc∊0 1</code>
<code class="emphasize">→[58]               marker←('*✓'[1+rc=0])</code>
<code> [59]           :Else</code>
<code class="emphasize">→[60]               marker←'⍝'</code>
<code> [61]           :EndIf</code>
<code class="emphasize">→[62]           3 ShowLog marker,' ',desc,ReportLineNumber</code>
<code class="emphasize">→[63]           i AddToGui(length2↑(length↑marker,' ',testFns),' (',(cw 0⍕i),'/',max,')'),' ⍝ ',desc,ReportLineNumber</code>
<code class="emphasize">→[64]           ⎕EX'∆FAILING_LINE'</code>
<code class="emphasize">→[65]           :If ~rc∊_OK,_Failed</code>
<code class="emphasize">→[66]           :AndIf ps.guiFlag</code>
<code class="emphasize">→[67]           :AndIf ps.ref2Gui.∆n.∆Closed=0</code>
<code class="emphasize">→[68]               (GetSymbolicName rc)ReportInactiveToGUI i ref testFns ps.ref2Gui.∆n</code>
<code> [69]           :EndIf</code>
<code class="emphasize">→[70]           :If 0&gt;rc</code>
<code class="emphasize">→[71]               :If 0&lt;ps.errCounter</code>
<code class="emphasize">→[72]                   rc←1</code>
<code> [73]               :EndIf</code>
<code> [74]           :EndIf</code>
<code class="emphasize">→[75]       :Case QuitEvent</code>
<code class="emphasize">→[76]           HandleCleanup ref ps currentGroup i</code>
<code class="emphasize">→[77]           ⎕SIGNAL QuitEvent</code>
<code> [78]       :Else</code>
<code class="emphasize">→[79]           ps.errCounter+←1</code>
<code class="emphasize">→[80]           ps.totalCounter+←1</code>
<code class="emphasize">→[81]           comment←2↓ref GetFirstCommentLine testFns</code>
<code class="emphasize">→[82]           desc←(⎕PW-length2){⍺&lt;≢⍵:'...',⍨⍵↑⍨⍺-4 ⋄ ⍵}⍣(~ps.guiFlag)⊢comment</code>
<code class="emphasize">→[83]           marker←'#'</code>
<code class="emphasize">→[84]           ¯2 ShowLog marker' ',desc</code>
<code class="emphasize">→[85]           i AddToGui(length2↑(length↑marker,' ',testFns),' (',(cw 0⍕i),'/',max,')'),' ⍝ ',desc</code>
<code class="emphasize">→[86]           :If ps.guiFlag</code>
<code class="emphasize">→[87]               ps.ref2Gui.∆n.Grid.Values[i;4]←⊂'{Broken}'</code>
<code> [88]           :EndIf</code>
<code> [89]       :EndTrap</code>
<code class="emphasize">→[90]       HandleCleanup ref ps currentGroup i</code>
<code class="emphasize">→[91]       {}⎕WA  ⍝ Enforce a memory compaction in order to get rid of any rubbish.</code>
<code class="emphasize">→[92]       :If ps.guiFlag</code>
<code class="emphasize">→[93]       :AndIf 0=ps.ref2Gui.∆n.∆Closed</code>
<code class="emphasize">→[94]           ps.stopFlag←⊃{⍵≡(≢⍵)↑1:0 ⋄ ⍵/0 1 2 4 3 5 7 6}ps.ref2Gui.∆n.StopFlag.SelItems</code>
<code class="emphasize">→[95]           ps.trapFlag←ps.ref2Gui.∆n.TrapErrors.State</code>
<code class="emphasize">→[96]           ProcessGuiEvents ps.ref2Gui.∆n</code>
<code class="emphasize">→[97]       :AndIf ps.ref2Gui.∆n.∆Closed</code>
<code class="emphasize">→[98]           ⎕SIGNAL QuitEvent</code>
<code> [99]       :EndIf</code>
<code class="emphasize">→[100]  :Until i≥≢ps.list</code>
<code class="emphasize">→[101]  :If ps.guiFlag</code>
<code class="emphasize">→[102]      ps.ref2Gui.∆n.Info.Text←''</code>
<code> [103]  :EndIf</code>
<code> [104] ⍝Done</code>
</div>
<code class="header" id="listing_263">#._tatin.aplteam_Tester2_3_7_0.Tester2.ReportTestResults &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  (rc log)←ReportTestResults ps</code>
<code class="emphasize">→[1]   log←''</code>
<code class="emphasize">→[2]   log,←⊂'-----'</code>
<code class="emphasize">→[3]   log,←⊂'  ',(⍕ps.totalCounter),' test case',((1≠ps.totalCounter)/'s'),' of ',(⍕≢ps.list),' called'</code>
<code class="emphasize">→[4]   log,←⊂'  ',(⍕ps.failedCounter),' test case',((1≠+/ps.failedCounter)/'s'),' failed',(0&lt;ps.failedCounter)/' (flagged with "*")'</code>
<code class="emphasize">→[5]   log,←⊂'  ',(⍕ps.errCounter),' test case',((1≠+/ps.errCounter)/'s'),' broken',(0&lt;ps.errCounter)/' (flagged with "#")'</code>
<code class="emphasize">→[6]   :If 0≠ps.totalCounter</code>
<code class="emphasize">→[7]       constants←ListSymbolicNames</code>
<code class="emphasize">→[8]       constants←(~constants[;1]∊'_OK' '_Failed')⌿constants</code>
<code class="emphasize">→[9]       :For constant comment :In ↓constants</code>
<code class="emphasize">→[10]          :If '_custom'{⍺≡(≢⍺)↑⍵}constant</code>
<code class="emphasize">→[11]          :AndIf 0&lt;≢comment</code>
<code class="emphasize">→[12]          :AndIf 0&lt;noOf←ps.returnCodes+.=-⊃(//)⎕VFI(≢'_custom_')↓constant</code>
<code class="emphasize">→[13]              log,←⊂'  ',(⍕noOf),' test cases not executed because of "',comment,'" (flagged with "⍝")'</code>
<code class="emphasize">→[14]          :ElseIf 0&lt;noOf←ps.returnCodes+.=⍎constant</code>
<code class="emphasize">→[15]              log,←⊂'  ',(⍕noOf),' test cases not executed because of "',(1↓constant),'" (flagged with "⍝")'</code>
<code> [16]          :EndIf</code>
<code> [17]      :EndFor</code>
<code> [18]  :Else</code>
<code class="emphasize">→[19]      log,←⊂'0 test cases executed'</code>
<code> [20]  :EndIf</code>
<code class="emphasize">→[21]  ShowLog log</code>
<code class="emphasize">→[22]  rc←0&lt;ps.failedCounter+ps.errCounter</code>
</div>
<code class="header" id="listing_264">#._tatin.aplteam_Tester2_3_7_0.Tester2.ExecuteCleanup &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←ExecuteCleanup(ref ps)</code>
<code class="emphasize">→[1]   r←⍬</code>
<code class="emphasize">→[2]   report←'Looking for a function "Cleanup": '</code>
<code class="emphasize">→[3]   :If 3=ref.⎕NC'Cleanup'</code>
<code class="emphasize">→[4]       :If 3⊃⌽(8⍴2)⊤ps.stopFlag</code>
<code class="emphasize">→[5]           (∆stop1 ∆stop2)⎕STOP 1⊃⎕SI</code>
<code> [6]       :Else</code>
<code class="emphasize">→[7]           ((⎕STOP 1⊃⎕SI)~∆stop1 ∆stop2)⎕STOP 1⊃⎕SI</code>
<code> [8]       :EndIf</code>
<code class="emphasize">→[9]       :If 0=1 2⊃ref.⎕AT'Cleanup'</code>
<code class="emphasize">→[10] ∆stop1:  ref.Cleanup</code>
<code class="emphasize">→[11]          report,←'found and executed'</code>
<code> [12]      :Else</code>
<code class="emphasize">→[13] ∆stop2:  ref.Cleanup ps</code>
<code> [14]      :EndIf</code>
<code> [15]  :Else</code>
<code class="emphasize">→[16]      report,←'not found'</code>
<code> [17]  :EndIf</code>
<code class="emphasize">→[18]  ShowLog report</code>
</div>
<code class="header" id="listing_265">#._tatin.aplteam_Tester2_3_7_0.Tester2.QuitTests &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> QuitTests</code>
<code> [1]     ⍝ Use this method to quit a test run prematurely and make sure that everything is tidied up,</code>
<code> [2]     ⍝ meaning that a `Cleanup` function (if any) is executed.\\</code>
<code> [3]  :Access Public Instance</code>
<code class="emphasize">→[4]  ∆TRAPS_IN_SESSION←600⌶0  ⍝ Enable traps in the session and save original setting</code>
<code class="emphasize">→[5]  ⎕SIGNAL QuitEvent</code>
</div>
<code class="header" id="listing_266">#._tatin.aplteam_Tester2_3_7_0.Tester2.ShowLog &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←{type}ShowLog msg</code>
<code> [1]      ⍝ `type` may be 1 or 2 or 3 or ¯1 or ¯2:</code>
<code> [2]      ⍝ * A 1 means an action message</code>
<code> [3]      ⍝ * A 2 means the result of the execution attempt of a test function.</code>
<code> [4]      ⍝ * A 3 means "to be appended the very last line in the log"</code>
<code> [5]      ⍝ * A negative type means message with more to come</code>
<code> [6]      ⍝ Requires semi-global `ps`: a parameter space with `ps.log` being, well, the log.</code>
<code class="emphasize">→[7]   r←⍬</code>
<code class="emphasize">→[8]   :If 0&lt;≢msg</code>
<code class="emphasize">→[9]       type←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 1}'type'</code>
<code class="emphasize">→[10]      'Invalid type'Assert(⊂|type)∊1 2 3</code>
<code class="emphasize">→[11]      :If ps.batchFlag∧0=ps.guiFlag</code>
<code class="emphasize">→[12]          :If type=3</code>
<code class="emphasize">→[13]              ps.log[≢ps.log]←⊂((≢ps.log)⊃ps.log),msg</code>
<code> [14]          :Else</code>
<code class="emphasize">→[15]              :If 1&lt;≡msg</code>
<code class="emphasize">→[16]                  ps.log,←msg</code>
<code> [17]              :Else</code>
<code class="emphasize">→[18]                  ps.log,←⊂msg</code>
<code> [19]              :EndIf</code>
<code> [20]          :EndIf</code>
<code> [21]      :Else</code>
<code class="emphasize">→[22]          buff←{1=≡⍵:⊂⍵ ⋄ (3≠≢⍵)∨'---'≡3↑⊃⍵:⍵ ⋄ ⊂(1⊃⍵),' ',(2⊃⍵),' ',(3⊃⍵)}msg</code>
<code class="emphasize">→[23]          :If ps.guiFlag</code>
<code class="emphasize">→[24]              :If ps.ref2Gui.∆n.∆Closed</code>
<code class="emphasize">→[25]                  ⎕SIGNAL QuitEvent</code>
<code> [26]              :EndIf</code>
<code class="emphasize">→[27]              :If 3=type</code>
<code class="emphasize">→[28]              :AndIf 1=≡msg</code>
<code class="emphasize">→[29]                  ps.ref2Gui.∆n.Log.Text[≢ps.ref2Gui.∆n.Log.Text]←⊂(⊃⌽ps.ref2Gui.∆n.Log.Text),msg</code>
<code> [30]              :Else</code>
<code class="emphasize">→[31]                  ps.ref2Gui.∆n.Log.Text,←⊆msg</code>
<code> [32]              :EndIf</code>
<code class="emphasize">→[33]              ps.ref2Gui.∆n.Log.SelText←2⍴(≢ps.ref2Gui.∆n.Log.Text),¨1</code>
<code> [34]          :EndIf</code>
<code class="emphasize">→[35]          :If type=3</code>
<code class="emphasize">→[36]              ps.log[≢ps.log]←⊂((≢ps.log)⊃ps.log),⊃buff</code>
<code> [37]          :Else</code>
<code class="emphasize">→[38]              ps.log,←buff</code>
<code> [39]          :EndIf</code>
<code class="emphasize">→[40]          :If ~ps.guiFlag</code>
<code class="emphasize">→[41]              :If type=3</code>
<code class="emphasize">→[42]                  ⎕←⊃¯1↑ps.log</code>
<code class="emphasize">→[43]              :ElseIf ¯1≠×type</code>
<code class="emphasize">→[44]                  selog←{1=≡⍵:⍵ ⋄ (3≠≢⍵)∨'---'≡3↑⊃⍵:⍪⍵ ⋄ (1⊃⍵),' ',(2⊃⍵),' ',(3⊃⍵)}msg</code>
<code class="emphasize">→[45]                  :If type&lt;0</code>
<code class="emphasize">→[46]                      ⍞←selog,(type=¯2)/CR</code>
<code> [47]                  :Else</code>
<code class="emphasize">→[48]                      ⎕←selog</code>
<code> [49]                  :EndIf</code>
<code> [50]              :EndIf</code>
<code> [51]          :EndIf</code>
<code> [52]      :EndIf</code>
<code> [53]  :EndIf</code>
</div>
<code class="header" id="listing_267">#._tatin.aplteam_Tester2_3_7_0.Tester2.CreateGui &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>   {r}←ps CreateGui dummy</code>
<code class="emphasize">→[1]    n←⎕NS''</code>
<code class="emphasize">→[2]    ∆←''</code>
<code class="emphasize">→[3]    ∆,←⊂'Caption'('Test cases in ',⍕{⊃⍵~1⍴⍵}⎕NSI)</code>
<code class="emphasize">→[4]    ∆,←⊂'Coord' 'Pixel'</code>
<code class="emphasize">→[5]    ∆,←⊂'Posn'(40 20)</code>
<code class="emphasize">→[6]    ∆,←⊂'Size'(600 1100)</code>
<code class="emphasize">→[7]    n.Form←⎕NEW'Form'∆</code>
<code class="emphasize">→[8]    n.Form.∆n←n  ⍝ Prevents the Form from disappearing</code>
<code class="emphasize">→[9]    n.∆Closed←0</code>
<code class="emphasize">→[10]   n.Form.onClose←'OnClose'</code>
<code class="emphasize">→[11]   n.Form.on9999←1       ⍝ Used to end a ⎕DQ on the Form for processing events, in particular "Close"</code>
<code class="emphasize">→[12]   n.Form.on9998←1       ⍝ Used to end a ⎕DQ at an early stage, before the tests are run. Deactivated then.</code>
<code class="emphasize">→[13]   n.Form.onKeyPress←'OnKeyPress'</code>
<code> [14]  </code>
<code class="emphasize">→[15]   n.Font←⎕NEW'Font'(('PName' 'APL385 Unicode')('Size' 18))</code>
<code class="emphasize">→[16]   n.Form.FontObj←n.Font</code>
<code> [17]  </code>
<code class="emphasize">→[18]   n.MyTipObj←⎕NEW⊂'TipField'</code>
<code> [19]  </code>
<code class="emphasize">→[20]   n.SB←n.Form.⎕NEW'Statusbar'(,⊂'Attach'('Bottom' 'Left' 'Bottom' 'Right'))</code>
<code class="emphasize">→[21]   n.Info←n.SB.⎕NEW'StatusField'(('Coord' 'Prop')('Size'(⍬ 99))('Attach'('Bottom' 'Left' 'Bottom' 'Right')))</code>
<code> [22]  </code>
<code class="emphasize">→[23]   ∆←''</code>
<code class="emphasize">→[24]   ∆,←⊂'Caption' '&amp;Start'</code>
<code class="emphasize">→[25]   ∆,←⊂'Size'(⍬ 110)</code>
<code class="emphasize">→[26]   ∆,←⊂'Attach'(4⍴'Bottom' 'Left')</code>
<code class="emphasize">→[27]   n.StartBtn←n.Form.⎕NEW'Button'∆</code>
<code class="emphasize">→[28]   n.StartBtn.onSelect←1</code>
<code class="emphasize">→[29]   n.StartBtn.Posn←(n.Form.Size[1]-n.StartBtn.Size[1]+5+n.SB.Size[1]),10</code>
<code> [30]  </code>
<code class="emphasize">→[31]   ∆←''</code>
<code class="emphasize">→[32]   ∆,←⊂'Caption' '&amp;Pause'</code>
<code class="emphasize">→[33]   ∆,←⊂'Size'(⍬ 110)</code>
<code class="emphasize">→[34]   ∆,←⊂'Style' 'Check'</code>
<code class="emphasize">→[35]   ∆,←⊂'Attach'(4⍴'Bottom' 'Left')</code>
<code class="emphasize">→[36]   n.PauseBtn←n.Form.⎕NEW'Button'∆</code>
<code class="emphasize">→[37]   n.PauseBtn.Posn←(n.StartBtn.Posn[1]),20++/2⊃+⌿↑n.StartBtn.(Posn Size)</code>
<code> [38]  </code>
<code class="emphasize">→[39]   ∆←''</code>
<code class="emphasize">→[40]   ∆,←⊂'Style' 'Check'</code>
<code class="emphasize">→[41]   ∆,←⊂'Posn'(5 5)</code>
<code class="emphasize">→[42]   ∆,←⊂'Caption' '&amp;Trap errors'</code>
<code class="emphasize">→[43]   ∆,←⊂'State'ps.trapFlag</code>
<code class="emphasize">→[44]   ∆,←⊂'Attach'(4⍴'Top' 'Left')</code>
<code class="emphasize">→[45]   ∆,←⊂'TipObj'n.MyTipObj</code>
<code class="emphasize">→[46]   ∆,←⊂'Tip'('Trap all errors in tests and report them as crashing.' 'The setting does NOT influcence the effect of the "debug" flag')</code>
<code class="emphasize">→[47]   n.TrapErrors←n.Form.⎕NEW'Button'∆</code>
<code> [48]  </code>
<code class="emphasize">→[49]   ∆←''</code>
<code class="emphasize">→[50]   ∆,←⊂'Style' 'Check'</code>
<code class="emphasize">→[51]   ∆,←⊂'Posn'(5,20+2⊃+⌿↑n.TrapErrors.(Posn Size))</code>
<code class="emphasize">→[52]   ∆,←⊂'Caption' '&amp;Debug'</code>
<code class="emphasize">→[53]   ∆,←⊂'Attach'(4⍴'Top' 'Left')</code>
<code class="emphasize">→[54]   ∆,←⊂'State'ps.debugFlag</code>
<code class="emphasize">→[55]   ∆,←⊂'TipObj'n.MyTipObj</code>
<code class="emphasize">→[56]   ∆,←⊂'Tip'('Crash at failing tests for investigation rather than just reporting them.' 'The setting does NOT influcence "Trap Errors"')</code>
<code class="emphasize">→[57]   n.Debug←n.Form.⎕NEW'Button'∆</code>
<code> [58]  </code>
<code class="emphasize">→[59]   ∆←''</code>
<code class="emphasize">→[60]   ∆,←⊂'Posn'(5,20+2⊃+⌿↑n.Debug.(Posn Size))</code>
<code class="emphasize">→[61]   items←(⊂'No stop'),'Stop on '∘,¨'tests' '"Initial"' '"Cleanup"' 'tests+"Initial"' 'tests+"Cleanup"' 'test+"Initial"+"Cleanup"' '"Initial"+"Cleanup"'</code>
<code class="emphasize">→[62]   items,¨←'' ' (1)' ' (2)' ' (4)' ' (3)' ' (5)' ' (7)' ' (6)'</code>
<code class="emphasize">→[63]   ∆,←⊂'Items'items</code>
<code class="emphasize">→[64]   bool←(≢items)⍴0</code>
<code class="emphasize">→[65]   :If 0=+/(8⍴2)⊤ps.stopFlag</code>
<code class="emphasize">→[66]       bool[1]←1</code>
<code> [67]   :Else</code>
<code class="emphasize">→[68]       bool[1+1 2 4 3 5 7 6⍳ps.stopFlag]←1</code>
<code> [69]   :EndIf</code>
<code class="emphasize">→[70]   ∆,←⊂'SelItems'bool</code>
<code class="emphasize">→[71]   ∆,←⊂'Attach'(4⍴'Top' 'Left')</code>
<code class="emphasize">→[72]   ∆,←⊂'TipObj'n.MyTipObj</code>
<code class="emphasize">→[73]   ∆,←⊂'Tip'('Stop just before any test or any "Initial" or' 'any "Cleanup" functions gets executed.' 'Allows tracing those functions.')</code>
<code class="emphasize">→[74]   n.StopFlag←n.Form.⎕NEW'Combo'∆</code>
<code> [75]  </code>
<code class="emphasize">→[76]   ∆←''</code>
<code class="emphasize">→[77]   ∆,←⊂'Posn'((8+1⊃+⌿↑n.StopFlag.(Posn Size))0)</code>
<code class="emphasize">→[78]   ∆,←⊂'Attach'('Top' 'Left' 'Bottom' 'Right')</code>
<code class="emphasize">→[79]   ∆,←⊂'Size'((n.Form.Size[1]-20+(1⊃n.StartBtn.Size)+(1⊃n.SB.Size)+1⊃+⌿↑n.StopFlag.(Posn Size))⍬)</code>
<code class="emphasize">→[80]   ∆,←⊂'Event'('KeyPress' '##.OnKeyPress')</code>
<code class="emphasize">→[81]   n.TB←n.Form.⎕NEW'TabControl'∆</code>
<code> [82]  </code>
<code class="emphasize">→[83]   n.TabBtn1←n.TB.⎕NEW'TabButton'(,⊂'Caption' 'Log')</code>
<code class="emphasize">→[84]   n.TabBtn2←n.TB.⎕NEW'TabButton'(,⊂'Caption' 'Details')</code>
<code class="emphasize">→[85]   n.SF1←n.TB.⎕NEW'SubForm'((,⊂'TabObj'n.TabBtn1))</code>
<code class="emphasize">→[86]   n.SF2←n.TB.⎕NEW'SubForm'((,⊂'TabObj'n.TabBtn2))</code>
<code class="emphasize">→[87]   2 ⎕NQ n.TabBtn1'Select'</code>
<code> [88]  </code>
<code class="emphasize">→[89]   ∆←''</code>
<code class="emphasize">→[90]   ∆,←⊂'Coord' 'Prop'</code>
<code class="emphasize">→[91]   ∆,←⊂'Posn'(0 0)</code>
<code class="emphasize">→[92]   ∆,←⊂'Size'(100 100)</code>
<code class="emphasize">→[93]   ∆,←⊂'ReadOnly' 1</code>
<code class="emphasize">→[94]   ∆,←⊂'Style' 'Multi'</code>
<code class="emphasize">→[95]   ∆,←⊂'HScroll' ¯1</code>
<code class="emphasize">→[96]   ∆,←⊂'VScroll' ¯1</code>
<code class="emphasize">→[97]   n.Log←n.SF1.⎕NEW'Edit'∆</code>
<code class="emphasize">→[98]   n.Log.Text←''</code>
<code class="emphasize">→[99]   n.Log.onKeyPress←'OnKeyPress'</code>
<code> [100] </code>
<code class="emphasize">→[101]  ∆←''</code>
<code class="emphasize">→[102]  ∆,←⊂'Coord' 'Prop'</code>
<code class="emphasize">→[103]  ∆,←⊂'Posn'(0 0)</code>
<code class="emphasize">→[104]  ∆,←⊂'Size'(100 100)</code>
<code class="emphasize">→[105]  ∆,←⊂'ColTitles'('' 'Name' 'Comments' 'Result' '')</code>
<code class="emphasize">→[106]  ∆,←⊂'ResizeCols' 1</code>
<code class="emphasize">→[107]  n.Grid←n.SF2.⎕NEW'Grid'∆</code>
<code> [108] </code>
<code class="emphasize">→[109]  n.Grid.Coord←'Pixel'</code>
<code class="emphasize">→[110]  n.Grid.BCol←(255 255 255)(122 255 189)(10 10 10)(3↑255)(3⍴128) ⍝ Default, okay, broken, failed, inactive, not run yet</code>
<code class="emphasize">→[111]  n.Grid.FCol←(0 0 0)(0 0 0)(255 255 0)(255 255 0)(3⍴255) ⍝ Default, okay, broken, failed, inactive</code>
<code class="emphasize">→[112]  n.Grid.Values←2000 5⍴⊂''</code>
<code class="emphasize">→[113]  n.Grid.CellTypes←2000 5⍴6</code>
<code class="emphasize">→[114]  n.Grid.TitleWidth←70</code>
<code class="emphasize">→[115]  width←20 200 0,(2+⌈/2⊃¨n.Grid.GetTextSize¨,ListSymbolicNames)   ⍝ Size of the "RC" column is calculated dynamically</code>
<code class="emphasize">→[116]  n.Grid.CellWidths←width</code>
<code class="emphasize">→[117]  scrollbarSize←35</code>
<code class="emphasize">→[118]  n.Grid.CellWidths[3]←n.Form.Size[2]-scrollbarSize+n.Grid.TitleWidth++/width</code>
<code class="emphasize">→[119]  n.Grid.CurCell←1 4</code>
<code class="emphasize">→[120]  n.Grid.onContextMenu←'OnContextMenuInGrid'</code>
<code class="emphasize">→[121]  n.Grid.onKeyPress←'OnKeyPress'</code>
<code class="emphasize">→[122]  r←n.Form</code>
<code> [123]       ⍝Done</code>
</div>
<code class="header" id="listing_268">#._tatin.aplteam_Tester2_3_7_0.Tester2.OnContextMenuInGrid &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←OnContextMenuInGrid msg</code>
<code> [1]   :Access Public Shared</code>
<code class="emphasize">→[2]   r←0</code>
<code class="emphasize">→[3]   ref←1⊃,msg</code>
<code class="emphasize">→[4]   n2←⎕NS''</code>
<code class="emphasize">→[5]   n2.Menu←⎕NEW⊂'Menu'</code>
<code class="emphasize">→[6]   row←⊃ref.CellFromPoint msg[4 5]</code>
<code class="emphasize">→[7]   name←2⊃ref.Values[row;]</code>
<code class="emphasize">→[8]   caption←' "',name,'"'</code>
<code class="emphasize">→[9]   n2.Edit←n2.Menu.⎕NEW'MenuItem'(⊂('Caption'('Edit',caption)))</code>
<code class="emphasize">→[10]  n2.Copy←n2.Menu.⎕NEW'MenuItem'(⊂('Caption' 'Copy names and comments to ⎕ED'))</code>
<code class="emphasize">→[11]  {⍵.onSelect←1}¨'MenuItem'⎕WN n2.Menu</code>
<code class="emphasize">→[12]  result←⎕DQ n2.Menu</code>
<code class="emphasize">→[13]  :If 0&lt;≢result</code>
<code class="emphasize">→[14]      n←ref.##.##.##.∆n</code>
<code class="emphasize">→[15]      :Select ⊃result</code>
<code class="emphasize">→[16]      :Case n2.Edit</code>
<code class="emphasize">→[17]          _ref.⎕ED'Test_',name</code>
<code class="emphasize">→[18]      :Case n2.Copy</code>
<code class="emphasize">→[19]          buff←¯1↓⊃,/{(A.DTB ⍵),CR}¨↓⎕FMT{((¯3↑¨⍕¨⍳≢⍵),¨⊂'. '),⍵}{⍵⌿⍨(≢¨⍵)∨.≠0 0}n.Grid.Values[;2 3]</code>
<code class="emphasize">→[20]          {{}(#.⎕NS'').(⎕ED⍠('ReadOnly' 1)&amp;{'ed'}ed←⍵)}buff</code>
<code> [21]      :Else</code>
<code class="emphasize">→[22]          ∘∘∘ ⍝ Huh?!</code>
<code> [23]      :EndSelect</code>
<code> [24]  :EndIf</code>
</div>
<code class="header" id="listing_269">#._tatin.aplteam_Tester2_3_7_0.Tester2.OnClose &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←OnClose msg</code>
<code> [1]       ⍝ Callback called in case the user closes the GUI, for example by clicking the "Close" box.\\</code>
<code> [2]       ⍝ Note that this function changes the global `∆n.∆Closed` from 0 to 1.</code>
<code> [3]  :Access Public Shared</code>
<code class="emphasize">→[4]  r←1</code>
<code class="emphasize">→[5]  ref←1⊃,msg</code>
<code class="emphasize">→[6]  ref{6::shy←⍬ ⋄ ⎕NQ ⍺ ⍵}9998</code>
<code class="emphasize">→[7]  :Trap 6 ⋄ ref.∆n.∆Closed←1 ⋄ :EndTrap</code>
<code> [8]       ⍝Done</code>
</div>
<code class="header" id="listing_270">#._tatin.aplteam_Tester2_3_7_0.Tester2.OnKeyPress &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←OnKeyPress msg</code>
<code> [1]   :Access Public Shared</code>
<code class="emphasize">→[2]   r←1</code>
<code class="emphasize">→[3]   :If 1&lt;≢ref←1⊃,msg</code>
<code> [4]           ⍝ For the TabControl we must use the old ('Event' ...) syntax, making it a name rather than a ref fur to bug &lt;01655&gt;</code>
<code class="emphasize">→[5]       →(0=⎕NC'ps')/0</code>
<code class="emphasize">→[6]       ref←ps.ref2Gui.∆n.TB</code>
<code> [7]   :EndIf</code>
<code class="emphasize">→[8]   :If ⍬≢form←{0::⍬ ⋄ 'Form'≡⍵.Type:⍵ ⋄ ∇ ⍵.##}ref</code>
<code class="emphasize">→[9]       key←⊃2↓msg</code>
<code class="emphasize">→[10]      :If 'EP'≡key</code>
<code class="emphasize">→[11]          ⎕NQ form'Close'</code>
<code> [12]      :EndIf</code>
<code> [13]  :EndIf</code>
</div>
<code class="header" id="listing_271">#._tatin.aplteam_Tester2_3_7_0.Tester2.AddToGui &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←row AddToGui msg</code>
<code class="emphasize">→[1]   r←⍬</code>
<code class="emphasize">→[2]   :If ps.guiFlag</code>
<code class="emphasize">→[3]       n←ps.ref2Gui.∆n</code>
<code class="emphasize">→[4]       :If 0=n.∆Closed</code>
<code class="emphasize">→[5]           n.Grid.Values[row;1]←⊃msg</code>
<code class="emphasize">→[6]           cols←1 2 3 4</code>
<code class="emphasize">→[7]           :Select ⊃⊃msg</code>
<code class="emphasize">→[8]           :Case '✓'</code>
<code class="emphasize">→[9]               n.Grid{2 ⎕NQ ⍺'SetCellType'row ⍵ 2}¨cols</code>
<code class="emphasize">→[10]          :CaseList '⍝-'</code>
<code class="emphasize">→[11]              n.Grid{2 ⎕NQ ⍺'SetCellType'row ⍵ 5}¨cols</code>
<code class="emphasize">→[12]          :Case '#'</code>
<code class="emphasize">→[13]              n.Grid{2 ⎕NQ ⍺'SetCellType'row ⍵ 3}¨cols</code>
<code class="emphasize">→[14]          :Case '*'</code>
<code class="emphasize">→[15]              n.Grid{2 ⎕NQ ⍺'SetCellType'row ⍵ 4}¨cols</code>
<code> [16]          :EndSelect</code>
<code class="emphasize">→[17]          n.Grid.CurCell←row 4</code>
<code class="emphasize">→[18]          colHeaderHeight←25</code>
<code class="emphasize">→[19]          noOfLines←⌊n.Grid.Size[1]÷⊃n.Grid.CellHeights</code>
<code class="emphasize">→[20]          :If row=n.Grid.Index[1]+noOfLines-1</code>
<code class="emphasize">→[21]              n.Grid.Index[1]←row-1</code>
<code> [22]          :EndIf</code>
<code> [23]      :EndIf</code>
<code> [24]  :EndIf</code>
</div>
<code class="header" id="listing_272">#._tatin.aplteam_Tester2_3_7_0.Tester2.ProcessGuiEvents &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←ProcessGuiEvents n</code>
<code class="emphasize">→[1]  :Trap 6</code>
<code class="emphasize">→[2]      {6::shy←⍬ ⋄ _←⎕DL 0.3 ⋄ 1:shy←⎕NQ ⍵.Form 9999}&amp;n</code>
<code class="emphasize">→[3]      r←⎕DQ n.Form</code>
<code> [4]  :EndTrap</code>
</div>
<code class="header" id="listing_273">#._tatin.aplteam_Tester2_3_7_0.Tester2.FailsIf &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←FailsIf y</code>
<code> [1]     ⍝ Usage : `→FailsIf x`, whith `x` being a boolean scalar.</code>
<code> [2]  :Access Public Instance</code>
<code class="emphasize">→[3]  r←PassesIf~y                  ⍝ Just PassesIf on negation</code>
</div>
<code class="header" id="listing_274">#._tatin.aplteam_Tester2_3_7_0.Tester2.PassesIf &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←PassesIf y</code>
<code> [1]      ⍝ Usage : `→PassesIf x`, whith `x` being a boolean scalar</code>
<code> [2]   :Access Public Instance</code>
<code class="emphasize">→[3]   r←⍬</code>
<code class="emphasize">→[4]   ⎕EX'∆FAILING_LINE'</code>
<code class="emphasize">→[5]   :If ~y                        ⍝ Passes test, so →PassesIf x just continues</code>
<code class="emphasize">→[6]       :If 2=_ref.⎕NC'stopFlag'  ⍝ Stop not defined, continue with test suite</code>
<code class="emphasize">→[7]       :AndIf ~_ref.stopFlag     ⍝ Do not stop, continue with test suite</code>
<code class="emphasize">→[8]           r←0</code>
<code class="emphasize">→[9]           :If _ref.batchFlag</code>
<code class="emphasize">→[10]              ∆FAILING_LINE←2⊃⎕LC</code>
<code> [11]          :EndIf</code>
<code> [12]      :Else</code>
<code class="emphasize">→[13]          ⎕SIGNAL 999           ⍝ Otherwise stop for investigation</code>
<code> [14]      :EndIf</code>
<code> [15]  :EndIf</code>
</div>
<code class="header" id="listing_275">#._tatin.aplteam_Tester2_3_7_0.Tester2.GoToTidyUp &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{label}GoToTidyUp flag</code>
<code> [1]  ⍝ Returns either an empty vector or `label, which defaults to `∆TidyUp`.\\</code>
<code> [2]  ⍝ Signals 999 when `flag` is 1 and `stopFlag` exists and is 1.</code>
<code> [3]   :Access Public Instance</code>
<code class="emphasize">→[4]   ⎕EX'∆FAILING_LINE'</code>
<code class="emphasize">→[5]   :If 1=flag</code>
<code class="emphasize">→[6]   :AndIf 0&lt;_ref.⎕NC'stopFlag'</code>
<code class="emphasize">→[7]   :AndIf _ref.stopFlag</code>
<code class="emphasize">→[8]       ⎕SIGNAL 999</code>
<code> [9]   :EndIf</code>
<code class="emphasize">→[10]  label←{(0&lt;⎕NC ⍵):⍎⍵ ⋄ r←_ref.⍎'∆TidyUp'}'label'</code>
<code class="emphasize">→[11]  r←flag/label</code>
<code class="emphasize">→[12]  :If _ref.batchFlag</code>
<code class="emphasize">→[13]      ∆FAILING_LINE←2⊃⎕LC</code>
<code> [14]  :EndIf</code>
</div>
<code class="header" id="listing_276">#._tatin.aplteam_Tester2_3_7_0.Tester2.EditTestFunctions &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {list}←EditTestFunctions list</code>
<code> [1]  ⍝ Get all functions into the editor starting their names with `Test_` in case `list` is empty.\\</code>
<code> [2]  ⍝ If `list` is not empty it may be one of:</code>
<code> [3]  ⍝ * A matrix with test function names in the first column; typically the result of `ListTestFunctions`.</code>
<code> [4]  ⍝ * A vector of text vectors specifying names.</code>
<code> [5]  ⍝ * A simple text vector with the name of a single test case.\\</code>
<code> [6]  ⍝ Returns the list of names (vector of text vectors)  as a shy argument.</code>
<code> [7]   :Access Public Instance</code>
<code class="emphasize">→[8]   :If 0=≢list</code>
<code class="emphasize">→[9]       list←'T'_ref.⎕NL 3</code>
<code class="emphasize">→[10]  :ElseIf 2=⍴⍴list</code>
<code class="emphasize">→[11]      :If 2=|≡list</code>
<code class="emphasize">→[12]          list←↑list[;1]</code>
<code> [13]      :Else</code>
<code class="emphasize">→[14]          list←↑{⍵↑⍨+/∧\⍵≠' '}¨{⍵↓⍨+/∧\' '=⍵}¨↓list</code>
<code> [15]      :EndIf</code>
<code class="emphasize">→[16]  :ElseIf 2=|≡list</code>
<code class="emphasize">→[17]      list←⊃list</code>
<code> [18]  :Else</code>
<code class="emphasize">→[19]      :If '*'=¯1↑list</code>
<code class="emphasize">→[20]          name←'Test_'{(⍺/⍨⍺≢(≢⍺)↑⍵),⍵}¯1↓list</code>
<code class="emphasize">→[21]          list←name{⍵⌿⍨((≢⍺)↑[2]⍵)∧.=⍺}'T'_ref.⎕NL 3</code>
<code> [22]      :Else</code>
<code class="emphasize">→[23]          list←,[0.5]list</code>
<code> [24]      :EndIf</code>
<code> [25]  :EndIf</code>
<code class="emphasize">→[26]  :If 0&lt;≢list←' '~⍨¨↓'Test_'{⍵⌿⍨⍺∧.=⍨(≢⍺)↑[1+⎕IO]⍵}list</code>
<code class="emphasize">→[27]      _ref{(0=≢⍵): ⋄ ⍺.⎕ED ⍵}&amp;list</code>
<code> [28]  :EndIf</code>
</div>
<code class="header" id="listing_277">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListTestFunctions &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{x}ListTestFunctions groupName</code>
<code> [1]  ⍝ Returns a matrix with two columns with the names of all test cases in the first column and the</code>
<code> [2]  ⍝ first comment line in the second column.\\</code>
<code> [3]  ⍝ If `groupName` is not empty then it will return only the members of that group (case dependent) or,</code>
<code> [4]  ⍝ if the expression carries a wildcard, all groups matching the given string.\\</code>
<code> [5]  ⍝ `groupName` may or may not start with `Test_`.\\</code>
<code> [6]  ⍝ If the optional left argument (`numbers`)" is defined only those numbers are returned.</code>
<code> [7]   :Access Public Instance</code>
<code class="emphasize">→[8]   x←{(0&lt;⎕NC ⍵):⍎⍵ ⋄ ⍬}'x'</code>
<code class="emphasize">→[9]   :If (≡x)∊0 1</code>
<code class="emphasize">→[10]      :If 0=1↑0⍴x</code>
<code class="emphasize">→[11]          numbers←x</code>
<code class="emphasize">→[12]          view←0</code>
<code> [13]      :Else</code>
<code class="emphasize">→[14]          view←'view'≡⎕C x</code>
<code class="emphasize">→[15]          numbers←⍬</code>
<code> [16]      :EndIf</code>
<code> [17]  :Else</code>
<code class="emphasize">→[18]      Assert 2=≢x</code>
<code class="emphasize">→[19]      (view numbers)←(0=1↑0⍴1⊃x)⌽x</code>
<code class="emphasize">→[20]      view←'view'≡⎕C view</code>
<code> [21]  :EndIf</code>
<code class="emphasize">→[22]  r2←↓'Test_'{⍵⌿⍨((≢⍺)↑[2]⍵)∧.=⍺}'T'_ref.⎕NL 3</code>
<code class="emphasize">→[23]  :If 0≠≢groupName</code>
<code class="emphasize">→[24]      groupName←'Test_'{⍵↓⍨(≢⍺)×⍺≡(≢⍺)↑⍵}groupName</code>
<code class="emphasize">→[25]      groupName←'Test_'{((⍺≢(≢⍺)↑⍵)/⍺),⍵}groupName</code>
<code class="emphasize">→[26]      groupName,←('*'≠¯1↑groupName)/'_'</code>
<code class="emphasize">→[27]      groupName←(-'*'=¯1↑groupName)↓groupName</code>
<code class="emphasize">→[28]      r2/⍨←groupName∘≡¨(≢groupName)↑¨r2,¨' '</code>
<code> [29]  :EndIf</code>
<code class="emphasize">→[30]  :If 0=≢r2</code>
<code class="emphasize">→[31]      r←0 2⍴⊂''</code>
<code> [32]  :Else</code>
<code class="emphasize">→[33]      r2←A.DTB r2</code>
<code class="emphasize">→[34]      :If 0≠≢numbers</code>
<code class="emphasize">→[35]          r2←((({⊃∘⊃∘(//)∘⎕VFI ⍵↑⍨-(-1)+'_'⍳⍨⌽⍵}¨r2))∊numbers)⌿r2</code>
<code> [36]      :EndIf</code>
<code class="emphasize">→[37]      buff←1↓¨_ref GetFirstCommentLine¨r2</code>
<code class="emphasize">→[38]      buff←A.DLB buff</code>
<code class="emphasize">→[39]      r2←r2,[1.5]buff</code>
<code class="emphasize">→[40]      r2←r2[⍋↑⎕C r2[;1];]</code>
<code class="emphasize">→[41]      longestName←⌈/≢¨r2[;1]</code>
<code class="emphasize">→[42]      longestName←⌈/≢¨r2[;1]</code>
<code class="emphasize">→[43]      :If ~view</code>
<code class="emphasize">→[44]      :AndIf 0&lt;≢r2</code>
<code class="emphasize">→[45]      :AndIf ⎕PW&lt;longestName+3+⌈/≢¨r2[;2]</code>
<code class="emphasize">→[46]          max←⎕PW-3+longestName</code>
<code class="emphasize">→[47]          b←max&lt;≢¨r2[;2]</code>
<code class="emphasize">→[48]          (b⌿r2[;2])←((max-4)↑¨b/r2[;2]),¨⊂'...'</code>
<code> [49]      :EndIf</code>
<code class="emphasize">→[50]      r←r2</code>
<code class="emphasize">→[51]      :If view</code>
<code class="emphasize">→[52]          {{}(#.⎕NS'').(⎕ED⍠('ReadOnly' 1)&amp;{'ed'}ed←⍵)}r</code>
<code class="emphasize">→[53]          r←0 0⍴⍬</code>
<code> [54]      :EndIf</code>
<code> [55]  :EndIf</code>
</div>
<code class="header" id="listing_278">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListGroups &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←ListGroups</code>
<code> [1]    ⍝ Returns all groups as a two-column matrix.</code>
<code> [2]    ⍝ The first column carries the group name.</code>
<code> [3]    ⍝ The second column carries the number of test cases within that group.</code>
<code> [4]   :Access Public Instance</code>
<code class="emphasize">→[5]   r←' '~¨⍨↓'Test_'{⍵⌿⍨((≢⍺)↑[2]⍵)∧.=⍺}'T'_ref.⎕NL 3</code>
<code class="emphasize">→[6]   :If 0≠≢r←(2≤'_'+.=⍉↑r)⌿r</code>
<code class="emphasize">→[7]   :AndIf 0≠≢r←{⍺,≢⍵}⌸{⊃{⍺,'_',⍵}/¯1↓'_'A.Split ⍵}¨r</code>
<code class="emphasize">→[8]       r←r[⍋⎕C↑r[;1];]</code>
<code> [9]   :EndIf</code>
</div>
<code class="header" id="listing_279">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListSymbolicNames &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←ListSymbolicNames</code>
<code> [1]    ⍝ Returns a two-column matrix with all symbolic names.</code>
<code> [2]    ⍝ The second column is empty for built-in constants but carries a description for custom ones.</code>
<code> [3]   :Access Public Instance</code>
<code class="emphasize">→[4]   buff1←⍪' '~¨⍨↓'_'⎕NL 2.2</code>
<code class="emphasize">→[5]   buff1←buff1,⊂''</code>
<code class="emphasize">→[6]   buff2←' '~¨⍨↓'_'⎕NL 2.1</code>
<code class="emphasize">→[7]   buff2←'_custom'{⍵/⍨⍺∘≡¨(≢⍺)↑¨⍵}buff2</code>
<code class="emphasize">→[8]   buff3←⍎¨buff2</code>
<code class="emphasize">→[9]   bool←0&lt;+/¨≢¨¨buff3</code>
<code class="emphasize">→[10]  :If 0=≢buff3←bool/buff3</code>
<code class="emphasize">→[11]      r←buff1</code>
<code> [12]  :Else</code>
<code class="emphasize">→[13]      r←buff1⍪(bool/buff2),[1.5]buff3</code>
<code> [14]  :EndIf</code>
</div>
<code class="header" id="listing_280">#._tatin.aplteam_Tester2_3_7_0.Tester2.GetSymbolicName &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←GetSymbolicName constant</code>
<code> [1]     ⍝ Takes a constant and returns it symbolic name.\\</code>
<code> [2]     ⍝ * If the constant is unknown `''` is returned</code>
<code> [3]     ⍝ * If it is a single integer a string is returned</code>
<code> [4]     ⍝ * If `constant` is more than one integer a vector of strings is returned</code>
<code> [5]   :Access Public Instance</code>
<code class="emphasize">→[6]   'Invalid right argument: must be one or more integers'Assert∧/{(0 1 2∊⍨≡⍵)∧83∧.=⎕DR ⍵}¨1(2 3)</code>
<code class="emphasize">→[7]   names←,ListSymbolicNames[;1]</code>
<code class="emphasize">→[8]   values←⍎¨names</code>
<code class="emphasize">→[9]   :If 1&lt;≢constant</code>
<code class="emphasize">→[10]      r←(names,⊂'')[values⍳constant]</code>
<code> [11]  :Else</code>
<code class="emphasize">→[12]      r←(values⍳constant)⊃names,⊂''</code>
<code> [13]  :EndIf</code>
</div>
<code class="header" id="listing_281">#._tatin.aplteam_Tester2_3_7_0.Tester2.AtLeastVersion &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←{currentVersion}AtLeastVersion min</code>
<code> [1]       ⍝ Returns 1 if the currently running version is at least `min`.</code>
<code> [2]       ⍝ If the current version is 17.1 then:</code>
<code> [3]       ⍝ 0 0 1 1 ←→ AtLeastVersion¨16 17 17.1 18</code>
<code> [4]  :Access Public Instance</code>
<code class="emphasize">→[5]  currentVersion←{0&lt;⎕NC ⍵:⍎⍵ ⋄ {⊃⊃(//)⎕VFI ⍵/⍨2&gt;+\⍵='.'}2⊃'#'⎕WG'APLVersion'}'currentVersion'</code>
<code class="emphasize">→[6]  'Right argument must be length 1'Assert 1=≢min</code>
<code> [7] </code>
<code class="emphasize">→[8]  r←min≤currentVersion</code>
</div>
<code class="header" id="listing_282">#._tatin.aplteam_Tester2_3_7_0.Tester2.RenameTestFnsTo &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>   {r}←oldName RenameTestFnsTo newName</code>
<code> [1]        ⍝ Renames a test function or a group of test functions and tells acre and Link.\\</code>
<code> [2]        ⍝ `oldName` and `newName` **must not** contain a dot.\\</code>
<code> [3]        ⍝ Note that names of test functions are supposed to start with "Test_", so if the arguments do not start</code>
<code> [4]        ⍝ with "Test_" the string is added.</code>
<code> [5]        ⍝ Examples:</code>
<code> [6]        ⍝ ```</code>
<code> [7]        ⍝ 'Test_999'   ← 'Test_001' T.RenameTestFnsTo 'Test_999'     ⍝ Rename a single test function without group</code>
<code> [8]        ⍝ 'Test_BBB_2' ← 'Test_1' T.RenameTestFnsTo 'Test_BBB_2'     ⍝ Rename a single test function with group</code>
<code> [9]        ⍝ 'Test_BBB_2' ← 'BBB_1' T.RenameTestFnsTo 'BBB_2'           ⍝ Rename a single test function with group without "Test_"</code>
<code> [10]       ⍝ 'Test_CCC_3' ← 'Test_BBB_2' T.RenameTestFnsTo 'Test_CCC_3' ⍝ Change group and number</code>
<code> [11]       ⍝ 'Test_YYY*'  ← 'Test_AAA; T.RenameTestFnsTo 'Test_YYY'     ⍝ Rename all members of a group with full name</code>
<code> [12]       ⍝ 'Test_YYY*'  ← 'AAA' T.RenameTestFnsTo 'YYY'               ⍝ Rename all members of a group without "Test_"</code>
<code> [13]       ⍝ 'Test_VVV*'  ← '' T.RenameTestFnsTo 'Test_VVV'             ⍝ all NOT belonging to a group are renamed</code>
<code> [14]       ⍝ ```</code>
<code> [15]       ⍝ `r ← ⍬`</code>
<code> [16]   :Access Public Instance</code>
<code class="emphasize">→[17]   r←⍬</code>
<code class="emphasize">→[18]   (oldName newName)←oldName newName~¨' '</code>
<code class="emphasize">→[19]   'Names must not contain dots'Assert~↑∨/'.'∊¨oldName newName</code>
<code class="emphasize">→[20]   (oldName newName)←'Test_'∘{⍺≡(≢⍺)↑⍵:⍵ ⋄ ⍺,⍵}¨oldName newName</code>
<code class="emphasize">→[21]   :If 0=≢buff←ListGroups</code>
<code class="emphasize">→[22]       f1←0</code>
<code class="emphasize">→[23]       f2←0=≢Remove∆Test_ oldName</code>
<code> [24]   :Else</code>
<code class="emphasize">→[25]       f1←(⊂Remove∆Test_ oldName)∊(≢'Test_')↓¨{⍵[;1]}buff     ⍝ Group name?</code>
<code class="emphasize">→[26]       f2←0=≢Remove∆Test_ oldName</code>
<code> [27]   :EndIf</code>
<code class="emphasize">→[28]   :If f1</code>
<code class="emphasize">→[29]       'New name is invalid'Assert ¯1≠⎕NC Remove∆Test_ newName</code>
<code> [30]   :EndIf</code>
<code class="emphasize">→[31]   :If f1∨f2</code>
<code class="emphasize">→[32]       list←{⍵[;1]}ListTestFunctions Remove∆Test_ oldName</code>
<code class="emphasize">→[33]       :If f2</code>
<code class="emphasize">→[34]           list←((⊃∘Remove∆Test_¨list)∊⎕D)/list</code>
<code> [35]       :EndIf</code>
<code class="emphasize">→[36]       :For this :In list</code>
<code class="emphasize">→[37]           no←{⍵↑⍨-¯1+(⌽⍵)⍳'_'}this</code>
<code class="emphasize">→[38]           :If 0&lt;_ref.⎕NC'Test_',(Remove∆Test_ newName),'_',no  ⍝ Already occupied?</code>
<code class="emphasize">→[39]               val←⊃(//)⎕VFI no</code>
<code> [40]                    ⍝ We need to establish the next free number:</code>
<code class="emphasize">→[41]               no←(-≢no)↑((≢no)⍴'0'),' '~⍨⍕1+⌈/{⊃(//)⎕VFI ⍵↑⍨-¯1+(⌽⍵)⍳'_'}¨↓_ref.{l←'T'⎕NL 3 ⋄ l⌿⍨((≢⍵)↑[2]l)∧.=⍵}newName,'_'</code>
<code> [42]           :EndIf</code>
<code class="emphasize">→[43]           this RenameTestFnsTo'Test_',(Remove∆Test_ newName),'_',no</code>
<code> [44]       :EndFor</code>
<code class="emphasize">→[45]       →∆Go</code>
<code> [46]   :Else</code>
<code class="emphasize">→[47]       'Function to be renamed not found'Assert 3=_ref.⎕NC oldName</code>
<code class="emphasize">→[48]       'New name is already used'Assert 0≥_ref.⎕NC newName</code>
<code class="emphasize">→[49]       'New name is invalid'Assert ¯1≠_ref.⎕NC newName</code>
<code> [50]   :EndIf</code>
<code class="emphasize">→[51]   body←_ref.⎕NR oldName</code>
<code class="emphasize">→[52]   header←⎕IO⊃body</code>
<code class="emphasize">→[53]   (header comment)←header{⎕IO←0 ⋄ ⍺{(⍵↑⍺)(⍵↓⍺)}⍵⍳'⍝'}header</code>
<code class="emphasize">→[54]   :If (_ref.⎕NC⊂oldName)∊3.2   ⍝ Dfns</code>
<code class="emphasize">→[55]       :If 1=≢body</code>
<code class="emphasize">→[56]           (oldName body)←{⎕IO←0 ⋄ ⍵{(⍵↑⍺)(⍵↓⍺)}⍵⍳'←'}⎕IO⊃body</code>
<code class="emphasize">→[57]           body←,⊂newName,body</code>
<code class="emphasize">→[58]           oldName~←' '</code>
<code> [59]       :Else</code>
<code class="emphasize">→[60]           (⎕IO⊃body)←newName,'←{'</code>
<code> [61]       :EndIf</code>
<code> [62]   :Else</code>
<code class="emphasize">→[63]       (res header)←header{⎕IO←0 ⋄ ⍺{~'←'∊⍺:''⍺ ⋄ ((1+⍵)↑⍺)((1+⍵)↓⍺)}⍵⍳'←'}header</code>
<code class="emphasize">→[64]       :If '('∊header</code>
<code class="emphasize">→[65]           (header right)←header{⎕IO←0 ⋄ ⍺{(⍵↑⍺)(⍵↓⍺)}⍵⍳'('}header</code>
<code class="emphasize">→[66]           header←{⎕ML←3 ⋄ ⍵⊂⍨' '≠⍵}header</code>
<code class="emphasize">→[67]           :Select ⍬⍴⍴header</code>
<code class="emphasize">→[68]           :Case 1       ⍝ Monadic fns</code>
<code class="emphasize">→[69]               name←header</code>
<code class="emphasize">→[70]               left←''</code>
<code class="emphasize">→[71]           :Case 2        ⍝ Dyadic fns</code>
<code class="emphasize">→[72]               (left name)←header</code>
<code> [73]           :Else</code>
<code class="emphasize">→[74]               .          ⍝ ?!</code>
<code> [75]           :EndSelect</code>
<code> [76]       :Else</code>
<code class="emphasize">→[77]           header←{⎕ML←3 ⋄ ⍵⊂⍨' '≠⍵}header</code>
<code class="emphasize">→[78]           :Select ⍬⍴⍴header</code>
<code class="emphasize">→[79]           :Case 1        ⍝ Niladic fns</code>
<code class="emphasize">→[80]               name←header</code>
<code class="emphasize">→[81]               left←right←''</code>
<code class="emphasize">→[82]           :Case 2        ⍝ Monadic fns</code>
<code class="emphasize">→[83]               (name right)←header</code>
<code class="emphasize">→[84]               left←''</code>
<code class="emphasize">→[85]           :Case 3        ⍝ Dyadic fns</code>
<code class="emphasize">→[86]               (name right left)←header</code>
<code> [87]           :Else</code>
<code class="emphasize">→[88]               .          ⍝ ?!</code>
<code> [89]           :EndSelect</code>
<code> [90]       :EndIf</code>
<code class="emphasize">→[91]       name←newName</code>
<code class="emphasize">→[92]       (⎕IO⊃body)←res,left,' ',name,' ',right,comment</code>
<code> [93]   :EndIf</code>
<code class="emphasize">→[94]   :If ' '≠1↑0⍴rc←_ref.⎕FX↑body</code>
<code class="emphasize">→[95]       . ⍝ something went wrong</code>
<code> [96]   :EndIf</code>
<code class="emphasize">→[97]   NotifyAcreAndLinkAndDeleteOldVersion oldName newName</code>
<code> [98]  </code>
<code class="emphasize">→[99]  ∆Go:</code>
<code class="emphasize">→[100]  _ref.⎕EX oldName</code>
<code class="emphasize">→[101]  :If (⊃⎕SI)≢⊃1↓⎕SI</code>
<code class="emphasize">→[102]      r←'***Done'</code>
<code> [103]  :EndIf</code>
</div>
<code class="header" id="listing_283">#._tatin.aplteam_Tester2_3_7_0.Tester2.GetTestTemplate &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←{groupName}GetTestTemplate no</code>
<code> [1]   :Access Public Instance</code>
<code> [2]        ⍝ Injects the code (body) of the test template function into the namespace hosting the test cases if that is an</code>
<code> [3]        ⍝ ordinary namespace. If it is a scripted one the user will be prompted for copying the body to the clipboard.</code>
<code> [4]        ⍝ The user can then inject that code herself into the scripted namespace/class.</code>
<code class="emphasize">→[5]   r←⍬</code>
<code class="emphasize">→[6]   groupName←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ''}'groupName'</code>
<code class="emphasize">→[7]   'Invalid right argumet: must be an integer between 1 and 999'Assert(⊂no)∊(⍳999)</code>
<code class="emphasize">→[8]   'Invalid left argumet: must be a char vector'Assert((≡groupName)∊0 1)∧' '≡⊃0⍴groupName</code>
<code class="emphasize">→[9]   body←A.DTB↓180⌶'Test_000'</code>
<code class="emphasize">→[10]  :If 0=≢groupName</code>
<code class="emphasize">→[11]      newName←'Test_',(¯3↑'000',⍕no)</code>
<code class="emphasize">→[12]      (1⊃body)←'←Test_000\('⎕R('←',newName,'(')⍠('Greedy' 0)⊣1⊃body</code>
<code> [13]  :Else</code>
<code class="emphasize">→[14]      newName←'Test_',groupName,'_',(¯3↑'000',⍕no)</code>
<code class="emphasize">→[15]      (1⊃body)←'←Test_000\('⎕R('←',newName,'(')⍠('Greedy' 0)⊣1⊃body</code>
<code> [16]  :EndIf</code>
<code class="emphasize">→[17]  :If 0&lt;_ref.⎕NC newName</code>
<code class="emphasize">→[18]      :If 3=_ref.⎕NC newName</code>
<code class="emphasize">→[19]          :If 0=1 YesOrNo'Function &lt;',newName,'&gt; already exists! Overwrite?'</code>
<code class="emphasize">→[20]              :Return</code>
<code> [21]          :EndIf</code>
<code> [22]      :Else</code>
<code class="emphasize">→[23]          11 ⎕SIGNAL⍨'The name &lt;'.newName,'&gt; is already taken!'</code>
<code> [24]      :EndIf</code>
<code> [25]  :EndIf</code>
<code class="emphasize">→[26]  :If {16::0 ⋄ 1⊣⎕SRC ⍵}_ref</code>
<code class="emphasize">→[27]      :If 1 YesOrNo'Cannot fix function in  a script; shall the body be copied to the clipboard?'</code>
<code class="emphasize">→[28]          'cl'⎕WC'Clipboard'</code>
<code class="emphasize">→[29]          cl.Text←2↓⊃,/(⊂CRLF),¨body</code>
<code> [30]      :Else</code>
<code class="emphasize">→[31]          ⎕←'No action taken'</code>
<code> [32]      :EndIf</code>
<code> [33]  :Else</code>
<code class="emphasize">→[34]      _ref.⎕FX body</code>
<code> [35]  :EndIf</code>
</div>
<code class="header" id="listing_284">#._tatin.aplteam_Tester2_3_7_0.Tester2.EstablishHelpers &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←{force}EstablishHelpers ref</code>
<code> [1]      ⍝ Establishes the three helpers `Prepare`, `RunTests` and `RunBatchTests` in `ref`.\\</code>
<code> [2]      ⍝ The user is asked for confirmation, but you can prevent that (and enforce the operation) by passing</code>
<code> [3]      ⍝ a 1 as the left argument `force`.\\</code>
<code> [4]      ⍝ Returns an empty vector if force is ` or the user has not confirmed the operation, otherwise a message.</code>
<code> [5]   :Access Public Shared</code>
<code class="emphasize">→[6]   r←''</code>
<code class="emphasize">→[7]   force←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'force'</code>
<code class="emphasize">→[8]   :If (⊂ref)∊''⍬</code>
<code class="emphasize">→[9]       ref←⊃⎕RSI</code>
<code> [10]  :EndIf</code>
<code class="emphasize">→[11]  'Cannot establish helpers in class instances/unnamed namespaces'Assert~'['∊⍕ref</code>
<code class="emphasize">→[12]  :If force</code>
<code class="emphasize">→[13]  :OrIf YesOrNo'Helpers@Sure you wanna establish three helpers "Prepare", "RunTests" &amp; "RunTestsInBatchMode" in ',(⍕ref),' ?'</code>
<code class="emphasize">→[14]      res←ref.⎕FX ⎕CR'Prepare'</code>
<code class="emphasize">→[15]      ('Fixing helper "Prepare" in ',(⍕ref),' failed on line(s) ',⍕res)Assert' '=1↑0⍴res</code>
<code class="emphasize">→[16]      res←ref.⎕FX ⎕CR'RunTests'</code>
<code class="emphasize">→[17]      ('Fixing helper "RunTests" in ',(⍕ref),' failed on line(s) ',⍕res)Assert' '=1↑0⍴res</code>
<code class="emphasize">→[18]      res←ref.⎕FX ⎕CR'RunTestsInBatchMode'</code>
<code class="emphasize">→[19]      ('Fixing helper "RunBatchTests" in ',(⍕ref),' failed on line(s) ',⍕res)Assert' '=1↑0⍴res</code>
<code class="emphasize">→[20]      r←(~force)/'"Prepare", "RunTests" &amp; "RunTestsInBatchMode" successfully established in ',⍕ref</code>
<code class="emphasize">→[21]      r,←CR,'⍝ You might want to inform Link:'</code>
<code class="emphasize">→[22]      r,←CR,'⍝ ⎕SE.Link.Add ',⊃,/('''','.',⍨⍕ref)∘,¨'Prepare'' ' 'RunTests'' ' 'RunTestsInBatchMode'' '</code>
<code> [23]  :EndIf</code>
</div>
<code class="header" id="listing_285">#._tatin.aplteam_Tester2_3_7_0.Tester2.Test_000 &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_000(stopFlag batchFlag)</code>
<code> [1]  ⍝ Model for a test function.</code>
<code> [2]  ⍝ *** Watch out: assumes that the instance of Tester2 is called "T".</code>
<code class="emphasize">→[3]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code class="emphasize">→[4]   R←T._Failed</code>
<code> [5]  </code>
<code> [6]  ⍝ Establish preconditions...</code>
<code> [7]  </code>
<code class="emphasize">→[8]   →T.PassesIf 1≡1</code>
<code class="emphasize">→[9]   →T.FailsIf 1≢1</code>
<code class="emphasize">→[10]  →T.GoToTidyUp 1≢1</code>
<code> [11] </code>
<code class="emphasize">→[12]  R←T._OK</code>
<code> [13] </code>
<code class="emphasize">→[14] ∆TidyUp: ⍝ Clean up after this label</code>
<code> [15]   ⍝ ...</code>
</div>
<code class="header" id="listing_286">#._tatin.aplteam_Tester2_3_7_0.Tester2.CheckCustomDef &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←i CheckCustomDef msg</code>
<code class="emphasize">→[1]   r←''⍬</code>
<code class="emphasize">→[2]   :If ~(1=≡msg)∧(1=⍴⍴msg)∧' '=1↑0⍴∊msg</code>
<code class="emphasize">→[3]       r←'Must be a simple text vector' 11</code>
<code> [4]   :Else</code>
<code class="emphasize">→[5]       list←' '~¨⍨↓'_custom_'{⍵⌿⍨((≢⍺)↑[2]⍵)∧.=⍺}'_'⎕NL 2</code>
<code class="emphasize">→[6]       list←↓'_custom_'{⍵⌿⍨((≢⍺)↑[2]⍵)∧.=⍺}↑list</code>
<code class="emphasize">→[7]       list←(i≠∊(//)∘⎕VFI¨¯1↑¨list)/list     ⍝ Exclude itself</code>
<code class="emphasize">→[8]       :If (⊂msg)∊⍎¨list</code>
<code class="emphasize">→[9]           r←'Message is already defined' 11</code>
<code> [10]      :EndIf</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_287">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListCustomMessages &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ListCustomMessages</code>
<code class="emphasize">→[1]  r←{⍵⌿⍨0&lt;≢¨⍵[;2]}ListSymbolicNames</code>
</div>
<code class="header" id="listing_288">#._tatin.aplteam_Tester2_3_7_0.Tester2.ListCustomNumbers &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ListCustomNumbers</code>
<code class="emphasize">→[1]  r←({⍵⌿⍨0&lt;≢¨⍵[;2]}ListSymbolicNames)[;1]</code>
<code class="emphasize">→[2]  r←-{⊃⊃(//)⎕VFI ¯1↑⍵}¨r</code>
</div>
<code class="header" id="listing_289">#._tatin.aplteam_Tester2_3_7_0.Tester2.ReportInactiveToGUI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←constant ReportInactiveToGUI(row ref testFns n)</code>
<code> [1]      ⍝ Tries to find `constant` in the code of the test function (text and comments are ignored).</code>
<code> [2]      ⍝ It then looks for a comment after the assignment. That comment, if there is any, will be</code>
<code> [3]      ⍝ shown in the GUI's "Result` column.</code>
<code> [4]      ⍝ `constant` is something like "_Inactive".</code>
<code class="emphasize">→[5]   r←⍬</code>
<code class="emphasize">→[6]   body←ref.⎕NR testFns</code>
<code class="emphasize">→[7]   :If 0&lt;≢body←(∨/¨('.',constant)∘⍷¨body)/body</code>
<code class="emphasize">→[8]       body←'''[^'']+'''⎕R''⊣body</code>
<code class="emphasize">→[9]       body2←({~∨\'⍝'=⍵}¨body)/¨body</code>
<code class="emphasize">→[10]      body←(∨/¨('.',constant)∘⍷¨body2)/body</code>
<code class="emphasize">→[11]  :AndIf 1=≢body</code>
<code class="emphasize">→[12]      body←1⊃body</code>
<code class="emphasize">→[13]  :AndIf '⍝'∊body</code>
<code class="emphasize">→[14]      n.Grid.Values[row;4]←⊂(1↓constant),':',{⍵↓⍨⍵⍳'⍝'}body</code>
<code class="emphasize">→[15]      2 ⎕NQ n.Grid'SetColSize' 4 ¯3</code>
<code> [16]  :EndIf</code>
</div>
<code class="header" id="listing_290">#._tatin.aplteam_Tester2_3_7_0.Tester2.NotifyAcreAndLinkAndDeleteOldVersion &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←NotifyAcreAndLinkAndDeleteOldVersion(oldName newName)</code>
<code class="emphasize">→[1]   r←⍬</code>
<code class="emphasize">→[2]   :If 0&lt;⎕SE.⎕NC'acre'</code>
<code class="emphasize">→[3]       :Trap 22</code>
<code class="emphasize">→[4]           rc←⎕SE.acre.SetChanged newName</code>
<code> [5]       :Else</code>
<code class="emphasize">→[6]           ∘∘∘ ⍝ Huh?! What's up?</code>
<code> [7]       :EndTrap</code>
<code class="emphasize">→[8]       :If 0&lt;≢rc</code>
<code class="emphasize">→[9]           ⎕SE.acre.Erase oldName</code>
<code class="emphasize">→[10]          :Return</code>
<code> [11]      :EndIf</code>
<code> [12]  :EndIf</code>
<code class="emphasize">→[13]  :If 3≤{⊃(//)⎕VFI ⍵↑⍨¯1+⍵⍳'.'}⎕SE.Link.Version</code>
<code class="emphasize">→[14]      rc←⎕SE.Link.Add(⍕_ref),'.',newName</code>
<code class="emphasize">→[15]      →('Not in a linked namespace: '{⍺≡(≢⍺)↑⍵}rc)/0</code>
<code class="emphasize">→[16]      :If 'Added: '{⍺≡(≢⍺)↑⍵}rc</code>
<code class="emphasize">→[17]          rc←⎕SE.Link.Expunge(⍕_ref),'.',oldName</code>
<code class="emphasize">→[18]          :If ~rc</code>
<code class="emphasize">→[19]              ∘∘∘ ⍝ Huh?! What's up?</code>
<code> [20]          :EndIf</code>
<code> [21]      :EndIf</code>
<code> [22]  :Else</code>
<code class="emphasize">→[23]      ⎕←'Incompatible version of Link detected; we need 3.0.0 or better'</code>
<code> [24]  :EndIf</code>
</div>
<code class="header" id="listing_291">#._tatin.aplteam_Tester2_3_7_0.Tester2.HandleInitialize &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {(continueFlag i noOf)}←{force}HandleInitialize(ref ps currentGroup i noOf)</code>
<code class="emphasize">→[1]   force←{0&lt;⎕NC ⍵:⍎⍵ ⋄ 0}'force'</code>
<code class="emphasize">→[2]   continueFlag←0</code>
<code class="emphasize">→[3]   currentGroup←Remove∆Test_ currentGroup</code>
<code class="emphasize">→[4]   :If 0&lt;≢currentGroup</code>
<code class="emphasize">→[5]   :AndIf force∨currentGroup≢⊃⌽ps.processedGroups</code>
<code class="emphasize">→[6]       ps.processedGroups,←⊂currentGroup</code>
<code class="emphasize">→[7]       :If 3=ref.⎕NC'Initial_',currentGroup</code>
<code class="emphasize">→[8]           at←1⊃ref.⎕AT'Initial_',currentGroup</code>
<code class="emphasize">→[9]           :If 2⊃⌽(8⍴2)⊤ps.stopFlag</code>
<code class="emphasize">→[10]              (∪(⎕STOP 1⊃⎕SI),∆stop1,∆stop2,∆stop3)⎕STOP 1⊃⎕SI</code>
<code> [11]          :Else</code>
<code class="emphasize">→[12]              ((⎕STOP 1⊃⎕SI)~,∆stop1,∆stop2,∆stop3)⎕STOP 1⊃⎕SI</code>
<code> [13]          :EndIf</code>
<code class="emphasize">→[14]          :If (2⊃at)∊1 ¯2           ⍝ Accepts a right argument (monadic=1, ambivalent=¯2)?</code>
<code class="emphasize">→[15] ∆stop1:      result←ps ref.{⍎⍵,' ⍺'}'Initial_',currentGroup</code>
<code class="emphasize">→[16]          :ElseIf |1⊃at</code>
<code class="emphasize">→[17] ∆stop2:      result←ps ref.{⍎⍵}'Initial_',currentGroup</code>
<code> [18]          :Else</code>
<code class="emphasize">→[19] ∆stop3:      ref⍎'Initial_',currentGroup</code>
<code class="emphasize">→[20]              result←1</code>
<code> [21]          :EndIf</code>
<code class="emphasize">→[22]          :If ~(⊂result)∊⍬ 1</code>
<code class="emphasize">→[23]          :AndIf ''≢result</code>
<code class="emphasize">→[24]              buff←¯1↑ps.log</code>
<code class="emphasize">→[25]              ps.log←¯1↓ps.log</code>
<code class="emphasize">→[26]              :If ' '=1↑0⍴∊result</code>
<code class="emphasize">→[27]                  ShowLog'Function "Initial_',currentGroup,'" found and executed, but it returned an error message:',CR,result</code>
<code> [28]              :Else</code>
<code class="emphasize">→[29]                  ShowLog'Function "Initial_',currentGroup,'" found and executed but did not return a 1'</code>
<code> [30]              :EndIf</code>
<code class="emphasize">→[31]              noOf←+/∨/('_',currentGroup,'_')⍷↑(i-1)↓ps.list</code>
<code class="emphasize">→[32]              ShowLog'Therefore ',(⍕noOf),' member',((1&lt;noOf)/'s'),' of the group "',currentGroup,'" will not be executed'</code>
<code class="emphasize">→[33]              :If ps.guiFlag</code>
<code class="emphasize">→[34]                  ps.ref2Gui.∆n.Grid.Values[(i-1)+⍳noOf;4]←⊂'Prevented by Initial_',currentGroup</code>
<code> [35]              :EndIf</code>
<code class="emphasize">→[36]              ps.log,←buff</code>
<code class="emphasize">→[37]              i+←noOf-1</code>
<code class="emphasize">→[38]              continueFlag←1</code>
<code> [39]          :Else</code>
<code class="emphasize">→[40]              buff←¯1↑ps.log</code>
<code class="emphasize">→[41]              ps.log←¯1↓ps.log</code>
<code class="emphasize">→[42]              ShowLog'Function "Initial_',currentGroup,'" found and successfully executed'</code>
<code class="emphasize">→[43]              ps.log,←buff</code>
<code> [44]          :EndIf</code>
<code> [45]      :EndIf</code>
<code> [46]  :EndIf</code>
</div>
<code class="header" id="listing_292">#._tatin.aplteam_Tester2_3_7_0.Tester2.HandleCleanup &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  {r}←HandleCleanup(ref ps currentGroup i)</code>
<code class="emphasize">→[1]   r←0</code>
<code class="emphasize">→[2]   currentGroup←Remove∆Test_ currentGroup</code>
<code class="emphasize">→[3]   :If i=≢ps.list                                                            ⍝ Last one?</code>
<code class="emphasize">→[4]   :OrIf currentGroup{0=≢⍺:0 ⋄ ⍺≢Remove∆Test_ GetGroupName(i+1)⊃⍵}ps.list    ⍝ Group change?!</code>
<code class="emphasize">→[5]       :If 3=ref.⎕NC'Cleanup_',currentGroup</code>
<code class="emphasize">→[6]           :If 3⊃⌽(8⍴2)⊤ps.stopFlag</code>
<code class="emphasize">→[7]               (∪(⎕STOP 1⊃⎕SI),∆stop10,∆stop11)⎕STOP 1⊃⎕SI</code>
<code> [8]           :Else</code>
<code class="emphasize">→[9]               ((⎕STOP 1⊃⎕SI)~,∆stop10,∆stop11)⎕STOP 1⊃⎕SI</code>
<code> [10]          :EndIf</code>
<code class="emphasize">→[11]          at←1⊃ref.⎕AT'Cleanup_',currentGroup</code>
<code class="emphasize">→[12]          :If (2⊃at)∊1 ¯2                                                   ⍝ Accepts a right argument (1=monadic, ¯2=ambivalent)?</code>
<code class="emphasize">→[13] ∆stop10:     ps ref.{6::1 ⋄ ⍎⍵,' ⍺'}'Cleanup_',currentGroup</code>
<code> [14]          :Else</code>
<code class="emphasize">→[15] ∆stop11:     ref.⍎'Cleanup_',currentGroup</code>
<code> [16]          :EndIf</code>
<code> [17]      :EndIf</code>
<code> [18]  :EndIf</code>
</div>
<code class="header" id="listing_293">#._tatin.aplteam_Tester2_3_7_0.Tester2.YesOrNo &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←{x}YesOrNo y</code>
<code class="emphasize">→[1]  :If 0=⎕NC'x'</code>
<code class="emphasize">→[2]      r←##.CommTools.YesOrNo y</code>
<code> [3]  :Else</code>
<code class="emphasize">→[4]      r←x ##.CommTools.YesOrNo y</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_294">#._tatin.aplteam_Tester2_3_7_0.Tester2.ReportLineNumber &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ReportLineNumber</code>
<code class="emphasize">→[1]  r←''</code>
<code class="emphasize">→[2]  :If 0&lt;⎕NC'∆FAILING_LINE'</code>
<code class="emphasize">→[3]      r←' [',(⍕∆FAILING_LINE),']'</code>
<code> [4]  :EndIf</code>
</div>
<code class="header" id="listing_295">#._tatin.aplteam_Tester2_3_7_0.Tester2.CR &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←CR</code>
<code class="emphasize">→[1]  r←⎕UCS 13</code>
</div>
<code class="header" id="listing_296">#._tatin.aplteam_Tester2_3_7_0.Tester2.CRLF &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←CRLF</code>
<code class="emphasize">→[1]  r←⎕UCS 13 10</code>
</div>
<code class="header" id="listing_297">#._tatin.aplteam_Tester2_3_7_0.Tester2.Prepare &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  Prepare</code>
<code> [1]  ⍝ Creates an instance of the class `Tester2` named `T` and configures it for</code>
<code> [2]  ⍝ Assumes that the project is handled by the project manager "Cider", and that there is</code>
<code> [3]  ⍝ a namespace ##.CiderConfig available with the Cider config parameters.</code>
<code> [4]  ⍝ As a side effect is creates a folder "TestResults" in the project's root folder if the</code>
<code> [5]  ⍝ user wants to do code coverage with the `CodeCoverage` class.</code>
<code class="emphasize">→[6]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[7]   T←⎕NEW Tester2 ⎕THIS</code>
<code class="emphasize">→[8]   testPath←##.CiderConfig.HOME,'/TestResults'</code>
<code class="emphasize">→[9]   testFilename←testPath,'/CodeCoverage'</code>
<code class="emphasize">→[10]  flag←0</code>
<code class="emphasize">→[11]  :If ⎕NEXISTS testPath</code>
<code class="emphasize">→[12]      :If ⎕NEXISTS testFilename,'.profile'</code>
<code class="emphasize">→[13]          ind←('Code Coverage' 0 1)CommTools.Select'Append' 'Replace' 'Neither'</code>
<code class="emphasize">→[14]          →(3=ind)/0</code>
<code class="emphasize">→[15]          flag←1</code>
<code class="emphasize">→[16]          :If 2=ind</code>
<code class="emphasize">→[17]              1 CodeCoverage.DeleteFiles testFilename</code>
<code> [18]          :EndIf</code>
<code> [19]      :Else</code>
<code class="emphasize">→[20]          flag←0 CommTools.YesOrNo'Code coverage?'</code>
<code> [21]      :EndIf</code>
<code> [22]  :Else</code>
<code class="emphasize">→[23]      flag←0 CommTools.YesOrNo'Code coverage?'</code>
<code> [24]  :EndIf</code>
<code class="emphasize">→[25]  :If flag</code>
<code class="emphasize">→[26]      3 ⎕MKDIR testPath  ⍝</code>
<code class="emphasize">→[27]      T.codeCoverage←⎕NEW CodeCoverage(,⊂'#.',{⍵,'.',⍵}2↓⍕⎕THIS.##)</code>
<code class="emphasize">→[28]      T.codeCoverage.filename←testFilename</code>
<code> [29]  :EndIf</code>
</div>
<code class="header" id="listing_298">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunTests &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  RunTests</code>
<code> [1]  ⍝ 1. Prepares the test framework</code>
<code> [2]  ⍝ 2. Runs all test cases</code>
<code> [3]  ⍝ 3. Processes the code coverage data (if collected)</code>
<code> [4]  ⍝ 4. Asks the user whether the code coverage report should be put on view</code>
<code class="emphasize">→[5]   Prepare</code>
<code class="emphasize">→[6]   T.Run 1</code>
<code class="emphasize">→[7]   :If 0&lt;≢T.codeCoverage</code>
<code class="emphasize">→[8]       {}CodeCoverage.ProcessData T.codeCoverage.filename</code>
<code class="emphasize">→[9]       option←'Type of code coverage report' 0 1 CommTools.Select'Overview' 'Verbose' 'None'</code>
<code class="emphasize">→[10]      :If 3&gt;option</code>
<code class="emphasize">→[11]          verbose←2=option</code>
<code class="emphasize">→[12]          htmlFilename←verbose CodeCoverage.CreateReport T.codeCoverage.filename</code>
<code class="emphasize">→[13]          ⎕←']Open file://',htmlFilename</code>
<code> [14]      :EndIf</code>
<code> [15]  :EndIf</code>
</div>
<code class="header" id="listing_299">#._tatin.aplteam_Tester2_3_7_0.Tester2.RunTestsInBatchMode &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> (success log)←RunTestsInBatchMode</code>
<code> [1] ⍝ Runs all test with the batch flag on and the debug flag off.</code>
<code> [2] ⍝ Returns a two-item vector:\\</code>
<code> [3] ⍝ [1] Boolean with 1 indicating success and 0 failure\\</code>
<code> [4] ⍝ [2] A vector of character vectors with the messages</code>
<code class="emphasize">→[5]  Prepare</code>
<code class="emphasize">→[6]  (rc log)←T.RunBatchTests 0</code>
<code class="emphasize">→[7]  success←rc=0</code>
</div>
<code class="header" id="listing_300">#._tatin.aplteam_Tester2_3_7_0.TatinVars.ASSETS &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ASSETS</code>
<code class="emphasize">→[1]  r←'html/'</code>
</div>
<code class="header" id="listing_301">#._tatin.aplteam_Tester2_3_7_0.TatinVars.CONFIG &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←CONFIG</code>
<code class="emphasize">→[1]   r←'{</code>
<code class="emphasize">→[2]    api: "Tester2",</code>
<code class="emphasize">→[3]    assets: "html/",</code>
<code class="emphasize">→[4]    date: 20240303.0801,</code>
<code class="emphasize">→[5]    description: "Dyalog APL test framework",</code>
<code class="emphasize">→[6]    documentation: "",</code>
<code class="emphasize">→[7]    files: "",</code>
<code class="emphasize">→[8]    group: "aplteam",</code>
<code class="emphasize">→[9]    io: 1,</code>
<code class="emphasize">→[10]   license: "MIT",</code>
<code class="emphasize">→[11]   lx: "",</code>
<code class="emphasize">→[12]   maintainer: "kai@aplteam.com",</code>
<code class="emphasize">→[13]   minimumAplVersion: "18.0",</code>
<code class="emphasize">→[14]   ml: 1,</code>
<code class="emphasize">→[15]   name: "Tester2",</code>
<code class="emphasize">→[16]   os_lin: 1,</code>
<code class="emphasize">→[17]   os_mac: 1,</code>
<code class="emphasize">→[18]   os_win: 1,</code>
<code class="emphasize">→[19]   project_url: "https://github.com/aplteam/Tester2",</code>
<code class="emphasize">→[20]   source: "APLSource/Tester2.aplc",</code>
<code class="emphasize">→[21]   tags: "test,test-framework",</code>
<code class="emphasize">→[22]   uri: "https://tatin.dev/",</code>
<code class="emphasize">→[23]   userCommandScript: "",</code>
<code class="emphasize">→[24]   version: "3.7.0+34",</code>
<code> [25] }'</code>
</div>
<code class="header" id="listing_302">#._tatin.aplteam_Tester2_3_7_0.TatinVars.DEPENDENCIES &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←DEPENDENCIES</code>
<code class="emphasize">→[1]  r←,⊆'aplteam-APLTreeUtils2-1.3.1' 'aplteam-IniFiles-5.0.3' 'aplteam-CommTools-1.7.1'</code>
</div>
<code class="header" id="listing_303">#._tatin.aplteam_Tester2_3_7_0.TatinVars.GetFullPath2AssetsFolder &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←GetFullPath2AssetsFolder</code>
<code class="emphasize">→[1]  :If 0&lt;≢r←ASSETS</code>
<code class="emphasize">→[2]  :AndIf 0&lt;≢HOME</code>
<code class="emphasize">→[3]  :AndIf ⎕NEXISTS HOME</code>
<code class="emphasize">→[4]      r←HOME,'/',ASSETS</code>
<code> [5]  :EndIf</code>
</div>
<code class="header" id="listing_304">#._tatin.aplteam_Tester2_3_7_0.TatinVars.HOME &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  r←HOME</code>
<code> [1]  ⍝ Returns folder package was loaded from or current directory or an empty vector if both are not valid</code>
<code class="emphasize">→[2]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code class="emphasize">→[3]   r←'C:/T/Projects/APLTree/CodeCoverage/packages_dev/aplteam-Tester2-3.7.0'   ⍝ Original source</code>
<code class="emphasize">→[4]   :If ~⎕NEXISTS r</code>
<code class="emphasize">→[5]       (dir name extension)←⎕NPARTS r</code>
<code class="emphasize">→[6]       r←(⊃1 ⎕NPARTS''),(2⊃⎕NPARTS ¯1↓dir),'/',name,extension ⍝ Try current dir</code>
<code class="emphasize">→[7]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[8]       r←(⊃1 ⎕NPARTS''),name,extension</code>
<code class="emphasize">→[9]   :AndIf ~⎕NEXISTS r</code>
<code class="emphasize">→[10]      r←''</code>
<code> [11]  :EndIf</code>
</div>
<code class="header" id="listing_305">#._tatin.aplteam_Tester2_3_7_0.TatinVars.ID &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←ID</code>
<code class="emphasize">→[1]  r←'aplteam-Tester2-3.7.0+34'</code>
</div>
<code class="header" id="listing_306">#._tatin.aplteam_Tester2_3_7_0.TatinVars.URI &mdash; 0%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←URI</code>
<code class="emphasize">→[1]  r←'https://tatin.dev/'</code>
</div>
<code class="header" id="listing_307">#.CodeCoverage.TestCases.Test_Misc_020 &mdash; 13%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_020(stopFlag batchFlag)</code>
<code> [1]  ⍝ Check on nested namespaces</code>
<code> [2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code> [4]   R←T.custom_1</code>
<code> [5]   :Return</code>
<code> [6]  </code>
<code class="emphasize">→[7]   R←T._Failed</code>
<code> [8]  </code>
<code class="emphasize">→[9]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[10]  'TEMP'#.⎕NS''</code>
<code> [11] </code>
<code class="emphasize">→[12]  body1←':Namespace Foo' '∇r←Hello' 'r←''Hello world''' '→0' 'a←1' '∇' ':EndNamespace'</code>
<code class="emphasize">→[13]  body2←':Namespace Goo' '∇r←Hello' 'r←''Hello galaxy''' '→0' 'a←1' '∇',body1,⊂':EndNamespace'</code>
<code class="emphasize">→[14]  ref←#.TEMP.⎕FIX body2</code>
<code> [15] </code>
<code class="emphasize">→[16]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code> [17] </code>
<code class="emphasize">→[18]  C.Start ⍬</code>
<code class="emphasize">→[19]  {}#.TEMP.Goo.Hello</code>
<code class="emphasize">→[20]  {}#.TEMP.Goo.Foo.Hello</code>
<code class="emphasize">→[21]  C.Stop ⍬</code>
<code class="emphasize">→[22]  {}C.Finalise ⍬</code>
<code class="emphasize">→[23]  →T.PassesIf 2=≢C.data</code>
<code class="emphasize">→[24]  {}1 ##.CodeCoverage.ProcessDataAndCreateReport C.filename</code>
<code class="emphasize">→[25]  html←⊃⎕NGET C.filename,'.html'</code>
<code class="emphasize">→[26]  →T.GoToTidyUp 0=+/'&gt;→[3] '⍷html</code>
<code class="emphasize">→[27]  →T.GoToTidyUp 2≠≢'&gt;→\[[0-9]+] '⎕S 0⊣html</code>
<code> [28] </code>
<code class="emphasize">→[29]  R←T._OK</code>
<code> [30] </code>
<code class="emphasize">→[31] ∆TidyUp:</code>
<code class="emphasize">→[32]  1 T.codeCoverage.DeleteFiles C.filename</code>
<code class="emphasize">→[33]  Data.⎕EX'T'</code>
<code> [34] ⍝Done</code>
</div>
<code class="header" id="listing_308">#.CodeCoverage.TestCases.Test_Misc_030 &mdash; 16%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_Misc_030(stopFlag batchFlag)</code>
<code> [1]  ⍝ Check on nested Classes</code>
<code> [2]   ⎕TRAP←(999 'C' '∘∘∘ ⍝ Deliberate error')(0 'N')</code>
<code> [3]  </code>
<code> [4]   R←T.custom_1</code>
<code> [5]   :Return</code>
<code> [6]  </code>
<code class="emphasize">→[7]   R←T._Failed</code>
<code> [8]  </code>
<code class="emphasize">→[9]   #.⎕SHADOW'TEMP'</code>
<code class="emphasize">→[10]  'TEMP'#.⎕NS''</code>
<code> [11] </code>
<code class="emphasize">→[12]  body1←,¨':Class Foo' '∇r←Hello' ':Access Public Shared' 'r←''Hello world''' '∇' ':EndClass'</code>
<code class="emphasize">→[13]  body2←,¨':Class Goo' '∇r←Hello' ':Access Public Shared' 'r←''Hello galaxy''' '∇',body1,⊂':EndClass'</code>
<code class="emphasize">→[14]  ref←#.TEMP.⎕FIX body2</code>
<code> [15] </code>
<code class="emphasize">→[16]  C←⎕NEW ##.CodeCoverage(,⊂'#.TEMP')</code>
<code> [17] </code>
<code class="emphasize">→[18]  C.Start ⍬</code>
<code class="emphasize">→[19]  {}#.TEMP.Goo.Hello</code>
<code class="emphasize">→[20]  {}#.TEMP.Goo.Foo.Hello</code>
<code class="emphasize">→[21]  C.Stop ⍬</code>
<code class="emphasize">→[22]  {}C.Finalise ⍬</code>
<code class="emphasize">→[23]  →T.GoToTidyUp 2≠≢C.data</code>
<code> [24] </code>
<code class="emphasize">→[25]  R←T._OK</code>
<code> [26] </code>
<code class="emphasize">→[27] ∆TidyUp:</code>
<code class="emphasize">→[28]  1 T.codeCoverage.DeleteFiles C.filename</code>
<code> [29] ⍝Done</code>
</div>
<code class="header" id="listing_309">#.CodeCoverage.CodeCoverage.Start &mdash; 25%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Start dummy</code>
<code> [1]       ⍝ Execute `⎕PROFILE'start' 'coverage'`</code>
<code> [2]  :Access Public Instance</code>
<code class="emphasize">→[3]  r←⍬</code>
<code class="emphasize">→[4]  ⎕PROFILE'clear'</code>
<code class="emphasize">→[5]  ⎕PROFILE'start' 'coverage'</code>
<code> [6]  ∆STOPPED←0</code>
</div>
<code class="header" id="listing_310">#.CodeCoverage.CodeCoverage.Stop &mdash; 33%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> {r}←Stop dummy</code>
<code> [1]     ⍝ Stores all the data collected since `Start` was invoked, and then executes `⎕PROFILE'clear'`</code>
<code> [2]  :Access Public Instance</code>
<code> [3]  r←⍬</code>
<code> [4]  buff←(⎕PROFILE'data')[;1 2]</code>
<code class="emphasize">→[5]  ⎕PROFILE'clear'</code>
<code class="emphasize">→[6]  buff←(buff[;2]≢¨⊂⍬)⌿buff                                 ⍝ Fns as such are not of any interest, only lines</code>
<code class="emphasize">→[7]  _data⍪←(⊃∨/watch{((1+≢¨⍺)↑¨¨⊂⍵)∊¨⊂¨⍺,¨'.'}buff[;1])⌿buff ⍝ Drop everthing that's not watched</code>
<code class="emphasize">→[8]  ∆STOPPED←1</code>
</div>
<code class="header" id="listing_311">#._tatin.aplteam_Tester2_3_7_0.Tester2.ExecuteTestFunction &mdash; 33%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  rc←ExecuteTestFunction(ref ps testNo fnsName)</code>
<code class="emphasize">→[1]   :If 0=ps.batchFlag</code>
<code class="emphasize">→[2]   :AndIf 0=+/'⎕TRAP'⍷1 ⎕C{⍵↑⍨⍵⍳'⍝'}{⊃,/⍵↑⍨1++/∧\';'=1↓⊃¨A.DLB ⍵}ref.⎕NR fnsName</code>
<code class="emphasize">→[3]       ShowLog'  *** WARNING: ⎕TRAP is not localized in ',(⍕ref),'.',fnsName</code>
<code> [4]   :EndIf</code>
<code class="emphasize">→[5]   :If 0&lt;≢_codeCoverage</code>
<code class="emphasize">→[6]       _codeCoverage.Start ⍬</code>
<code> [7]   :EndIf</code>
<code> [8]   HandleStops(1⊃⎕SI)ps ∆StopHere testNo fnsName</code>
<code> [9]   :If ps.guiFlag</code>
<code class="emphasize">→[10]      ps.ref2Gui.∆n.Info.Text←'Executing ',(⍕ref),'.',fnsName,'...'</code>
<code> [11]  :EndIf</code>
<code> [12]  :If 0&lt;≢_exec_before_each_test</code>
<code class="emphasize">→[13]      :If 0=1 1⊃⎕AT _exec_before_each_test</code>
<code class="emphasize">→[14]          ⍎_exec_before_each_test,' fnsName ps'</code>
<code> [15]      :Else</code>
<code class="emphasize">→[16]          :If 0&lt;≢buff←⍎_exec_before_each_test,' fnsName ps'</code>
<code class="emphasize">→[17]              ⎕←buff</code>
<code> [18]          :EndIf</code>
<code> [19]      :EndIf</code>
<code> [20]  :EndIf</code>
<code> [21] ∆StopHere:rc←ref.⍎fnsName,' ',(⍕ps.debugFlag),' ',(⍕ps.batchFlag)</code>
<code> [22]  :If 0&lt;≢_exec_after_each_test</code>
<code class="emphasize">→[23]      :If 0=1 1⊃⎕AT _exec_after_each_test</code>
<code class="emphasize">→[24]          ⍎_exec_after_each_test,' fnsName ps'</code>
<code> [25]      :Else</code>
<code class="emphasize">→[26]          :If 0&lt;≢buff←⍎_exec_after_each_test,' fnsName ps'</code>
<code class="emphasize">→[27]              ⎕←buff</code>
<code> [28]          :EndIf</code>
<code> [29]      :EndIf</code>
<code> [30]  :EndIf</code>
<code> [31]  :If 0&lt;≢_codeCoverage</code>
<code> [32]      _codeCoverage.Stop ⍬</code>
<code> [33]  :EndIf</code>
<code> [34]     ⍝Done</code>
</div>
<code class="header" id="listing_312">#._tatin.aplteam_Tester2_3_7_0.Tester2.HandleStops &mdash; 40%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> HandleStops(fns ps StopHere testNo fnsName)</code>
<code> [1]  :If 0&lt;ps.stopFlag</code>
<code class="emphasize">→[2]  :AndIf 1⊃⌽(8⍴2)⊤⊃ps.stopFlag</code>
<code class="emphasize">→[3]      (∪(⎕STOP fns),StopHere)⎕STOP fns</code>
<code class="emphasize">→[4]      ⎕←'About to execute &lt;',(⍕_ref),'.',fnsName,'&gt; ...'</code>
<code> [5]  :Else</code>
<code> [6]      ((⎕STOP fns)~StopHere)⎕STOP fns</code>
<code> [7]  :EndIf</code>
</div>
<code class="header" id="listing_313">#.CodeCoverage.TestCases.Test_ZZZ_998 &mdash; 95%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  R←Test_ZZZ_998(stopFlag batchFlag)</code>
<code> [1]  ⍝ Checks on two text vectors: "TODO" and "CHECK", embraced by "⍝"; never fails, just reports.</code>
<code> [2]   ⎕IO←1 ⋄ ⎕ML←1</code>
<code> [3]   ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')</code>
<code> [4]   R←T._OK</code>
<code> [5]   report←''</code>
<code> [6]   rf←##.⎕THIS</code>
<code> [7]  </code>
<code> [8]   lookFor1←'⍝ C H E C K ⍝'~' '                                   ⍝ To avoid finding this function</code>
<code> [9]   buff←rf T.FindSpecialString lookFor1</code>
<code> [10]  buff←(buff[;1]≢¨⎕XSI[1])⌿buff  ⍝ remove caller</code>
<code> [11]  :If 0≠≢buff</code>
<code class="emphasize">→[12]      report,←↓(⊂' ',lookFor1,' found:'),(⊂'   '),¨buff</code>
<code> [13]  :EndIf</code>
<code> [14]  lookFor2←'⍝ T O D O ⍝'~' '                                     ⍝ To avoid finding this function</code>
<code> [15]  buff←rf T.FindSpecialString lookFor2</code>
<code> [16]  buff←(buff[;1]≢¨⎕XSI[1])⌿buff  ⍝ remove caller</code>
<code> [17]  candidate←9=⊃∘⎕NC¨buff[;1]</code>
<code> [18]  buff←(candidate{⍺:⍵≡⍕⍎⍵ ⋄ 1}¨buff[;1])⌿buff   ⍝ remove references</code>
<code> [19]  :If 0≠≢buff</code>
<code> [20]      report←↓(⊂' ',lookFor2,' found:'),(⊂'   '),¨buff</code>
<code> [21]      ⎕←('Checking for ',lookFor1,' and ',lookFor2,' '){⍵↑,'--- ',⍺,' ',⍵⍴'-'}80⌊⎕PW-1</code>
<code> [22]      ⎕←↑report</code>
<code> [23]      :If ~batchFlag</code>
<code> [24]          0 0⍴⍞,0/⎕←'  To continue press &lt;enter&gt;'</code>
<code> [25]      :EndIf</code>
<code> [26]  :EndIf</code>
<code> [27] ⍝Done</code>
</div>
<code class="header" id="listing_314">#.CodeCoverage.CodeCoverage.set_data &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_315">#.CodeCoverage.CodeCoverage.History &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  History</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ * 0.10.7 from 2024-06-05</code>
<code> [3]      ⍝   * A comma-separated list as argument to ⎕NEW caused a LENGTH ERROR</code>
<code> [4]      ⍝ * 0.10.6 from 2024-01-30</code>
<code> [5]      ⍝   * Neither `#` nor `⎕SE` were allowed</code>
<code> [6]      ⍝ * 0.10.5 from 2024-01-12</code>
<code> [7]      ⍝   * Link to `Tester2` in the documentation corrected</code>
<code> [8]      ⍝ * 0.10.4 from 2024-01-12</code>
<code> [9]      ⍝   * Packages updated</code>
<code> [10]     ⍝ * 0.10.3 from 2023-04-23</code>
<code> [11]     ⍝   * Bug fix: Instance names could not be assigned to "ignore"</code>
<code> [12]     ⍝ * 0.10.2 from 2023-04-09</code>
<code> [13]     ⍝   * On non-Windows platforms the file access matrix needs setting to avoid problems</code>
<code> [14]     ⍝ * 0.10.1 from 2023-04-08</code>
<code> [15]     ⍝   The `CreateListingForFnsAndOpr` function deleted the "*.cr" file when it should not have</code>
<code> [16]     ⍝ * 0.10.0 from 2023-03-23</code>
<code> [17]     ⍝   * New function `DeleteFiles` added for getting rid of the two reporting files create/used by `CodeCoverage`, and</code>
<code> [18]     ⍝     optionally also of the HML file</code>
<code> [19]     ⍝   * Bug fix: ∆STOPPED caused a VALUE ERROR nothing wa actually executed</code>
</div>
<code class="header" id="listing_316">#.CodeCoverage.CodeCoverage.htmlFile &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_317">#.CodeCoverage.CodeCoverage.verbose &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_318">#.CodeCoverage.TestCases.Assert &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Assert←{⍺←'' ⋄ (,1)≡,⍵:r←1 ⋄ ⎕ML←1 ⋄ ⍺ ⎕SIGNAL 1↓(⊃∊⍵),11}</code>
</div>
<code class="header" id="listing_319">#.CodeCoverage.TestCases.Data.∆Script2.myDfns2 &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_320">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.History &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  History</code>
<code> [1]      ⍝ * 1.4.0 from 2024-04-21</code>
<code> [2]      ⍝   * Left argument of `GoToWebPage` can now be 0 rather than the path to a browser EXE.</code>
<code> [3]      ⍝ * 1.3.1 from 2023-12-01</code>
<code> [4]      ⍝   * `CreateUUID` required to set `⎕RL` due to the fact that the seed is the same in every new namespace.</code>
<code> [5]      ⍝ * 1.3.0 from 2023-11-05</code>
<code> [6]      ⍝   * `ToNum` now accepts a left argument which is returned in case the right argument is an empty vector.</code>
<code> [7]      ⍝   * New methods: `BitsToInt` and `IntToBits`</code>
<code> [8]      ⍝ * 1.2.2 from 2023-10-09</code>
<code> [9]      ⍝   * Minor fix in CreateUUID</code>
<code> [10]     ⍝   * License corrected</code>
<code> [11]     ⍝ * 1.2.1 from 2023-10-05</code>
<code> [12]     ⍝   * Bug fix in `Create_UUID`</code>
<code> [13]     ⍝ * 1.2.0 from 2023-05-08</code>
<code> [14]     ⍝   * Bug fix: version number corrected</code>
<code> [15]     ⍝ * 1.1.4 from 2023-04-09</code>
<code> [16]     ⍝   * New function `LazyMatch` added</code>
<code> [17]     ⍝   * Admin.Make introduced; uses the MakeHelper package which is expected in ⎕SE</code>
<code> [18]     ⍝   * Development dependencies updated</code>
<code> [19]     ⍝   * README polished</code>
<code> [20]     ⍝   * Bug fix: GoToWebPage did not work on a Mac</code>
<code> [21]     ⍝   * Internal changes</code>
<code> [22]     ⍝     * Test cases added for perfect coverage</code>
<code> [23]     ⍝     * acre replaced by Cider</code>
<code> [24]     ⍝ * 1.1.3 from 2021-04-07</code>
<code> [25]     ⍝   * `AtLeastVersion` was NOT buggy, its test case was</code>
<code> [26]     ⍝ * 1.1.2 from 2021-04-06</code>
<code> [27]     ⍝   * `AtLeastVersion` was buggy</code>
<code> [28]     ⍝ * 1.1.1 from 2021-03-01</code>
<code> [29]     ⍝   * Package config file corrected (new format)</code>
<code> [30]     ⍝ * 1.1.0 from 2020-09-26</code>
<code> [31]     ⍝   * Method `IsRunningAsAdmin` added</code>
<code> [32]     ⍝ * 1.0.0 from 2020-09-06</code>
<code> [33]     ⍝   * This is the predecessor of `APLTreeUtils`</code>
</div>
<code class="header" id="listing_321">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.x &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_322">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.msg &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_323">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.sep &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_324">#._tatin.aplteam_APLTreeUtils2_1_4_0.APLTreeUtils2.type &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_325">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.set_data &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_326">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.History &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  History</code>
<code> [1]   :Access Public Shared</code>
<code> [2]      ⍝ * 0.10.6 from 2024-01-30</code>
<code> [3]      ⍝   * Neither `#` nor `⎕SE` were allowed</code>
<code> [4]      ⍝ * 0.10.5 from 2024-01-12</code>
<code> [5]      ⍝   * Link to `Tester2` in the documentation corrected</code>
<code> [6]      ⍝ * 0.10.4 from 2024-01-12</code>
<code> [7]      ⍝   * Packages updated</code>
<code> [8]      ⍝ * 0.10.3 from 2023-04-23</code>
<code> [9]      ⍝   * Bug fix: Instance names could not be assigned to "ignore"</code>
<code> [10]     ⍝ * 0.10.2 from 2023-04-09</code>
<code> [11]     ⍝   * On non-Windows platforms the file access matrix needs setting to avoid problems</code>
<code> [12]     ⍝ * 0.10.1 from 2023-04-08</code>
<code> [13]     ⍝   The `CreateListingForFnsAndOpr` function deleted the "*.cr" file when it should not have</code>
<code> [14]     ⍝ * 0.10.0 from 2023-03-23</code>
<code> [15]     ⍝   * New function `DeleteFiles` added for getting rid of the two reporting files create/used by `CodeCoverage`, and</code>
<code> [16]     ⍝     optionally also of the HML file</code>
<code> [17]     ⍝   * Bug fix: ∆STOPPED caused a VALUE ERROR nothing wa actually executed</code>
</div>
<code class="header" id="listing_327">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.htmlFile &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_328">#._tatin.aplteam_CodeCoverage_0_10_6.CodeCoverage.verbose &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_329">#._tatin.aplteam_CommTools_1_7_1.Assert &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> Assert←{⍺←'' ⋄ (,1)≡,⍵:r←1 ⋄ ⎕ML←1 ⋄ ⍺ ⎕SIGNAL 1↓(⊃∊⍵),11}</code>
</div>
<code class="header" id="listing_330">#._tatin.aplteam_CommTools_1_7_1.ReplaceCRbyLF &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> ReplaceCRbyLF←{LF@(⍸⍵=⎕UCS 13)⊣⍵}</code>
</div>
<code class="header" id="listing_331">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_IniFilename &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_332">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_OldStyleFlag &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_333">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_EstablishedAt &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_334">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_Changed &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_335">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.set_keyed default data &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_336">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.get_keyed default data &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_337">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.History &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code>  History</code>
<code> [1]   :Access Public Shared</code>
<code> [2]        ⍝ * 5.0.3</code>
<code> [3]        ⍝   * `GetIniFiles` did not work under Linux/Mac-OS</code>
<code> [4]        ⍝   * Now managed by Cider</code>
<code> [5]        ⍝ * 5.0.2</code>
<code> [6]        ⍝   * Package config file corrected</code>
<code> [7]        ⍝ * 5.0.1</code>
<code> [8]        ⍝   * Internal change: `Uppercase` and Lowercase` replaced by calles to `⎕C`.</code>
<code> [9]        ⍝ * 5.0.0</code>
<code> [10]       ⍝   * BREAKING CHANGES:</code>
<code> [11]       ⍝     * Does not now requires the class `APLTreeUtils2`</code>
<code> [12]       ⍝     * Requires at least Dyalog 18.0</code>
<code> [13]       ⍝   * `IniFiles` does not :Include APLTreeUtils anymore</code>
<code> [14]       ⍝   * Bug fix: in case a value was added with `Put` the `Changed` property was not set to 1.</code>
<code> [15]       ⍝   * Internally now `⎕ML←1` is used.</code>
<code> [16]       ⍝\\</code>
<code> [17]       ⍝ For information regarding older versions see &lt;https://github.com/aplteam/IniFiles/releases&gt;</code>
</div>
<code class="header" id="listing_338">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.type &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_339">#._tatin.aplteam_IniFiles_5_0_3.IniFiles.extension &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_340">#._tatin.aplteam_Tester2_3_7_0.Tester2.get_custom_1 &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←get_custom_1</code>
<code> [1]  r←_custom_1</code>
</div>
<code class="header" id="listing_341">#._tatin.aplteam_Tester2_3_7_0.Tester2.set_INI &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_342">#._tatin.aplteam_Tester2_3_7_0.Tester2.FindSpecialString &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block"><code> r←{target}FindSpecialString what</code>
<code> [1]     ⍝ Use this to search for stuff like "CHECK" or "TODO" enclosed between lamps `⍝`.</code>
<code> [2]     ⍝ Without left argument the search starts in `_ref`.</code>
<code> [3]  :Access Public Instance</code>
<code> [4]  target←{0&lt;⎕NC ⍵:⍎⍵ ⋄ ⍕_ref}'target'</code>
<code> [5]  r←⍉1↓[1+⎕IO]⎕SE.UCMD'locate "',what,'" -return=count -objects=',⍕target  ⍝ The quotes are essential because of the ⍝ symbol!</code>
<code> [6]  :If 0&lt;≢r←(0&lt;r[;⎕IO+1])⌿r                                    ⍝ Drop those with no hits</code>
<code> [7]      r[;⎕IO]←{2&gt;'#'+.=⍵:⍵ ⋄ {⎕IO←0 ⋄ ⌽⍵↑⍨1+⍵⍳'#'}⌽⍵}¨r[;⎕IO]</code>
<code> [8]  :EndIf</code>
</div>
<code class="header" id="listing_343">#._tatin.aplteam_Tester2_3_7_0.Tester2.stopFlag &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_344">#._tatin.aplteam_Tester2_3_7_0.Tester2._parms &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_345">#._tatin.aplteam_Tester2_3_7_0.Tester2.type &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_346">#._tatin.aplteam_Tester2_3_7_0.Tester2.label &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_347">#._tatin.aplteam_Tester2_3_7_0.Tester2.x &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_348">#._tatin.aplteam_Tester2_3_7_0.Tester2.target &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_349">#._tatin.aplteam_Tester2_3_7_0.Tester2.groupName &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<code class="header" id="listing_350">#._tatin.aplteam_Tester2_3_7_0.Tester2.force &mdash; 100%<a class="float-right no-print no-underline top-links" href="#top" title="Go to the top of the document">&#8607;</a><a  class="float-right no-print no-underline top-links" href="#partly-covered" title="Go to the beginning of 'Partly-covered'">↑</a></code>
<div class="code-block missing">Could not get canonical representation.</div>
<div id="footer">
<hr>
<p>Created by "CodeCoverage" version 0.10.7+52 from 2024-06-05</p>
</div>

</body>
</html>
